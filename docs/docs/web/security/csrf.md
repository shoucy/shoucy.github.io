## 什么是csrf？

CSRF，全称Cross-site request forgery，翻译过来就是跨站请求伪造，是指利用受害者尚未失效的身份认证信息（cookie、会话等），诱骗其点击恶意链接或者访问包含攻击代码的页面，在受害人不知情的情况下以受害者的身份向（身份认证信息所对应的）服务器发送请求，从而完成非法操作（如转账、改密等）。

## 如何防止？

**问题1：我们能不能区分一个请求是来自于我们自己的前端页面，还是第三方网站？**

答：不能。

**问题2：如何让自己的页面和伪造的页面变得不一样？**

1. http请求头，有一个叫 `Referer` 的字段，展示发起请求的网址。但它并不适合用来做校验，它会屏蔽掉所有的第三方请求，友情链接，百度搜索等。并且，它在发请求时是可以主动改的，它防了君子，却防不住小人。`Referer` 更适合做一些来源网站访问数量统计上。

2. 把cookie（先加密下） 随表单一起传到后台，在后台做比对。这个时可以的，因为黑客通过三方页面只能利用cookie，却无法获取cookie。但是，cookie也并不是非常安全，比如被通过XSS漏洞获取到了。黑客左手cookie右手算法（毕竟写在前端），也能造成CSRF攻击。

3. 通过专业的CSRF token。比如Django的设计，每个表单页面在生成时都会带一个CSRF token，在提交给后台时，会校验这个token。这应该是目前最主流的手段。








