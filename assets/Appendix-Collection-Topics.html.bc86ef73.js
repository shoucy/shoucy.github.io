import{_ as n,o as s,c as a,e as t}from"./app.205a3d76.js";const p={},o=t(`<p>[TOC]</p><h1 id="\u9644\u5F55-\u96C6\u5408\u4E3B\u9898" tabindex="-1"><a class="header-anchor" href="#\u9644\u5F55-\u96C6\u5408\u4E3B\u9898" aria-hidden="true">#</a> \u9644\u5F55:\u96C6\u5408\u4E3B\u9898</h1><blockquote><p>\u672C\u9644\u5F55\u662F\u4E00\u4E9B\u6BD4<a href="">\u7B2C\u5341\u4E8C\u7AE0 \u96C6\u5408</a>\u4E2D\u4ECB\u7ECD\u7684\u66F4\u9AD8\u7EA7\u7684\u5185\u5BB9\u3002</p></blockquote><h2 id="\u793A\u4F8B\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B\u6570\u636E" aria-hidden="true">#</a> \u793A\u4F8B\u6570\u636E</h2><p>\u8FD9\u91CC\u521B\u5EFA\u4E00\u4E9B\u6837\u672C\u6570\u636E\u7528\u4E8E\u96C6\u5408\u793A\u4F8B\u3002 \u4EE5\u4E0B\u6570\u636E\u5C06\u989C\u8272\u540D\u79F0\u4E0EHTML\u989C\u8272\u7684RGB\u503C\u76F8\u5173\u8054\u3002\u8BF7\u6CE8\u610F\uFF0C\u6BCF\u4E2A\u952E\u548C\u503C\u90FD\u662F\u552F\u4E00\u7684\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/HTMLColors.java</span>
<span class="token comment">// Sample data for collection examples</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HTMLColors</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ARRAY <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span> <span class="token number">0xF0F8FF</span><span class="token punctuation">,</span> <span class="token string">&quot;AliceBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFAEBD7</span><span class="token punctuation">,</span> <span class="token string">&quot;AntiqueWhite&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x7FFFD4</span><span class="token punctuation">,</span> <span class="token string">&quot;Aquamarine&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF0FFFF</span><span class="token punctuation">,</span> <span class="token string">&quot;Azure&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF5F5DC</span><span class="token punctuation">,</span> <span class="token string">&quot;Beige&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFE4C4</span><span class="token punctuation">,</span> <span class="token string">&quot;Bisque&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x000000</span><span class="token punctuation">,</span> <span class="token string">&quot;Black&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFEBCD</span><span class="token punctuation">,</span> <span class="token string">&quot;BlanchedAlmond&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x0000FF</span><span class="token punctuation">,</span> <span class="token string">&quot;Blue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x8A2BE2</span><span class="token punctuation">,</span> <span class="token string">&quot;BlueViolet&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xA52A2A</span><span class="token punctuation">,</span> <span class="token string">&quot;Brown&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDEB887</span><span class="token punctuation">,</span> <span class="token string">&quot;BurlyWood&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x5F9EA0</span><span class="token punctuation">,</span> <span class="token string">&quot;CadetBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x7FFF00</span><span class="token punctuation">,</span> <span class="token string">&quot;Chartreuse&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xD2691E</span><span class="token punctuation">,</span> <span class="token string">&quot;Chocolate&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF7F50</span><span class="token punctuation">,</span> <span class="token string">&quot;Coral&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x6495ED</span><span class="token punctuation">,</span> <span class="token string">&quot;CornflowerBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFF8DC</span><span class="token punctuation">,</span> <span class="token string">&quot;Cornsilk&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDC143C</span><span class="token punctuation">,</span> <span class="token string">&quot;Crimson&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00FFFF</span><span class="token punctuation">,</span> <span class="token string">&quot;Cyan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00008B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x008B8B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkCyan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xB8860B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkGoldenRod&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xA9A9A9</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x006400</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xBDB76B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkKhaki&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x8B008B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkMagenta&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x556B2F</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkOliveGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF8C00</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkOrange&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x9932CC</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkOrchid&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x8B0000</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkRed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xE9967A</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkSalmon&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x8FBC8F</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkSeaGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x483D8B</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkSlateBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x2F4F4F</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkSlateGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00CED1</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkTurquoise&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x9400D3</span><span class="token punctuation">,</span> <span class="token string">&quot;DarkViolet&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF1493</span><span class="token punctuation">,</span> <span class="token string">&quot;DeepPink&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00BFFF</span><span class="token punctuation">,</span> <span class="token string">&quot;DeepSkyBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x696969</span><span class="token punctuation">,</span> <span class="token string">&quot;DimGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x1E90FF</span><span class="token punctuation">,</span> <span class="token string">&quot;DodgerBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xB22222</span><span class="token punctuation">,</span> <span class="token string">&quot;FireBrick&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFAF0</span><span class="token punctuation">,</span> <span class="token string">&quot;FloralWhite&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x228B22</span><span class="token punctuation">,</span> <span class="token string">&quot;ForestGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDCDCDC</span><span class="token punctuation">,</span> <span class="token string">&quot;Gainsboro&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF8F8FF</span><span class="token punctuation">,</span> <span class="token string">&quot;GhostWhite&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFD700</span><span class="token punctuation">,</span> <span class="token string">&quot;Gold&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDAA520</span><span class="token punctuation">,</span> <span class="token string">&quot;GoldenRod&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x808080</span><span class="token punctuation">,</span> <span class="token string">&quot;Gray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x008000</span><span class="token punctuation">,</span> <span class="token string">&quot;Green&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xADFF2F</span><span class="token punctuation">,</span> <span class="token string">&quot;GreenYellow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF0FFF0</span><span class="token punctuation">,</span> <span class="token string">&quot;HoneyDew&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF69B4</span><span class="token punctuation">,</span> <span class="token string">&quot;HotPink&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xCD5C5C</span><span class="token punctuation">,</span> <span class="token string">&quot;IndianRed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x4B0082</span><span class="token punctuation">,</span> <span class="token string">&quot;Indigo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFFF0</span><span class="token punctuation">,</span> <span class="token string">&quot;Ivory&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF0E68C</span><span class="token punctuation">,</span> <span class="token string">&quot;Khaki&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xE6E6FA</span><span class="token punctuation">,</span> <span class="token string">&quot;Lavender&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFF0F5</span><span class="token punctuation">,</span> <span class="token string">&quot;LavenderBlush&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x7CFC00</span><span class="token punctuation">,</span> <span class="token string">&quot;LawnGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFACD</span><span class="token punctuation">,</span> <span class="token string">&quot;LemonChiffon&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xADD8E6</span><span class="token punctuation">,</span> <span class="token string">&quot;LightBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF08080</span><span class="token punctuation">,</span> <span class="token string">&quot;LightCoral&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xE0FFFF</span><span class="token punctuation">,</span> <span class="token string">&quot;LightCyan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFAFAD2</span><span class="token punctuation">,</span> <span class="token string">&quot;LightGoldenRodYellow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xD3D3D3</span><span class="token punctuation">,</span> <span class="token string">&quot;LightGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x90EE90</span><span class="token punctuation">,</span> <span class="token string">&quot;LightGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFB6C1</span><span class="token punctuation">,</span> <span class="token string">&quot;LightPink&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFA07A</span><span class="token punctuation">,</span> <span class="token string">&quot;LightSalmon&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x20B2AA</span><span class="token punctuation">,</span> <span class="token string">&quot;LightSeaGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x87CEFA</span><span class="token punctuation">,</span> <span class="token string">&quot;LightSkyBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x778899</span><span class="token punctuation">,</span> <span class="token string">&quot;LightSlateGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xB0C4DE</span><span class="token punctuation">,</span> <span class="token string">&quot;LightSteelBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFFE0</span><span class="token punctuation">,</span> <span class="token string">&quot;LightYellow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00FF00</span><span class="token punctuation">,</span> <span class="token string">&quot;Lime&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x32CD32</span><span class="token punctuation">,</span> <span class="token string">&quot;LimeGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFAF0E6</span><span class="token punctuation">,</span> <span class="token string">&quot;Linen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF00FF</span><span class="token punctuation">,</span> <span class="token string">&quot;Magenta&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x800000</span><span class="token punctuation">,</span> <span class="token string">&quot;Maroon&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x66CDAA</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumAquaMarine&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x0000CD</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xBA55D3</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumOrchid&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x9370DB</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumPurple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x3CB371</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumSeaGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x7B68EE</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumSlateBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00FA9A</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumSpringGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x48D1CC</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumTurquoise&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xC71585</span><span class="token punctuation">,</span> <span class="token string">&quot;MediumVioletRed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x191970</span><span class="token punctuation">,</span> <span class="token string">&quot;MidnightBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF5FFFA</span><span class="token punctuation">,</span> <span class="token string">&quot;MintCream&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFE4E1</span><span class="token punctuation">,</span> <span class="token string">&quot;MistyRose&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFE4B5</span><span class="token punctuation">,</span> <span class="token string">&quot;Moccasin&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFDEAD</span><span class="token punctuation">,</span> <span class="token string">&quot;NavajoWhite&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x000080</span><span class="token punctuation">,</span> <span class="token string">&quot;Navy&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFDF5E6</span><span class="token punctuation">,</span> <span class="token string">&quot;OldLace&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x808000</span><span class="token punctuation">,</span> <span class="token string">&quot;Olive&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x6B8E23</span><span class="token punctuation">,</span> <span class="token string">&quot;OliveDrab&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFA500</span><span class="token punctuation">,</span> <span class="token string">&quot;Orange&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF4500</span><span class="token punctuation">,</span> <span class="token string">&quot;OrangeRed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDA70D6</span><span class="token punctuation">,</span> <span class="token string">&quot;Orchid&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xEEE8AA</span><span class="token punctuation">,</span> <span class="token string">&quot;PaleGoldenRod&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x98FB98</span><span class="token punctuation">,</span> <span class="token string">&quot;PaleGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xAFEEEE</span><span class="token punctuation">,</span> <span class="token string">&quot;PaleTurquoise&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDB7093</span><span class="token punctuation">,</span> <span class="token string">&quot;PaleVioletRed&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFEFD5</span><span class="token punctuation">,</span> <span class="token string">&quot;PapayaWhip&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFDAB9</span><span class="token punctuation">,</span> <span class="token string">&quot;PeachPuff&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xCD853F</span><span class="token punctuation">,</span> <span class="token string">&quot;Peru&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFC0CB</span><span class="token punctuation">,</span> <span class="token string">&quot;Pink&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xDDA0DD</span><span class="token punctuation">,</span> <span class="token string">&quot;Plum&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xB0E0E6</span><span class="token punctuation">,</span> <span class="token string">&quot;PowderBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x800080</span><span class="token punctuation">,</span> <span class="token string">&quot;Purple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF0000</span><span class="token punctuation">,</span> <span class="token string">&quot;Red&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xBC8F8F</span><span class="token punctuation">,</span> <span class="token string">&quot;RosyBrown&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x4169E1</span><span class="token punctuation">,</span> <span class="token string">&quot;RoyalBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x8B4513</span><span class="token punctuation">,</span> <span class="token string">&quot;SaddleBrown&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFA8072</span><span class="token punctuation">,</span> <span class="token string">&quot;Salmon&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF4A460</span><span class="token punctuation">,</span> <span class="token string">&quot;SandyBrown&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x2E8B57</span><span class="token punctuation">,</span> <span class="token string">&quot;SeaGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFF5EE</span><span class="token punctuation">,</span> <span class="token string">&quot;SeaShell&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xA0522D</span><span class="token punctuation">,</span> <span class="token string">&quot;Sienna&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xC0C0C0</span><span class="token punctuation">,</span> <span class="token string">&quot;Silver&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x87CEEB</span><span class="token punctuation">,</span> <span class="token string">&quot;SkyBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x6A5ACD</span><span class="token punctuation">,</span> <span class="token string">&quot;SlateBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x708090</span><span class="token punctuation">,</span> <span class="token string">&quot;SlateGray&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFAFA</span><span class="token punctuation">,</span> <span class="token string">&quot;Snow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x00FF7F</span><span class="token punctuation">,</span> <span class="token string">&quot;SpringGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x4682B4</span><span class="token punctuation">,</span> <span class="token string">&quot;SteelBlue&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xD2B48C</span><span class="token punctuation">,</span> <span class="token string">&quot;Tan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x008080</span><span class="token punctuation">,</span> <span class="token string">&quot;Teal&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xD8BFD8</span><span class="token punctuation">,</span> <span class="token string">&quot;Thistle&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFF6347</span><span class="token punctuation">,</span> <span class="token string">&quot;Tomato&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x40E0D0</span><span class="token punctuation">,</span> <span class="token string">&quot;Turquoise&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xEE82EE</span><span class="token punctuation">,</span> <span class="token string">&quot;Violet&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF5DEB3</span><span class="token punctuation">,</span> <span class="token string">&quot;Wheat&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFFFF</span><span class="token punctuation">,</span> <span class="token string">&quot;White&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xF5F5F5</span><span class="token punctuation">,</span> <span class="token string">&quot;WhiteSmoke&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0xFFFF00</span><span class="token punctuation">,</span> <span class="token string">&quot;Yellow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token number">0x9ACD32</span><span class="token punctuation">,</span> <span class="token string">&quot;YellowGreen&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> MAP <span class="token operator">=</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>ARRAY<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>
        element <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        element <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>element<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// Merge function</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token class-name">LinkedHashMap</span><span class="token operator">::</span><span class="token keyword">new</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Inversion only works if values are unique:</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span>
  <span class="token function">invert</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>
        <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">::</span><span class="token function">getValue</span><span class="token punctuation">,</span>
        <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">::</span><span class="token function">getKey</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token class-name">LinkedHashMap</span><span class="token operator">::</span><span class="token keyword">new</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span>
    INVMAP <span class="token operator">=</span> <span class="token function">invert</span><span class="token punctuation">(</span>MAP<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Look up RGB value given a name:</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token class-name">String</span> colorName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> INVMAP<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>colorName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> LIST <span class="token operator">=</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>ARRAY<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> RGBLIST <span class="token operator">=</span>
    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>ARRAY<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
      <span class="token string">&quot;0x%06X: %s%n&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token function">show</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lst<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lst<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span>lst<span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">showrgb</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> lst<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lst<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>n <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;0x%06X%n&quot;</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showrgb</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> lst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showrgb</span><span class="token punctuation">(</span>lst<span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">showInv</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>
          <span class="token string">&quot;%-20s  0x%06X%n&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showInv</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showInv</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> m<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;******************************&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MAP</strong> \u662F\u4F7F\u7528Streams\uFF08<a href="">\u7B2C\u5341\u56DB\u7AE0 \u6D41\u5F0F\u7F16\u7A0B</a>\uFF09\u521B\u5EFA\u7684\u3002 \u4E8C\u7EF4\u6570\u7EC4 <strong>ARRAY</strong> \u4F5C\u4E3A\u6D41\u4F20\u8F93\u5230 <strong>Map</strong> \u4E2D\uFF0C\u4F46\u8BF7\u6CE8\u610F\u6211\u4EEC\u4E0D\u4EC5\u4EC5\u662F\u4F7F\u7528\u7B80\u5355\u7248\u672C\u7684 <code>Collectors.toMap()</code> \u3002 \u90A3\u4E2A\u7248\u672C\u751F\u6210\u4E00\u4E2A <strong>HashMap</strong> \uFF0C\u5B83\u4F7F\u7528\u6563\u5217\u51FD\u6570\u6765\u63A7\u5236\u5BF9\u952E\u7684\u6392\u5E8F\u3002 \u4E3A\u4E86\u4FDD\u7559\u539F\u6765\u7684\u987A\u5E8F\uFF0C\u6211\u4EEC\u5FC5\u987B\u5C06\u952E\u503C\u5BF9\u76F4\u63A5\u653E\u5165 <strong>TreeMap</strong> \u4E2D\uFF0C\u8FD9\u610F\u5473\u7740\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u66F4\u590D\u6742\u7684 <code>Collectors.toMap()</code> \u7248\u672C\u3002\u8FD9\u9700\u8981\u4E24\u4E2A\u51FD\u6570\u4ECE\u6BCF\u4E2A\u6D41\u5143\u7D20\u4E2D\u63D0\u53D6\u952E\u548C\u503C\uFF0C\u5C31\u50CF\u7B80\u5355\u7248\u672C\u7684<code>Collectors.toMap()</code> \u4E00\u6837\u3002 \u7136\u540E\u5B83\u9700\u8981\u4E00\u4E2A<em>\u5408\u5E76\u51FD\u6570</em>\uFF08merge function\uFF09\uFF0C\u5B83\u89E3\u51B3\u4E86\u4E0E\u540C\u4E00\u4E2A\u952E\u76F8\u5173\u7684\u4E24\u4E2A\u503C\u4E4B\u95F4\u7684\u51B2\u7A81\u3002\u8FD9\u91CC\u7684\u6570\u636E\u5DF2\u7ECF\u9884\u5148\u5BA1\u67E5\u8FC7\uFF0C\u56E0\u6B64\u7EDD\u4E0D\u4F1A\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5982\u679C\u6709\u7684\u8BDD\uFF0C\u8FD9\u91CC\u4F1A\u629B\u51FA\u5F02\u5E38\u3002\u6700\u540E\uFF0C\u4F20\u9012\u751F\u6210\u6240\u9700\u7C7B\u578B\u7684\u7A7Amap\u7684\u51FD\u6570\uFF0C\u7136\u540E\u7528\u6D41\u6765\u586B\u5145\u5B83\u3002</p><p><code>rgb()</code> \u65B9\u6CD5\u662F\u4E00\u4E2A\u4FBF\u6377\u51FD\u6570\uFF08convenience function\uFF09\uFF0C\u5B83\u63A5\u53D7\u989C\u8272\u540D\u79F0 <strong>String</strong> \u53C2\u6570\u5E76\u751F\u6210\u5176\u6570\u5B57RGB\u503C\u3002\u4E3A\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u53CD\u8F6C\u7248\u672C\u7684 <strong>COLORS</strong> \uFF0C\u5B83\u63A5\u53D7\u4E00\u4E2A <strong>String</strong>\u952E\u5E76\u67E5\u627ERGB\u7684 <strong>Integer</strong> \u503C\u3002 \u8FD9\u662F\u901A\u8FC7 <code>invert()</code> \u65B9\u6CD5\u5B9E\u73B0\u7684\uFF0C\u5982\u679C\u4EFB\u4F55 <strong>COLORS</strong> \u503C\u4E0D\u552F\u4E00\uFF0C\u5219\u629B\u51FA\u5F02\u5E38\u3002</p><p>\u6211\u4EEC\u8FD8\u521B\u5EFA\u5305\u542B\u6240\u6709\u540D\u79F0\u7684 <strong>LIST</strong> \uFF0C\u4EE5\u53CA\u5305\u542B\u5341\u516D\u8FDB\u5236\u8868\u793A\u6CD5\u7684RGB\u503C\u7684 <strong>RGBLIST</strong> \u3002</p><p>\u7B2C\u4E00\u4E2A <code>show()</code> \u65B9\u6CD5\u63A5\u53D7\u4E00\u4E2A <strong>Map.Entry</strong> \u5E76\u663E\u793A\u4EE5\u5341\u516D\u8FDB\u5236\u8868\u793A\u7684\u952E\uFF0C\u4EE5\u4FBF\u8F7B\u677E\u5730\u5BF9\u539F\u59CB <strong>ARRAY</strong> \u8FDB\u884C\u53CC\u91CD\u68C0\u67E5\u3002 \u540D\u79F0\u4EE5 <strong>show</strong> \u5F00\u5934\u7684\u6BCF\u4E2A\u65B9\u6CD5\u90FD\u4F1A\u91CD\u8F7D\u4E24\u4E2A\u7248\u672C\uFF0C\u5176\u4E2D\u4E00\u4E2A\u7248\u672C\u91C7\u7528 <strong>count</strong> \u53C2\u6570\u6765\u6307\u793A\u8981\u663E\u793A\u7684\u5143\u7D20\u6570\u91CF\uFF0C\u7B2C\u4E8C\u4E2A\u7248\u672C\u663E\u793A\u5E8F\u5217\u4E2D\u7684\u6240\u6709\u5143\u7D20\u3002</p><p>\u8FD9\u91CC\u662F\u4E00\u4E2A\u57FA\u672C\u7684\u6D4B\u8BD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/HTMLColorTest.java</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HTMLColorTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DISPLAY_SIZE <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span>MAP<span class="token punctuation">,</span> DISPLAY_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showInv</span><span class="token punctuation">(</span>INVMAP<span class="token punctuation">,</span> DISPLAY_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>LIST<span class="token punctuation">,</span> DISPLAY_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showrgb</span><span class="token punctuation">(</span>RGBLIST<span class="token punctuation">,</span> DISPLAY_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
0xF0F8FF: AliceBlue
0xFAEBD7: AntiqueWhite
0x7FFFD4: Aquamarine
0xF0FFFF: Azure
0xF5F5DC: Beige
0xFFE4C4: Bisque
0x000000: Black
0xFFEBCD: BlanchedAlmond
0x0000FF: Blue
0x8A2BE2: BlueViolet
0xA52A2A: Brown
0xDEB887: BurlyWood
0x5F9EA0: CadetBlue
0x7FFF00: Chartreuse
0xD2691E: Chocolate
0xFF7F50: Coral
0x6495ED: CornflowerBlue
0xFFF8DC: Cornsilk
0xDC143C: Crimson
0x00FFFF: Cyan
******************************
AliceBlue             0xF0F8FF
AntiqueWhite          0xFAEBD7
Aquamarine            0x7FFFD4
Azure                 0xF0FFFF
Beige                 0xF5F5DC
Bisque                0xFFE4C4
Black                 0x000000
BlanchedAlmond        0xFFEBCD
Blue                  0x0000FF
BlueViolet            0x8A2BE2
Brown                 0xA52A2A
BurlyWood             0xDEB887
CadetBlue             0x5F9EA0
Chartreuse            0x7FFF00
Chocolate             0xD2691E
Coral                 0xFF7F50
CornflowerBlue        0x6495ED
Cornsilk              0xFFF8DC
Crimson               0xDC143C
Cyan                  0x00FFFF
******************************
AliceBlue
AntiqueWhite
Aquamarine
Azure
Beige
Bisque
Black
BlanchedAlmond
Blue
BlueViolet
Brown
BurlyWood
CadetBlue
Chartreuse
Chocolate
Coral
CornflowerBlue
Cornsilk
Crimson
Cyan
******************************
0xF0F8FF
0xFAEBD7
0x7FFFD4
0xF0FFFF
0xF5F5DC
0xFFE4C4
0x000000
0xFFEBCD
0x0000FF
0x8A2BE2
0xA52A2A
0xDEB887
0x5F9EA0
0x7FFF00
0xD2691E
0xFF7F50
0x6495ED
0xFFF8DC
0xDC143C
0x00FFFF
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u4F7F\u7528 <strong>LinkedHashMap</strong> \u786E\u5B9E\u80FD\u591F\u4FDD\u7559 <strong>HTMLColors.ARRAY</strong> \u7684\u987A\u5E8F\u3002</p><h2 id="list\u884C\u4E3A" tabindex="-1"><a class="header-anchor" href="#list\u884C\u4E3A" aria-hidden="true">#</a> List\u884C\u4E3A</h2><p><strong>Lists</strong> \u662F\u5B58\u50A8\u548C\u68C0\u7D22\u5BF9\u8C61\uFF08\u6B21\u4E8E\u6570\u7EC4\uFF09\u7684\u6700\u57FA\u672C\u65B9\u6CD5\u3002\u57FA\u672C\u5217\u8868\u64CD\u4F5C\u5305\u62EC\uFF1A</p><ul><li><code>add()</code> \u7528\u4E8E\u63D2\u5165\u5143\u7D20</li><li><code>get()</code> \u7528\u4E8E\u968F\u673A\u8BBF\u95EE\u5143\u7D20</li><li><code>iterator()</code> \u83B7\u53D6\u5E8F\u5217\u4E0A\u7684\u4E00\u4E2A <strong>Iterator</strong></li><li><code>stream()</code> \u751F\u6210\u5143\u7D20\u7684\u4E00\u4E2A <strong>Stream</strong></li></ul><p>\u5217\u8868\u6784\u9020\u65B9\u6CD5\u59CB\u7EC8\u4FDD\u7559\u5143\u7D20\u7684\u6DFB\u52A0\u987A\u5E8F\u3002</p><p>\u4EE5\u4E0B\u793A\u4F8B\u4E2D\u7684\u65B9\u6CD5\u5404\u81EA\u6DB5\u76D6\u4E86\u4E00\u7EC4\u4E0D\u540C\u7684\u884C\u4E3A\uFF1A\u6BCF\u4E2A <strong>List</strong> \u53EF\u4EE5\u6267\u884C\u7684\u64CD\u4F5C\uFF08 <code>basicTest()</code> \uFF09\uFF0C\u4F7F\u7528 <strong>Iterator</strong> \uFF08 <code>iterMotion()</code> \uFF09\u904D\u5386\u5E8F\u5217\uFF0C\u4F7F\u7528 <strong>Iterator</strong> \uFF08 <code>iterManipulation()</code> \uFF09\u66F4\u6539\u5185\u5BB9\uFF0C\u67E5\u770B <strong>List</strong> \u64CD\u4F5C\uFF08 <code>testVisual()</code> \uFF09\u7684\u6548\u679C\uFF0C\u4EE5\u53CA\u4EC5\u53EF\u7528\u4E8E <strong>LinkedLists</strong> \u7684\u64CD\u4F5C\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/ListOps.java</span>
<span class="token comment">// Things you can do with Lists</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListOps</span> <span class="token punctuation">{</span>
  <span class="token comment">// Create a short list for testing:</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> LIST <span class="token operator">=</span>
    <span class="token class-name">HTMLColors</span><span class="token punctuation">.</span>LIST<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> b<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> s<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lit<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Add at location 1</span>
    a<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Add at end</span>
    <span class="token comment">// Add a collection:</span>
    a<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Add a collection starting at location 3:</span>
    a<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Is it in there?</span>
    <span class="token comment">// Is the entire collection in there?</span>
    b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Lists allow random access, which is cheap</span>
    <span class="token comment">// for ArrayList, expensive for LinkedList:</span>
    s <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Get (typed) object at location 1</span>
    i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Tell index of object</span>
    b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Any elements inside?</span>
    it <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ordinary Iterator</span>
    lit <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ListIterator</span>
    lit <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Start at location 3</span>
    i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Last match</span>
    a<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove location 1</span>
    a<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove this object</span>
    a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set location 1 to &quot;y&quot;</span>
    <span class="token comment">// Keep everything that&#39;s in the argument</span>
    <span class="token comment">// (the intersection of the two sets):</span>
    a<span class="token punctuation">.</span><span class="token function">retainAll</span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Remove everything that&#39;s in the argument:</span>
    a<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// How big is it?</span>
    a<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove all elements</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">iterMotion</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">hasPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">nextIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    s <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">previousIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">iterManipulation</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    it<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;47&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Must move to an element after add():</span>
    it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Remove the element after the new one:</span>
    it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Must move to an element after remove():</span>
    it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Change the element after the deleted one:</span>
    it<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;47&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testVisual</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> b <span class="token operator">=</span> LIST<span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;b = &quot;</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Insert, remove, and replace elements</span>
    <span class="token comment">// using a ListIterator:</span>
    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span>
      a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;47&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Traverse the list backwards:</span>
    x <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">hasPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;testVisual finished&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// There are some things that only LinkedLists can do:</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ll<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Treat it like a stack, pushing:</span>
    ll<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ll<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Like &quot;peeking&quot; at the top of a stack:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Like popping a stack:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Treat it like a queue, pulling elements</span>
    <span class="token comment">// off the tail end:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ll<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Make and fill a new list each time:</span>
    <span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">iterMotion</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">iterMotion</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">iterManipulation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">iterManipulation</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">testVisual</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">testLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
b = [AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet,
AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet,
AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet,
AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige, one,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet,
AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
Bisque
Black
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet,
AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige, one,
47, BlanchedAlmond, Blue, BlueViolet, AliceBlue,
AntiqueWhite, Aquamarine, Azure, Beige, Bisque, Black,
BlanchedAlmond, Blue, BlueViolet]
BlueViolet Blue BlanchedAlmond Black Bisque Beige Azure
Aquamarine AntiqueWhite AliceBlue BlueViolet Blue
BlanchedAlmond 47 one Beige Azure Aquamarine
AntiqueWhite AliceBlue BlueViolet Blue BlanchedAlmond
Black Bisque Beige Azure Aquamarine AntiqueWhite
AliceBlue
testVisual finished
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
[two, one, AliceBlue, AntiqueWhite, Aquamarine, Azure,
Beige, Bisque, Black, BlanchedAlmond, Blue, BlueViolet]
two
two
one
BlueViolet
[AliceBlue, AntiqueWhite, Aquamarine, Azure, Beige,
Bisque, Black, BlanchedAlmond, Blue]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728 <code>basicTest()</code> \u548C <code>iterMotion()</code> \u4E2D\uFF0C\u65B9\u6CD5\u8C03\u7528\u662F\u4E3A\u4E86\u5C55\u793A\u6B63\u786E\u7684\u8BED\u6CD5\uFF0C\u5C3D\u7BA1\u83B7\u53D6\u4E86\u8FD4\u56DE\u503C\uFF0C\u4F46\u4E0D\u4F1A\u4F7F\u7528\u5B83\u3002\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6839\u672C\u4E0D\u4F1A\u53BB\u83B7\u53D6\u8FD4\u56DE\u503C\u3002\u5728\u4F7F\u7528\u8FD9\u4E9B\u65B9\u6CD5\u4E4B\u524D\uFF0C\u8BF7\u67E5\u770BJDK\u6587\u6863\u4E2D\u8FD9\u4E9B\u65B9\u6CD5\u7684\u5B8C\u6574\u7528\u6CD5\u3002</p><h2 id="set\u884C\u4E3A" tabindex="-1"><a class="header-anchor" href="#set\u884C\u4E3A" aria-hidden="true">#</a> Set\u884C\u4E3A</h2><p><strong>Set</strong> \u7684\u4E3B\u8981\u7528\u5904\u662F\u6D4B\u8BD5\u6210\u5458\u8EAB\u4EFD\uFF0C\u4E0D\u8FC7\u4E5F\u53EF\u4EE5\u5C06\u5176\u7528\u4F5C\u5220\u9664\u91CD\u590D\u5143\u7D20\u7684\u5DE5\u5177\u3002\u5982\u679C\u4E0D\u5173\u5FC3\u5143\u7D20\u987A\u5E8F\u6216\u5E76\u53D1\u6027\uFF0C <strong>HashSet</strong> \u603B\u662F\u6700\u597D\u7684\u9009\u62E9\uFF0C\u56E0\u4E3A\u5B83\u662F\u4E13\u95E8\u4E3A\u4E86\u5FEB\u901F\u67E5\u627E\u800C\u8BBE\u8BA1\u7684\uFF08\u8FD9\u91CC\u4F7F\u7528\u4E86\u5728<a href="">\u9644\u5F55\uFF1A\u7406\u89E3equals\u548ChashCode\u65B9\u6CD5</a>\u7AE0\u8282\u4E2D\u63A2\u8BA8\u7684\u6563\u5217\u51FD\u6570\uFF09\u3002</p><p>\u5176\u5B83\u7684 <strong>Set</strong> \u5B9E\u73B0\u4EA7\u751F\u4E0D\u540C\u7684\u6392\u5E8F\u884C\u4E3A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/SetOrder.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SetOrder</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sets <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;java.util.HashSet&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;java.util.TreeSet&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;java.util.concurrent.ConcurrentSkipListSet&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;java.util.LinkedHashSet&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;java.util.concurrent.CopyOnWriteArraySet&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> RLIST <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HTMLColors</span><span class="token punctuation">.</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>RLIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>
  <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token operator">:</span> sets<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;[-&gt; %s &lt;-]%n&quot;</span><span class="token punctuation">,</span>
        type<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token char">&#39;.&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
      <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      set<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>RLIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
      set<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[-&gt; HashSet &lt;-]
MediumOrchid
PaleGoldenRod
Sienna
LightSlateGray
DarkSeaGreen
Black
Gainsboro
Orange
LightCoral
DodgerBlue
[-&gt; TreeSet &lt;-]
AliceBlue
AntiqueWhite
Aquamarine
Azure
Beige
Bisque
Black
BlanchedAlmond
Blue
BlueViolet
[-&gt; ConcurrentSkipListSet &lt;-]
AliceBlue
AntiqueWhite
Aquamarine
Azure
Beige
Bisque
Black
BlanchedAlmond
Blue
BlueViolet
[-&gt; LinkedHashSet &lt;-]
YellowGreen
Yellow
WhiteSmoke
White
Wheat
Violet
Turquoise
Tomato
Thistle
Teal
[-&gt; CopyOnWriteArraySet &lt;-]
YellowGreen
Yellow
WhiteSmoke
White
Wheat
Violet
Turquoise
Tomato
Thistle
Teal
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u9700\u8981\u4F7F\u7528 <strong>@SuppressWarnings(\u201Cunchecked\u201D)</strong> \uFF0C\u56E0\u4E3A\u8FD9\u91CC\u5C06\u4E00\u4E2A <strong>String</strong> \uFF08\u53EF\u80FD\u662F\u4EFB\u4F55\u4E1C\u897F\uFF09\u4F20\u9012\u7ED9\u4E86 <code>Class.forName(type).newInstance()</code> \u3002\u7F16\u8BD1\u5668\u5E76\u4E0D\u80FD\u4FDD\u8BC1\u8FD9\u662F\u4E00\u6B21\u6210\u529F\u7684\u64CD\u4F5C\u3002</p><p><strong>RLIST</strong> \u662F <strong>HTMLColors.LIST</strong> \u7684\u53CD\u8F6C\u7248\u672C\u3002\u56E0\u4E3A <code>Collections.reverse()</code> \u662F\u901A\u8FC7\u4FEE\u6539\u53C2\u6570\u6765\u6267\u884C\u53CD\u5411\u64CD\u4F5C\uFF0C\u800C\u4E0D\u662F\u8FD4\u56DE\u5305\u542B\u53CD\u5411\u5143\u7D20\u7684\u65B0 <strong>List</strong> \uFF0C\u6240\u4EE5\u8BE5\u8C03\u7528\u5728 <strong>static</strong> \u5757\u5185\u6267\u884C\u3002 <strong>RLIST</strong> \u53EF\u4EE5\u9632\u6B62\u6211\u4EEC\u610F\u5916\u5730\u8BA4\u4E3A <strong>Set</strong> \u5BF9\u5176\u7ED3\u679C\u8FDB\u884C\u4E86\u6392\u5E8F\u3002</p><p><strong>HashSet</strong> \u7684\u8F93\u51FA\u7ED3\u679C\u4F3C\u4E4E\u6CA1\u6709\u53EF\u8FA8\u522B\u7684\u987A\u5E8F\uFF0C\u56E0\u4E3A\u5B83\u662F\u57FA\u4E8E\u6563\u5217\u51FD\u6570\u7684\u3002 <strong>TreeSet</strong> \u548C <strong>ConcurrentSkipListSet</strong> \u90FD\u5BF9\u5B83\u4EEC\u7684\u5143\u7D20\u8FDB\u884C\u4E86\u6392\u5E8F\uFF0C\u5B83\u4EEC\u90FD\u5B9E\u73B0\u4E86 <strong>SortedSet</strong> \u63A5\u53E3\u6765\u6807\u8BC6\u8FD9\u4E2A\u7279\u70B9\u3002\u56E0\u4E3A\u5B9E\u73B0\u8BE5\u63A5\u53E3\u7684 <strong>Set</strong> \u6309\u987A\u5E8F\u6392\u5217\uFF0C\u6240\u4EE5\u8BE5\u63A5\u53E3\u8FD8\u6709\u4E00\u4E9B\u5176\u4ED6\u7684\u53EF\u7528\u64CD\u4F5C\u3002 <strong>LinkedHashSet</strong> \u548C <strong>CopyOnWriteArraySet</strong> \u5C3D\u7BA1\u6CA1\u6709\u7528\u4E8E\u6807\u8BC6\u7684\u63A5\u53E3\uFF0C\u4F46\u5B83\u4EEC\u8FD8\u662F\u4FDD\u7559\u4E86\u5143\u7D20\u7684\u63D2\u5165\u987A\u5E8F\u3002</p><p><strong>ConcurrentSkipListSet</strong> \u548C <strong>CopyOnWriteArraySet</strong> \u662F\u7EBF\u7A0B\u5B89\u5168\u7684\u3002</p><p>\u5728\u9644\u5F55\u7684\u6700\u540E\uFF0C\u6211\u4EEC\u5C06\u4E86\u89E3\u5728\u975E <strong>HashSet</strong> \u5B9E\u73B0\u7684 <strong>Set</strong> \u4E0A\u6DFB\u52A0\u989D\u5916\u6392\u5E8F\u7684\u6027\u80FD\u6210\u672C\uFF0C\u4EE5\u53CA\u4E0D\u540C\u5B9E\u73B0\u4E2D\u7684\u4EFB\u4F55\u5176\u4ED6\u529F\u80FD\u7684\u6210\u672C\u3002</p><h2 id="\u5728map\u4E2D\u4F7F\u7528\u51FD\u6570\u5F0F\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u5728map\u4E2D\u4F7F\u7528\u51FD\u6570\u5F0F\u64CD\u4F5C" aria-hidden="true">#</a> \u5728Map\u4E2D\u4F7F\u7528\u51FD\u6570\u5F0F\u64CD\u4F5C</h2><p>\u4E0E <strong>Collection</strong> \u63A5\u53E3\u4E00\u6837\uFF0C<code>forEach()</code> \u4E5F\u5185\u7F6E\u5728 <strong>Map</strong> \u63A5\u53E3\u4E2D\u3002\u4F46\u662F\u5982\u679C\u60F3\u8981\u6267\u884C\u4EFB\u4F55\u5176\u4ED6\u7684\u57FA\u672C\u529F\u80FD\u64CD\u4F5C\uFF0C\u6BD4\u5982 <code>map()</code> \uFF0C<code>flatMap()</code> \uFF0C<code>reduce()</code> \u6216 <code>filter()</code> \u65F6\uFF0C\u8BE5\u600E\u4E48\u529E\uFF1F \u67E5\u770B <strong>Map</strong> \u63A5\u53E3\u53D1\u73B0\u5E76\u6CA1\u6709\u8FD9\u4E9B\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7 <code>entrySet()</code> \u8FDE\u63A5\u5230\u8FD9\u4E9B\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u4F1A\u751F\u6210\u4E00\u4E2A\u7531 <strong>Map.Entry</strong> \u5BF9\u8C61\u7EC4\u6210\u7684 <strong>Set</strong> \u3002\u8FD9\u4E2A <strong>Set</strong> \u5305\u542B <code>stream()</code> \u548C <code>parallelStream()</code> \u65B9\u6CD5\u3002\u53EA\u9700\u8981\u8BB0\u4F4F\u4E00\u4EF6\u4E8B\uFF0C\u8FD9\u91CC\u6B63\u5728\u4F7F\u7528\u7684\u662F <strong>Map.Entry</strong> \u5BF9\u8C61\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/FunctionalMap.java</span>
<span class="token comment">// Functional operations on a Map</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionalMap</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    MAP<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">::</span><span class="token function">getValue</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> v<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Dark&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> v<span class="token punctuation">.</span><span class="token function">replaceFirst</span><span class="token punctuation">(</span><span class="token string">&quot;Dark&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hot&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
HotBlue
HotCyan
HotGoldenRod
HotGray
HotGreen
HotKhaki
HotMagenta
HotOliveGreen
HotOrange
HotOrchid
HotRed
HotSalmon
HotSeaGreen
HotSlateBlue
HotSlateGray
HotTurquoise
HotViolet
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u751F\u6210 <strong>Stream</strong> \u540E\uFF0C\u6240\u6709\u7684\u57FA\u672C\u529F\u80FD\u65B9\u6CD5\uFF0C\u751A\u81F3\u66F4\u591A\u5C31\u90FD\u53EF\u4EE5\u4F7F\u7528\u4E86\u3002</p><h2 id="\u9009\u62E9map\u7247\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u9009\u62E9map\u7247\u6BB5" aria-hidden="true">#</a> \u9009\u62E9Map\u7247\u6BB5</h2><p>\u7531 <strong>TreeMap</strong> \u548C <strong>ConcurrentSkipListMap</strong> \u5B9E\u73B0\u7684 <strong>NavigableMap</strong> \u63A5\u53E3\u89E3\u51B3\u4E86\u9700\u8981\u9009\u62E9Map\u7247\u6BB5\u7684\u95EE\u9898\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u793A\u4F8B\uFF0C\u4F7F\u7528\u4E86 <strong>HTMLColors</strong> \uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/NavMap.java</span>
<span class="token comment">// NavigableMap produces pieces of a Map</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NavMap</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span>
  <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> COLORS <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">ConcurrentSkipListMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>MAP<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">firstEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">lastEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">NavigableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> toLime <span class="token operator">=</span>
      COLORS<span class="token punctuation">.</span><span class="token function">headMap</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;Lime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>toLime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">ceilingEntry</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;DeepSkyBlue&quot;</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">floorEntry</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;DeepSkyBlue&quot;</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>toLime<span class="token punctuation">.</span><span class="token function">descendingMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">tailMap</span><span class="token punctuation">(</span><span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;MistyRose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>COLORS<span class="token punctuation">.</span><span class="token function">subMap</span><span class="token punctuation">(</span>
      <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;Orchid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token string">&quot;DarkSalmon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
0x000000: Black
******************************
0xFFFFFF: White
******************************
0x000000: Black
0x000080: Navy
0x00008B: DarkBlue
0x0000CD: MediumBlue
0x0000FF: Blue
0x006400: DarkGreen
0x008000: Green
0x008080: Teal
0x008B8B: DarkCyan
0x00BFFF: DeepSkyBlue
0x00CED1: DarkTurquoise
0x00FA9A: MediumSpringGreen
0x00FF00: Lime
******************************
0x00BFFF: DeepSkyBlue
******************************
0x008B8B: DarkCyan
******************************
0x00FF00: Lime
0x00FA9A: MediumSpringGreen
0x00CED1: DarkTurquoise
0x00BFFF: DeepSkyBlue
0x008B8B: DarkCyan
0x008080: Teal
0x008000: Green
0x006400: DarkGreen
0x0000FF: Blue
0x0000CD: MediumBlue
0x00008B: DarkBlue
0x000080: Navy
0x000000: Black
******************************
0xFFE4E1: MistyRose
0xFFEBCD: BlanchedAlmond
0xFFEFD5: PapayaWhip
0xFFF0F5: LavenderBlush
0xFFF5EE: SeaShell
0xFFF8DC: Cornsilk
0xFFFACD: LemonChiffon
0xFFFAF0: FloralWhite
0xFFFAFA: Snow
0xFFFF00: Yellow
0xFFFFE0: LightYellow
0xFFFFF0: Ivory
0xFFFFFF: White
******************************
0xDA70D6: Orchid
0xDAA520: GoldenRod
0xDB7093: PaleVioletRed
0xDC143C: Crimson
0xDCDCDC: Gainsboro
0xDDA0DD: Plum
0xDEB887: BurlyWood
0xE0FFFF: LightCyan
0xE6E6FA: Lavender
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E3B\u65B9\u6CD5\u4E2D\u53EF\u4EE5\u770B\u5230 <strong>NavigableMap</strong> \u7684\u5404\u79CD\u529F\u80FD\u3002 \u56E0\u4E3A <strong>NavigableMap</strong> \u5177\u6709\u952E\u987A\u5E8F\uFF0C\u6240\u4EE5\u5B83\u4F7F\u7528\u4E86 <code>firstEntry()</code> \u548C <code>lastEntry()</code> \u7684\u6982\u5FF5\u3002\u8C03\u7528 <code>headMap()</code> \u4F1A\u751F\u6210\u4E00\u4E2A <strong>NavigableMap</strong> \uFF0C\u5176\u4E2D\u5305\u542B\u4E86\u4ECE <strong>Map</strong> \u7684\u5F00\u5934\u5230 <code>headMap()</code> \u53C2\u6570\u4E2D\u6240\u6307\u5411\u7684\u4E00\u7EC4\u5143\u7D20\uFF0C\u5176\u4E2D <strong>boolean</strong> \u503C\u6307\u793A\u7ED3\u679C\u4E2D\u662F\u5426\u5305\u542B\u8BE5\u53C2\u6570\u3002\u8C03\u7528 <code>tailMap()</code> \u6267\u884C\u4E86\u7C7B\u4F3C\u7684\u64CD\u4F5C\uFF0C\u53EA\u4E0D\u8FC7\u662F\u4ECE\u53C2\u6570\u5F00\u59CB\u5230 <strong>Map</strong> \u7684\u672B\u5C3E\u3002 <code>subMap()</code> \u5219\u5141\u8BB8\u751F\u6210 <strong>Map</strong> \u4E2D\u95F4\u7684\u4E00\u90E8\u5206\u3002</p><p><code>ceilingEntry()</code> \u4ECE\u5F53\u524D\u952E\u503C\u5BF9\u5411\u4E0A\u641C\u7D22\u4E0B\u4E00\u4E2A\u952E\u503C\u5BF9\uFF0C<code>floorEntry()</code> \u5219\u662F\u5411\u4E0B\u641C\u7D22\u3002 <code>descendingMap()</code> \u53CD\u8F6C\u4E86 <strong>NavigableMap</strong> \u7684\u987A\u5E8F\u3002</p><p>\u5982\u679C\u9700\u8981\u901A\u8FC7\u5206\u5272 <strong>Map</strong> \u6765\u7B80\u5316\u6240\u6B63\u5728\u89E3\u51B3\u7684\u95EE\u9898\uFF0C\u5219 <strong>NavigableMap</strong> \u53EF\u4EE5\u505A\u5230\u3002\u5177\u6709\u7C7B\u4F3C\u7684\u529F\u80FD\u7684\u5176\u5B83\u96C6\u5408\u5B9E\u73B0\u4E5F\u53EF\u4EE5\u7528\u6765\u5E2E\u52A9\u89E3\u51B3\u95EE\u9898\u3002</p><h2 id="\u586B\u5145\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u586B\u5145\u96C6\u5408" aria-hidden="true">#</a> \u586B\u5145\u96C6\u5408</h2><p>\u4E0E <strong>Arrays</strong> \u4E00\u6837\uFF0C\u8FD9\u91CC\u6709\u4E00\u4E2A\u540D\u4E3A <strong>Collections</strong> \u7684\u4F34\u968F\u7C7B\uFF08companion class\uFF09\uFF0C\u5305\u542B\u4E86\u4E00\u4E9B <strong>static</strong> \u7684\u5B9E\u7528\u65B9\u6CD5\uFF0C\u5176\u4E2D\u5305\u62EC\u4E00\u4E2A\u540D\u4E3A <code>fill()</code> \u7684\u65B9\u6CD5\u3002 <code>fill()</code> \u53EA\u590D\u5236\u6574\u4E2A\u96C6\u5408\u4E2D\u7684\u5355\u4E2A\u5BF9\u8C61\u5F15\u7528\u3002\u6B64\u5916\uFF0C\u5B83\u4EC5\u9002\u7528\u4E8E <strong>List</strong> \u5BF9\u8C61\uFF0C\u4F46\u7ED3\u679C\u5217\u8868\u53EF\u4EE5\u4F20\u9012\u7ED9\u6784\u9020\u65B9\u6CD5\u6216 <code>addAll()</code> \u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/FillingLists.java</span>
<span class="token comment">// Collections.fill() &amp; Collections.nCopies()</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">StringAddress</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> s<span class="token punctuation">;</span>
  <span class="token class-name">StringAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FillingLists</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StringAddress</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">nCopies</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">StringAddress</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">StringAddress</span><span class="token punctuation">(</span><span class="token string">&quot;World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[StringAddress@15db9742 Hello, StringAddress@15db9742
Hello, StringAddress@15db9742 Hello,
StringAddress@15db9742 Hello]
[StringAddress@6d06d69c World!, StringAddress@6d06d69c
World!, StringAddress@6d06d69c World!,
StringAddress@6d06d69c World!]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u793A\u4F8B\u5C55\u793A\u4E86\u4E24\u79CD\u4F7F\u7528\u5BF9\u5355\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u6765\u586B\u5145 <strong>Collection</strong> \u7684\u65B9\u6CD5\u3002 \u7B2C\u4E00\u4E2A\uFF1A <code>Collections.nCopies()</code> \uFF0C\u521B\u5EFA\u4E00\u4E2A <strong>List</strong>\uFF0C\u5E76\u4F20\u9012\u7ED9 <strong>ArrayList</strong> \u7684\u6784\u9020\u65B9\u6CD5\uFF0C\u8FDB\u800C\u586B\u5145\u4E86 <strong>ArrayList</strong> \u3002</p><p><strong>StringAddress</strong> \u4E2D\u7684 <code>toString()</code> \u65B9\u6CD5\u8C03\u7528\u4E86 <code>Object.toString()</code> \uFF0C\u5B83\u5148\u751F\u6210\u7C7B\u540D\uFF0C\u540E\u8DDF\u7740\u5BF9\u8C61\u7684\u54C8\u5E0C\u7801\u7684\u65E0\u7B26\u53F7\u5341\u516D\u8FDB\u5236\u8868\u793A\uFF08\u54C8\u5E0C\u5417\u7531 <code>hashCode()</code> \u65B9\u6CD5\u751F\u6210\uFF09\u3002 \u8F93\u51FA\u663E\u793A\u6240\u6709\u7684\u5F15\u7528\u90FD\u6307\u5411\u540C\u4E00\u4E2A\u5BF9\u8C61\u3002\u8C03\u7528\u7B2C\u4E8C\u4E2A\u65B9\u6CD5 <code>Collections.fill()</code> \u540E\u4E5F\u662F\u5982\u6B64\u3002 <code>fill()</code> \u65B9\u6CD5\u7684\u7528\u5904\u975E\u5E38\u6709\u9650\uFF0C\u5B83\u53EA\u80FD\u66FF\u6362 <strong>List</strong> \u4E2D\u5DF2\u6709\u7684\u5143\u7D20,\u800C\u4E14\u4E0D\u4F1A\u6DFB\u52A0\u65B0\u5143\u7D20\uFF0C</p><h3 id="\u4F7F\u7528-suppliers-\u586B\u5145\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-suppliers-\u586B\u5145\u96C6\u5408" aria-hidden="true">#</a> \u4F7F\u7528 Suppliers \u586B\u5145\u96C6\u5408</h3><p><a href="">\u7B2C\u4E8C\u5341\u7AE0 \u6CDB\u578B</a>\u7AE0\u8282\u4E2D\u4ECB\u7ECD\u7684 <strong>onjava.Suppliers</strong> \u7C7B\u4E3A\u586B\u5145\u96C6\u5408\u63D0\u4F9B\u4E86\u901A\u7528\u89E3\u51B3\u65B9\u6848\u3002 \u8FD9\u662F\u4E00\u4E2A\u4F7F\u7528 <strong>Suppliers</strong> \u521D\u59CB\u5316\u51E0\u79CD\u4E0D\u540C\u7C7B\u578B\u7684 <strong>Collection</strong> \u7684\u793A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/SuppliersCollectionTest.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Government</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> foundation <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;strange women lying in ponds &quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;distributing swords is no basis &quot;</span> <span class="token operator">+</span>
    <span class="token string">&quot;for a system of government&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> index<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> foundation<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuppliersCollectionTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Suppliers class from the Generics chapter:</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token class-name">Suppliers</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
      <span class="token class-name">LinkedHashSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Government</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Suppliers</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
      <span class="token class-name">LinkedList</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Government</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Suppliers</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Government</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Or we can use Streams:</span>
    set <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">Government</span><span class="token punctuation">.</span>foundation<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">Government</span><span class="token punctuation">.</span>foundation<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">Government</span><span class="token punctuation">.</span>foundation<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">LinkedList</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    set <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token class-name">Government</span><span class="token punctuation">.</span>foundation<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">LinkedHashSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
[ponds, no, a, in, swords, for, is, basis, strange,
system, government, distributing, of, women, lying]
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
[strange, women, lying, in, ponds, distributing,
swords, is, no, basis, for, a, system, of, government]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>LinkedHashSet</strong> \u4E2D\u7684\u7684\u5143\u7D20\u6309\u63D2\u5165\u987A\u5E8F\u6392\u5217\uFF0C\u56E0\u4E3A\u5B83\u7EF4\u62A4\u4E00\u4E2A\u94FE\u8868\u6765\u4FDD\u5B58\u8BE5\u987A\u5E8F\u3002</p><p>\u4F46\u662F\u8BF7\u6CE8\u610F\u793A\u4F8B\u7684\u7B2C\u4E8C\u90E8\u5206\uFF1A\u5927\u591A\u6570\u60C5\u51B5\u4E0B\u90FD\u53EF\u4EE5\u4F7F\u7528 <strong>Stream</strong> \u6765\u521B\u5EFA\u548C\u586B\u5145 <strong>Collection</strong> \u3002\u5728\u672C\u4F8B\u4E2D\u7684 <strong>Stream</strong> \u7248\u672C\u4E0D\u9700\u8981\u58F0\u660E <strong>Supplier</strong> \u6240\u60F3\u8981\u521B\u5EFA\u7684\u5143\u7D20\u6570\u91CF;\uFF0C\u5B83\u76F4\u63A5\u5438\u6536\u4E86 <strong>Stream</strong> \u4E2D\u7684\u6240\u6709\u5143\u7D20\u3002</p><p>\u5C3D\u53EF\u80FD\u4F18\u5148\u9009\u62E9 <strong>Stream</strong> \u6765\u89E3\u51B3\u95EE\u9898\u3002</p><h3 id="map-suppliers" tabindex="-1"><a class="header-anchor" href="#map-suppliers" aria-hidden="true">#</a> Map Suppliers</h3><p>\u4F7F\u7528 <strong>Supplier</strong> \u6765\u586B\u5145 <strong>Map</strong> \u65F6\u9700\u8981\u4E00\u4E2A <strong>Pair</strong> \u7C7B\uFF0C\u56E0\u4E3A\u6BCF\u6B21\u8C03\u7528\u4E00\u4E2A <strong>Supplier</strong> \u7684 <code>get()</code> \u65B9\u6CD5\u65F6\uFF0C\u90FD\u5FC5\u987B\u751F\u6210\u4E00\u5BF9\u5BF9\u8C61\uFF08\u4E00\u4E2A\u952E\u548C\u4E00\u4E2A\u503C\uFF09\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/Pair.java</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">V</span> value<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token class-name">K</span> k<span class="token punctuation">,</span> <span class="token class-name">V</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> k<span class="token punctuation">;</span>
    value <span class="token operator">=</span> v<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">K</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name">K</span> k<span class="token punctuation">,</span> <span class="token class-name">V</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Pair</strong> \u662F\u4E00\u4E2A\u53EA\u8BFB\u7684 <em>\u6570\u636E\u4F20\u8F93\u5BF9\u8C61</em> \uFF08Data Transfer Object\uFF09\u6216 <em>\u4FE1\u4F7F</em> \uFF08Messenger\uFF09\u3002 \u8FD9\u4E0E<a href="">\u7B2C\u4E8C\u5341\u7AE0 \u6CDB\u578B</a>\u7AE0\u8282\u4E2D\u7684 <strong>Tuple2</strong> \u57FA\u672C\u76F8\u540C\uFF0C\u4F46\u540D\u5B57\u66F4\u9002\u5408 <strong>Map</strong> \u521D\u59CB\u5316\u3002\u6211\u8FD8\u6DFB\u52A0\u4E86\u9759\u6001\u7684 <code>make()</code> \u65B9\u6CD5\uFF0C\u4EE5\u4FBF\u4E3A\u521B\u5EFA <strong>Pair</strong> \u5BF9\u8C61\u63D0\u4F9B\u4E00\u4E2A\u66F4\u7B80\u6D01\u7684\u540D\u5B57\u3002</p><p>Java 8 \u7684 <strong>Stream</strong> \u63D0\u4F9B\u4E86\u586B\u5145 <strong>Map</strong> \u7684\u4FBF\u6377\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/StreamFillMaps.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Letters</span>
<span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pair</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">char</span> letter <span class="token operator">=</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>number<span class="token operator">++</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> letter<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamFillMaps</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span>
      <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Letters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Two separate Suppliers:</span>
    <span class="token class-name">Rand<span class="token punctuation">.</span>String</span> rs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rand<span class="token punctuation">.</span>String</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Count<span class="token punctuation">.</span>Character</span> cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Count<span class="token punctuation">.</span>Character</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mcs <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Pair</span><span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mcs<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// A key Supplier and a single value:</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mcs2 <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Pair</span><span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>cc<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Val&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mcs2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{1=A, 2=B, 3=C, 4=D, 5=E, 6=F, 7=G, 8=H, 9=I, 10=J,
11=K}
{b=btp, c=enp, d=ccu, e=xsz, f=gvg, g=mei, h=nne,
i=elo}
{p=Val, q=Val, j=Val, k=Val, l=Val, m=Val, n=Val,
o=Val}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u793A\u4F8B\u4E2D\u51FA\u73B0\u4E86\u4E00\u4E2A\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u521B\u5EFA\u4E00\u4E2A\u81EA\u52A8\u521B\u5EFA\u548C\u586B\u5145 <strong>Map</strong> \u7684\u5DE5\u5177\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/FillMap.java</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FillMap</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
  <span class="token function">basic</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Pair</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> pairGen<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>pairGen<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
  <span class="token function">basic</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> keyGen<span class="token punctuation">,</span>
        <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> valueGen<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Pair</span><span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>keyGen<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> valueGen<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token class-name">M</span> <span class="token keyword">extends</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
  <span class="token class-name">M</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> keyGen<span class="token punctuation">,</span>
           <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> valueGen<span class="token punctuation">,</span>
           <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">M</span><span class="token punctuation">&gt;</span></span> mapSupplier<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
      <span class="token class-name">Pair</span><span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>keyGen<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> valueGen<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
          <span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">key</span><span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token operator">::</span><span class="token function">value</span><span class="token punctuation">,</span>
                 <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> k<span class="token punctuation">,</span> mapSupplier<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>basic() \u65B9\u6CD5\u751F\u6210\u4E00\u4E2A\u9ED8\u8BA4\u7684 <strong>Map</strong> \uFF0C\u800C <code>create()</code> \u65B9\u6CD5\u5141\u8BB8\u6307\u5B9A\u4E00\u4E2A\u786E\u5207\u7684 <strong>Map</strong> \u7C7B\u578B\uFF0C\u5E76\u8FD4\u56DE\u90A3\u4E2A\u786E\u5207\u7684\u7C7B\u578B\u3002</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u6D4B\u8BD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/FillMapTest.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FillMapTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> mcs <span class="token operator">=</span> <span class="token class-name">FillMap</span><span class="token punctuation">.</span><span class="token function">basic</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">Rand<span class="token punctuation">.</span>String</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Count<span class="token punctuation">.</span>Integer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mcs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hashm <span class="token operator">=</span>
      <span class="token class-name">FillMap</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Rand<span class="token punctuation">.</span>String</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Count<span class="token punctuation">.</span>Integer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">HashMap</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hashm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> linkm <span class="token operator">=</span>
      <span class="token class-name">FillMap</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Rand<span class="token punctuation">.</span>String</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Count<span class="token punctuation">.</span>Integer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">LinkedHashMap</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linkm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{npcc=1, ztdv=6, gvgm=3, btpe=0, einn=4, eelo=5,
uxsz=2}
{npcc=1, ztdv=6, gvgm=3, btpe=0, einn=4, eelo=5,
uxsz=2}
{btpe=0, npcc=1, uxsz=2, gvgm=3, einn=4, eelo=5,
ztdv=6}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F7F\u7528\u4EAB\u5143-flyweight-\u81EA\u5B9A\u4E49collection\u548Cmap" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u4EAB\u5143-flyweight-\u81EA\u5B9A\u4E49collection\u548Cmap" aria-hidden="true">#</a> \u4F7F\u7528\u4EAB\u5143\uFF08Flyweight\uFF09\u81EA\u5B9A\u4E49Collection\u548CMap</h2><p>\u672C\u8282\u4ECB\u7ECD\u5982\u4F55\u521B\u5EFA\u81EA\u5B9A\u4E49 <strong>Collection</strong> \u548C <strong>Map</strong> \u5B9E\u73B0\u3002\u6BCF\u4E2A <strong>java.util</strong> \u4E2D\u7684\u96C6\u5408\u90FD\u6709\u81EA\u5DF1\u7684 <strong>Abstract</strong> \u7C7B\uFF0C\u5B83\u63D0\u4F9B\u4E86\u8BE5\u96C6\u5408\u7684\u90E8\u5206\u5B9E\u73B0\uFF0C\u56E0\u6B64\u53EA\u9700\u8981\u5B9E\u73B0\u5FC5\u8981\u7684\u65B9\u6CD5\u6765\u751F\u6210\u6240\u9700\u7684\u96C6\u5408\u3002\u4F60\u5C06\u770B\u5230\u901A\u8FC7\u7EE7\u627F <strong>java.util.Abstract</strong> \u7C7B\u6765\u521B\u5EFA\u81EA\u5B9A\u4E49 <strong>Map</strong> \u548C <strong>Collection</strong> \u662F\u591A\u4E48\u7B80\u5355\u3002\u4F8B\u5982\uFF0C\u8981\u521B\u5EFA\u4E00\u4E2A\u53EA\u8BFB\u7684 <strong>Set</strong> \uFF0C\u5219\u53EF\u4EE5\u4ECE <strong>AbstractSet</strong> \u7EE7\u627F\u5E76\u5B9E\u73B0 <code>iterator()</code> \u548C <code>size()</code> \u3002\u6700\u540E\u4E00\u4E2A\u793A\u4F8B\u662F\u751F\u6210\u6D4B\u8BD5\u6570\u636E\u7684\u53E6\u4E00\u79CD\u65B9\u6CD5\u3002\u751F\u6210\u7684\u96C6\u5408\u901A\u5E38\u662F\u53EA\u8BFB\u7684\uFF0C\u5E76\u4E14\u6240\u63D0\u4F9B\u7684\u65B9\u6CD5\u6700\u5C11\u3002</p><p>\u8BE5\u89E3\u51B3\u65B9\u6848\u8FD8\u6F14\u793A\u4E86 <em>\u4EAB\u5143</em> \uFF08Flyweight\uFF09\u8BBE\u8BA1\u6A21\u5F0F\u3002\u5F53\u666E\u901A\u89E3\u51B3\u65B9\u6848\u9700\u8981\u592A\u591A\u5BF9\u8C61\u65F6\uFF0C\u6216\u8005\u5F53\u751F\u6210\u666E\u901A\u5BF9\u8C61\u5360\u7528\u592A\u591A\u7A7A\u95F4\u65F6\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EAB\u5143\u3002\u4EAB\u5143\u8BBE\u8BA1\u6A21\u5F0F\u5C06\u5BF9\u8C61\u7684\u4E00\u90E8\u5206\u5916\u90E8\u5316\uFF08externalizes\uFF09\u3002\u76F8\u6BD4\u4E8E\u628A\u5BF9\u8C61\u7684\u6240\u6709\u5185\u5BB9\u90FD\u5305\u542B\u5728\u5BF9\u8C61\u4E2D\uFF0C\u8FD9\u6837\u505A\u4F7F\u5F97\u5BF9\u8C61\u7684\u90E8\u5206\u6216\u8005\u5168\u90E8\u53EF\u4EE5\u5728\u66F4\u6709\u6548\u7684\u5916\u90E8\u8868\u4E2D\u67E5\u627E\uFF0C\u6216\u901A\u8FC7\u4E00\u4E9B\u8282\u7701\u7A7A\u95F4\u7684\u5176\u4ED6\u8BA1\u7B97\u751F\u6210\u3002</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u53EF\u4EE5\u662F\u4EFB\u4F55\u5927\u5C0F\u7684 <strong>List</strong> \uFF0C\u5E76\u4E14\uFF08\u6709\u6548\u5730\uFF09\u4F7F\u7528 <strong>Integer</strong> \u6570\u636E\u8FDB\u884C\u9884\u521D\u59CB\u5316\u3002\u8981\u4ECE <strong>AbstractList</strong> \u521B\u5EFA\u53EA\u8BFB <strong>List</strong> \uFF0C\u5FC5\u987B\u5B9E\u73B0 <code>get()</code> \u548C <code>size()</code>\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/CountingIntegerList.java</span>
<span class="token comment">// List of any length, containing sample data</span>
<span class="token comment">// {java onjava.CountingIntegerList}</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountingIntegerList</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">CountingIntegerList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">CountingIntegerList</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> size<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> size<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> cil <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">CountingIntegerList</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cil<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cil<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,
16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29]
500
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EA\u6709\u5F53\u60F3\u8981\u9650\u5236 <strong>List</strong> \u7684\u957F\u5EA6\u65F6\uFF0C <strong>size</strong> \u503C\u624D\u662F\u91CD\u8981\u7684\uFF0C\u5C31\u50CF\u5728\u4E3B\u65B9\u6CD5\u4E2D\u90A3\u6837\u3002\u5373\u4F7F\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C <code>get()</code> \u4E5F\u4F1A\u4EA7\u751F\u4EFB\u4F55\u503C\u3002</p><p>\u8FD9\u4E2A\u7C7B\u662F\u4EAB\u5143\u6A21\u5F0F\u7684\u4E00\u4E2A\u7B80\u6D01\u7684\u4F8B\u5B50\u3002\u5F53\u9700\u8981\u7684\u65F6\u5019\uFF0C <code>get()</code> \u201C\u8BA1\u7B97\u201D\u6240\u9700\u7684\u503C\uFF0C\u56E0\u6B64\u6CA1\u5FC5\u8981\u5B58\u50A8\u548C\u521D\u59CB\u5316\u5B9E\u9645\u7684\u5E95\u5C42 <strong>List</strong> \u7ED3\u6784\u3002</p><p>\u5728\u5927\u591A\u6570\u7A0B\u5E8F\u4E2D\uFF0C\u8FD9\u91CC\u6240\u4FDD\u5B58\u7684\u5B58\u50A8\u7ED3\u6784\u6C38\u8FDC\u90FD\u4E0D\u4F1A\u6539\u53D8\u3002\u4F46\u662F\uFF0C\u5B83\u5141\u8BB8\u7528\u975E\u5E38\u5927\u7684 <strong>index</strong> \u6765\u8C03\u7528 <code>List.get()</code> \uFF0C\u800C <strong>List</strong> \u5E76\u4E0D\u9700\u8981\u586B\u5145\u5230\u8FD9\u4E48\u5927\u3002\u6B64\u5916\uFF0C\u8FD8\u53EF\u4EE5\u5728\u7A0B\u5E8F\u4E2D\u5927\u91CF\u4F7F\u7528 <strong>CountingIntegerLists</strong> \u800C\u65E0\u9700\u62C5\u5FC3\u5B58\u50A8\u95EE\u9898\u3002\u5B9E\u9645\u4E0A\uFF0C\u4EAB\u5143\u7684\u4E00\u4E2A\u597D\u5904\u662F\u5B83\u5141\u8BB8\u4F7F\u7528\u66F4\u597D\u7684\u62BD\u8C61\u800C\u4E0D\u7528\u62C5\u5FC3\u8D44\u6E90\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528\u4EAB\u5143\u8BBE\u8BA1\u6A21\u5F0F\u6765\u5B9E\u73B0\u5177\u6709\u4EFB\u4F55\u5927\u5C0F\u6570\u636E\u96C6\u7684\u5176\u4ED6\u201C\u521D\u59CB\u5316\u201D\u81EA\u5B9A\u4E49\u96C6\u5408\u3002\u4E0B\u9762\u662F\u4E00\u4E2A <strong>Map</strong> \uFF0C\u5B83\u4E3A\u6BCF\u4E00\u4E2A <strong>Integer</strong> \u952E\u4EA7\u751F\u552F\u4E00\u7684\u503C\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/CountMap.java</span>
<span class="token comment">// Unlimited-length Map containing sample data</span>
<span class="token comment">// {java onjava.CountMap}</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountMap</span>
<span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span>
    <span class="token string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
      chars<span class="token punctuation">[</span>key <span class="token operator">%</span> chars<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">+</span>
      <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>key <span class="token operator">/</span> chars<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> size<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span>
  <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> index<span class="token punctuation">;</span>
    <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> index<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> o <span class="token keyword">instanceof</span> <span class="token class-name">Entry</span> <span class="token operator">&amp;&amp;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token punctuation">)</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> index<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">value</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// LinkedHashSet retains initialization order:</span>
    <span class="token keyword">return</span> <span class="token class-name">IntStream</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span>
        <span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">LinkedHashSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token class-name">CountMap</span> cm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cm<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ints</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">mapToObj</span><span class="token punctuation">(</span>cm<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0,
9=J0, 10=K0, 11=L0, 12=M0, 13=N0, 14=O0, 15=P0, 16=Q0,
17=R0, 18=S0, 19=T0, 20=U0, 21=V0, 22=W0, 23=X0, 24=Y0,
25=Z0, 26=A1, 27=B1, 28=C1, 29=D1, 30=E1, 31=F1, 32=G1,
33=H1, 34=I1, 35=J1, 36=K1, 37=L1, 38=M1, 39=N1, 40=O1,
41=P1, 42=Q1, 43=R1, 44=S1, 45=T1, 46=U1, 47=V1, 48=W1,
49=X1, 50=Y1, 51=Z1, 52=A2, 53=B2, 54=C2, 55=D2, 56=E2,
57=F2, 58=G2, 59=H2}
G19
A0
B0
C0
D0
E0
F0

Y9
J21
R26
D33
Z36
N16
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8981\u521B\u5EFA\u4E00\u4E2A\u53EA\u8BFB\u7684 <strong>Map</strong> \uFF0C\u5219\u4ECE <strong>AbstractMap</strong> \u7EE7\u627F\u5E76\u5B9E\u73B0 <code>entrySet()</code> \u3002\u79C1\u6709\u7684 <code>value()</code> \u65B9\u6CD5\u8BA1\u7B97\u4EFB\u4F55\u952E\u7684\u503C\uFF0C\u5E76\u5728 <code>get()</code> \u548C <code>Entry.getValue()</code> \u4E2D\u4F7F\u7528\u3002\u53EF\u4EE5\u5FFD\u7565 <strong>CountMap</strong> \u7684\u5927\u5C0F\u3002</p><p>\u8FD9\u91CC\u662F\u4F7F\u7528\u4E86 <strong>LinkedHashSet</strong> \u800C\u4E0D\u662F\u521B\u5EFA\u81EA\u5B9A\u4E49 <strong>Set</strong> \u7C7B\uFF0C\u56E0\u6B64\u5E76\u672A\u5B8C\u5168\u5B9E\u73B0\u4EAB\u5143\u3002\u53EA\u6709\u5728\u8C03\u7528 <code>entrySet()</code> \u65F6\u624D\u4F1A\u751F\u6210\u6B64\u5BF9\u8C61\u3002</p><p>\u73B0\u5728\u521B\u5EFA\u4E00\u4E2A\u66F4\u590D\u6742\u7684\u4EAB\u5143\u3002\u8FD9\u4E2A\u793A\u4F8B\u4E2D\u7684\u6570\u636E\u96C6\u662F\u4E16\u754C\u5404\u56FD\u53CA\u5176\u9996\u90FD\u7684 <strong>Map</strong> \u3002 <code>capitals()</code> \u65B9\u6CD5\u751F\u6210\u4E00\u4E2A\u56FD\u5BB6\u548C\u9996\u90FD\u7684 <strong>Map</strong> \u3002 <code>names()</code> \u65B9\u6CD5\u751F\u6210\u4E00\u4E2A\u7531\u56FD\u5BB6\u540D\u5B57\u7EC4\u6210\u7684 <strong>List</strong> \u3002 \u5F53\u7ED9\u5B9A\u4E86\u8868\u793A\u6240\u9700\u5927\u5C0F\u7684 <strong>int</strong> \u53C2\u6570\u65F6\uFF0C\u4E24\u79CD\u65B9\u6CD5\u90FD\u751F\u6210\u5BF9\u5E94\u5927\u5C0F\u7684\u5217\u8868\u7247\u6BB5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// onjava/Countries.java</span>
<span class="token comment">// &quot;Flyweight&quot; Maps and Lists of sample data</span>
<span class="token comment">// {java onjava.Countries}</span>
<span class="token keyword">package</span> <span class="token namespace">onjava</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Countries</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> DATA <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// Africa</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ALGERIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Algiers&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ANGOLA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Luanda&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BENIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Porto-Novo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BOTSWANA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Gaberone&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BURKINA FASO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ouagadougou&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BURUNDI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bujumbura&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CAMEROON&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Yaounde&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CAPE VERDE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Praia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CENTRAL AFRICAN REPUBLIC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bangui&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CHAD&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;N&#39;djamena&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;COMOROS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Moroni&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CONGO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Brazzaville&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;DJIBOUTI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dijibouti&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;EGYPT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Cairo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;EQUATORIAL GUINEA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Malabo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ERITREA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Asmara&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ETHIOPIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Addis Ababa&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GABON&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Libreville&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;THE GAMBIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Banjul&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GHANA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Accra&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GUINEA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Conakry&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BISSAU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bissau&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;COTE D&#39;IVOIR (IVORY COAST)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Yamoussoukro&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;KENYA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nairobi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LESOTHO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Maseru&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LIBERIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Monrovia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LIBYA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tripoli&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MADAGASCAR&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Antananarivo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MALAWI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Lilongwe&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MALI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bamako&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MAURITANIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nouakchott&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MAURITIUS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Port Louis&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MOROCCO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Rabat&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MOZAMBIQUE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Maputo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NAMIBIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Windhoek&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NIGER&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Niamey&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NIGERIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Abuja&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;RWANDA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kigali&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SAO TOME E PRINCIPE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sao Tome&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SENEGAL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dakar&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SEYCHELLES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Victoria&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SIERRA LEONE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Freetown&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SOMALIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mogadishu&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SOUTH AFRICA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Pretoria/Cape Town&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SUDAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Khartoum&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SWAZILAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mbabane&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TANZANIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dodoma&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TOGO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Lome&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TUNISIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tunis&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UGANDA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kampala&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;DEMOCRATIC REPUBLIC OF THE CONGO (ZAIRE)&quot;</span><span class="token punctuation">,</span>
     <span class="token string">&quot;Kinshasa&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ZAMBIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Lusaka&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ZIMBABWE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Harare&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Asia</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AFGHANISTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kabul&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BAHRAIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Manama&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BANGLADESH&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dhaka&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BHUTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Thimphu&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BRUNEI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bandar Seri Begawan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CAMBODIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Phnom Penh&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CHINA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Beijing&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CYPRUS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nicosia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;INDIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;New Delhi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;INDONESIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jakarta&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;IRAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tehran&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;IRAQ&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Baghdad&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ISRAEL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jerusalem&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;JAPAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tokyo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;JORDAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Amman&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;KUWAIT&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kuwait City&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LAOS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Vientiane&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LEBANON&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Beirut&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MALAYSIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kuala Lumpur&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;THE MALDIVES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Male&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MONGOLIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ulan Bator&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MYANMAR (BURMA)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Rangoon&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NEPAL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Katmandu&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NORTH KOREA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;P&#39;yongyang&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;OMAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Muscat&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PAKISTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Islamabad&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PHILIPPINES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Manila&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;QATAR&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Doha&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SAUDI ARABIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Riyadh&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SINGAPORE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Singapore&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SOUTH KOREA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Seoul&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SRI LANKA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Colombo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SYRIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Damascus&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TAIWAN (REPUBLIC OF CHINA)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Taipei&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;THAILAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bangkok&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TURKEY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ankara&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UNITED ARAB EMIRATES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Abu Dhabi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;VIETNAM&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Hanoi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;YEMEN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sana&#39;a&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Australia and Oceania</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AUSTRALIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Canberra&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;FIJI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Suva&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;KIRIBATI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bairiki&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MARSHALL ISLANDS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dalap-Uliga-Darrit&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MICRONESIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Palikir&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NAURU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Yaren&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NEW ZEALAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Wellington&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PALAU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Koror&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PAPUA NEW GUINEA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Port Moresby&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SOLOMON ISLANDS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Honaira&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TONGA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nuku&#39;alofa&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TUVALU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Fongafale&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;VANUATU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Port Vila&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;WESTERN SAMOA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Apia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Eastern Europe and former USSR</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ARMENIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Yerevan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AZERBAIJAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Baku&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BELARUS (BYELORUSSIA)&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Minsk&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BULGARIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sofia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GEORGIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tbilisi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;KAZAKSTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Almaty&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;KYRGYZSTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Alma-Ata&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MOLDOVA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Chisinau&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;RUSSIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Moscow&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TAJIKISTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dushanbe&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TURKMENISTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ashkabad&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UKRAINE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kyiv&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UZBEKISTAN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tashkent&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Europe</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ALBANIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tirana&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ANDORRA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Andorra la Vella&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;AUSTRIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Vienna&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BELGIUM&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Brussels&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BOSNIA-HERZEGOVINA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sarajevo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CROATIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Zagreb&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CZECH REPUBLIC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Prague&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;DENMARK&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Copenhagen&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ESTONIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tallinn&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;FINLAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Helsinki&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;FRANCE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Paris&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GERMANY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Berlin&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GREECE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Athens&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;HUNGARY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Budapest&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ICELAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Reykjavik&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;IRELAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Dublin&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ITALY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Rome&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LATVIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Riga&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LIECHTENSTEIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Vaduz&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LITHUANIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Vilnius&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;LUXEMBOURG&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Luxembourg&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MACEDONIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Skopje&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MALTA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Valletta&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MONACO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Monaco&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MONTENEGRO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Podgorica&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;THE NETHERLANDS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Amsterdam&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NORWAY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Oslo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;POLAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Warsaw&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PORTUGAL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Lisbon&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ROMANIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bucharest&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SAN MARINO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;San Marino&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SERBIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Belgrade&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SLOVAKIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bratislava&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SLOVENIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ljuijana&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SPAIN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Madrid&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SWEDEN&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Stockholm&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SWITZERLAND&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Berne&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UNITED KINGDOM&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;London&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;VATICAN CITY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Vatican City&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// North and Central America</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ANTIGUA AND BARBUDA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Saint John&#39;s&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BAHAMAS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Nassau&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BARBADOS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bridgetown&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BELIZE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Belmopan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CANADA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ottawa&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;COSTA RICA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;San Jose&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CUBA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Havana&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;DOMINICA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Roseau&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;DOMINICAN REPUBLIC&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Santo Domingo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;EL SALVADOR&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;San Salvador&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GRENADA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Saint George&#39;s&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GUATEMALA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Guatemala City&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;HAITI&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Port-au-Prince&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;HONDURAS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Tegucigalpa&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;JAMAICA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kingston&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;MEXICO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Mexico City&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;NICARAGUA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Managua&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PANAMA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Panama City&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ST. KITTS AND NEVIS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Basseterre&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ST. LUCIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Castries&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ST. VINCENT AND THE GRENADINES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Kingstown&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;UNITED STATES OF AMERICA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Washington, D.C.&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// South America</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ARGENTINA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Buenos Aires&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BOLIVIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sucre (legal)/La Paz(administrative)&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;BRAZIL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Brasilia&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;CHILE&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Santiago&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;COLOMBIA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bogota&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;ECUADOR&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Quito&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;GUYANA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Georgetown&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PARAGUAY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Asuncion&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;PERU&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Lima&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;SURINAME&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Paramaribo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;TRINIDAD AND TOBAGO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Port of Spain&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;URUGUAY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Montevideo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;VENEZUELA&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Caracas&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// Use AbstractMap by implementing entrySet()</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">FlyweightMap</span>
  <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span>
    <span class="token keyword">implements</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> index<span class="token punctuation">;</span>
      <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> index<span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> o <span class="token keyword">instanceof</span> <span class="token class-name">FlyweightMap</span> <span class="token operator">&amp;&amp;</span>
          <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>DATA<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>DATA<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> DATA<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> DATA<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Implement size() &amp; iterator() for AbstractSet:</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">EntrySet</span>
    <span class="token keyword">extends</span> <span class="token class-name">AbstractSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>
      <span class="token class-name">EntrySet</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// Can&#39;t be any bigger than the array:</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">&gt;</span> DATA<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> DATA<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> size<span class="token punctuation">;</span> <span class="token punctuation">}</span>
      <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Iter</span>
      <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token comment">// Only one Entry object per Iterator:</span>
        <span class="token keyword">private</span> <span class="token class-name">Entry</span> entry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Entry</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> entry<span class="token punctuation">.</span>index <span class="token operator">&lt;</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          entry<span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> entry<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span>
      <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">EntrySet</span><span class="token punctuation">(</span>DATA<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> entries<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Create a partial map of &#39;size&#39; countries:</span>
  <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FlyweightMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EntrySet</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlyweightMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">capitals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">;</span> <span class="token comment">// The entire map</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">capitals</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A partial map</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// All the names:</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">names</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> names<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// A partial list:</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">names</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">select</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hashtable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;BRAZIL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{ALGERIA=Algiers, ANGOLA=Luanda, BENIN=Porto-Novo,
BOTSWANA=Gaberone, BURKINA FASO=Ouagadougou,
BURUNDI=Bujumbura, CAMEROON=Yaounde, CAPE VERDE=Praia,
CENTRAL AFRICAN REPUBLIC=Bangui, CHAD=N&#39;djamena}
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI, CAMEROON, CAPE VERDE, CENTRAL AFRICAN
REPUBLIC, CHAD]
{BENIN=Porto-Novo, ANGOLA=Luanda, ALGERIA=Algiers}
{ALGERIA=Algiers, ANGOLA=Luanda, BENIN=Porto-Novo}
{ALGERIA=Algiers, ANGOLA=Luanda, BENIN=Porto-Novo}
{ALGERIA=Algiers, ANGOLA=Luanda, BENIN=Porto-Novo}
[BENIN, BOTSWANA, ANGOLA, BURKINA FASO, ALGERIA,
BURUNDI]
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI]
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI]
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI]
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI]
Brasilia
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E8C\u7EF4\u6570\u7EC4 <strong>String DATA</strong> \u662F <strong>public</strong> \u7684\uFF0C\u56E0\u6B64\u53EF\u4EE5\u5728\u522B\u5904\u4F7F\u7528\u3002 <strong>FlyweightMap</strong> \u5FC5\u987B\u5B9E\u73B0 <code>entrySet()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u9700\u8981\u4E00\u4E2A\u81EA\u5B9A\u4E49 <strong>Set</strong> \u5B9E\u73B0\u548C\u4E00\u4E2A\u81EA\u5B9A\u4E49 <strong>Map.Entry</strong> \u7C7B\u3002\u8FD9\u662F\u5B9E\u73B0\u4EAB\u5143\u7684\u53E6\u4E00\u79CD\u65B9\u6CD5\uFF1A\u6BCF\u4E2A <strong>Map.Entry</strong> \u5BF9\u8C61\u5B58\u50A8\u5B83\u81EA\u8EAB\u7684\u7D22\u5F15\uFF0C\u800C\u4E0D\u662F\u5B9E\u9645\u7684\u952E\u548C\u503C\u3002\u5F53\u8C03\u7528 <code>getKey()</code> \u6216 <code>getValue()</code> \u65F6\uFF0C\u5B83\u4F7F\u7528\u7D22\u5F15\u8FD4\u56DE\u76F8\u5E94\u7684 <strong>DATA</strong> \u5143\u7D20\u3002 <strong>EntrySet</strong> \u786E\u4FDD\u5B83\u7684 <strong>size</strong> \u4E0D\u5927\u4E8E <strong>DATA</strong> \u3002</p><p>\u4EAB\u5143\u7684\u53E6\u4E00\u90E8\u5206\u5728 <strong>EntrySet.Iterator</strong> \u4E2D\u5B9E\u73B0\u3002\u76F8\u6BD4\u4E8E\u4E3A <strong>DATA</strong> \u4E2D\u7684\u6BCF\u4E2A\u6570\u636E\u5BF9\u521B\u5EFA\u4E00\u4E2A <strong>Map.Entry</strong> \u5BF9\u8C61\uFF0C\u8FD9\u91CC\u6BCF\u4E2A\u8FED\u4EE3\u5668\u53EA\u6709\u4E00\u4E2A <strong>Map.Entry</strong> \u5BF9\u8C61\u3002 <strong>Entry</strong> \u5BF9\u8C61\u4F5C\u4E3A\u6570\u636E\u7684\u7A97\u53E3\uFF0C\u5B83\u53EA\u5305\u542B <strong>String</strong> \u9759\u6001\u6570\u7EC4\u7684\u7D22\u5F15\u3002\u6BCF\u6B21\u4E3A\u8FED\u4EE3\u5668\u8C03\u7528 <code>next()</code> \u65F6\uFF0C<strong>Entry</strong> \u4E2D\u7684\u7D22\u5F15\u90FD\u4F1A\u9012\u589E\uFF0C\u56E0\u6B64\u5B83\u4F1A\u6307\u5411\u4E0B\u4E00\u4E2A\u6570\u636E\u5BF9\uFF0C\u7136\u540E\u4ECE <code>next()</code> \u8FD4\u56DE <strong>Iterators</strong> \u7684\u5355\u4E2A <strong>Entry</strong> \u5BF9\u8C61\u3002[^1]</p><p><code>select()</code> \u65B9\u6CD5\u751F\u6210\u4E00\u4E2A\u5305\u542B\u6240\u9700\u5927\u5C0F\u7684 <strong>EntrySet</strong> \u7684 <strong>FlyweightMap</strong> \uFF0C\u8FD9\u7528\u4E8E\u5728\u4E3B\u65B9\u6CD5\u4E2D\u6F14\u793A\u7684\u91CD\u8F7D\u7684 <code>capitals()</code> \u548C <code>names()</code> \u65B9\u6CD5\u3002</p><h2 id="\u96C6\u5408\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u96C6\u5408\u529F\u80FD" aria-hidden="true">#</a> \u96C6\u5408\u529F\u80FD</h2><p>\u4E0B\u9762\u8FD9\u4E2A\u8868\u683C\u5C55\u793A\u4E86\u53EF\u4EE5\u5BF9 <strong>Collection</strong> \u6267\u884C\u7684\u6240\u6709\u64CD\u4F5C\uFF08\u4E0D\u5305\u62EC\u81EA\u52A8\u7EE7\u627F\u81EA <strong>Object</strong> \u7684\u65B9\u6CD5\uFF09\uFF0C\u56E0\u6B64\uFF0C\u53EF\u4EE5\u7528 <strong>List</strong> \uFF0C <strong>Set</strong> \uFF0C <strong>Queue</strong> \u6216 <strong>Deque</strong> \u6267\u884C\u8FD9\u91CC\u7684\u6240\u6709\u64CD\u4F5C\uFF08\u8FD9\u4E9B\u63A5\u53E3\u53EF\u80FD\u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E9B\u5176\u4ED6\u7684\u529F\u80FD\uFF09\u3002<strong>Map</strong> \u4E0D\u662F\u4ECE <strong>Collection</strong> \u7EE7\u627F\u7684\uFF0C\u6240\u4EE5\u8981\u5355\u72EC\u5904\u7406\u5B83\u3002</p><table><thead><tr><th style="text-align:center;">\u65B9\u6CD5\u540D</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>boolean add(T)</strong></td><td style="text-align:left;">\u786E\u4FDD\u96C6\u5408\u5305\u542B\u8BE5\u6CDB\u578B\u7C7B\u578B <strong>T</strong> \u7684\u53C2\u6570\u3002\u5982\u679C\u4E0D\u6DFB\u52A0\u53C2\u6570\uFF0C\u5219\u8FD4\u56DE <strong>false</strong> \u3002 \uFF08\u8FD9\u662F\u4E00\u79CD\u201C\u53EF\u9009\u201D\u65B9\u6CD5\uFF0C\u5C06\u5728\u4E0B\u4E00\u8282\u4E2D\u4ECB\u7ECD\u3002\uFF09</td></tr><tr><td style="text-align:center;"><strong>boolean addAll(Collection&lt;? extends T&gt;)</strong></td><td style="text-align:left;">\u6DFB\u52A0\u53C2\u6570\u96C6\u5408\u4E2D\u7684\u6240\u6709\u5143\u7D20\u3002\u53EA\u8981\u6709\u5143\u7D20\u88AB\u6210\u529F\u6DFB\u52A0\u5219\u8FD4\u56DE <strong>true</strong>\u3002\uFF08\u201C\u53EF\u9009\u7684\u201D\uFF09</td></tr><tr><td style="text-align:center;"><strong>void clear()</strong></td><td style="text-align:left;">\u5220\u9664\u96C6\u5408\u4E2D\u7684\u6240\u6709\u5143\u7D20\u3002\uFF08\u201C\u53EF\u9009\u7684\u201D\uFF09</td></tr><tr><td style="text-align:center;"><strong>boolean contains(T)</strong></td><td style="text-align:left;">\u5982\u679C\u76EE\u6807\u96C6\u5408\u5305\u542B\u8BE5\u6CDB\u578B\u7C7B\u578B <strong>T</strong> \u7684\u53C2\u6570\uFF0C\u5219\u8FD4\u56DE <strong>true</strong> \u3002</td></tr><tr><td style="text-align:center;"><strong>boolean containsAll(Collection&lt;?&gt;)</strong></td><td style="text-align:left;">\u5982\u679C\u76EE\u6807\u96C6\u5408\u5305\u542B\u53C2\u6570\u96C6\u5408\u4E2D\u7684\u6240\u6709\u5143\u7D20\uFF0C\u5219\u8FD4\u56DE <strong>true</strong></td></tr><tr><td style="text-align:center;"><strong>boolean isEmpty()</strong></td><td style="text-align:left;">\u5982\u679C\u96C6\u5408\u4E3A\u7A7A\uFF0C\u5219\u8FD4\u56DE <strong>true</strong></td></tr><tr><td style="text-align:center;"><strong>Iterator&lt;T&gt; iterator() Spliterator&lt;T&gt; spliterator()</strong></td><td style="text-align:left;">\u8FD4\u56DE\u4E00\u4E2A\u8FED\u4EE3\u5668\u6765\u904D\u5386\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u3002 <strong>Spliterators</strong> \u66F4\u590D\u6742\u4E00\u4E9B\uFF0C\u5B83\u7528\u5728\u5E76\u53D1\u573A\u666F</td></tr><tr><td style="text-align:center;"><strong>boolean remove(Object)</strong></td><td style="text-align:left;">\u5982\u679C\u76EE\u6807\u96C6\u5408\u5305\u542B\u8BE5\u53C2\u6570\uFF0C\u5219\u5728\u96C6\u5408\u4E2D\u5220\u9664\u8BE5\u53C2\u6570\uFF0C\u5982\u679C\u6210\u529F\u5220\u9664\u5219\u8FD4\u56DE <strong>true</strong> \u3002\uFF08\u201C\u53EF\u9009\u7684\u201D\uFF09</td></tr><tr><td style="text-align:center;"><strong>boolean removeAll(Collection&lt;?&gt;)</strong></td><td style="text-align:left;">\u5220\u9664\u76EE\u6807\u96C6\u5408\u4E2D\uFF0C\u53C2\u6570\u96C6\u5408\u6240\u5305\u542B\u7684\u5168\u90E8\u5143\u7D20\u3002\u5982\u679C\u6709\u5143\u7D20\u88AB\u6210\u529F\u5220\u9664\u5219\u8FD4\u56DE <strong>true</strong> \u3002 \uFF08\u201C\u53EF\u9009\u7684\u201D\uFF09</td></tr><tr><td style="text-align:center;"><strong>boolean removeIf(Predicate&lt;? super E&gt;)</strong></td><td style="text-align:left;">\u5220\u9664\u6B64\u96C6\u5408\u4E2D\uFF0C\u6EE1\u8DB3\u7ED9\u5B9A\u65AD\u8A00\uFF08predicate\uFF09\u7684\u6240\u6709\u5143\u7D20</td></tr><tr><td style="text-align:center;"><strong>Stream&lt;E&gt; stream() Stream&lt;E&gt; parallelStream()</strong></td><td style="text-align:left;">\u8FD4\u56DE\u7531\u8BE5 <strong>Collection</strong> \u4E2D\u5143\u7D20\u6240\u7EC4\u6210\u7684\u4E00\u4E2A <strong>Stream</strong></td></tr><tr><td style="text-align:center;"><strong>int size()</strong></td><td style="text-align:left;">\u8FD4\u56DE\u96C6\u5408\u4E2D\u6240\u5305\u542B\u5143\u7D20\u7684\u4E2A\u6570</td></tr><tr><td style="text-align:center;"><strong>Object[] toArrat()</strong></td><td style="text-align:left;">\u8FD4\u56DE\u5305\u542B\u8BE5\u96C6\u5408\u6240\u6709\u5143\u7D20\u7684\u4E00\u4E2A\u6570\u7EC4</td></tr><tr><td style="text-align:center;"><strong>&lt;T&gt; T[] toArray(T[] a)</strong></td><td style="text-align:left;">\u8FD4\u56DE\u5305\u542B\u8BE5\u96C6\u5408\u6240\u6709\u5143\u7D20\u7684\u4E00\u4E2A\u6570\u7EC4\u3002\u7ED3\u679C\u7684\u8FD0\u884C\u65F6\u7C7B\u578B\u662F\u53C2\u6570\u6570\u7EC4\u800C\u4E0D\u662F\u666E\u901A\u7684 <strong>Object</strong> \u6570\u7EC4\u3002</td></tr></tbody></table><p>\u8FD9\u91CC\u6CA1\u6709\u63D0\u4F9B\u7528\u4E8E\u968F\u673A\u8BBF\u95EE\u5143\u7D20\u7684 <strong>get()</strong> \u65B9\u6CD5\uFF0C\u56E0\u4E3A <strong>Collection</strong> \u8FD8\u5305\u542B <strong>Set</strong> \uFF0C\u5B83\u7EF4\u62A4\u81EA\u5DF1\u7684\u5185\u90E8\u6392\u5E8F\uFF0C\u6240\u4EE5\u968F\u673A\u8BBF\u95EE\u67E5\u627E\u5C31\u6CA1\u6709\u610F\u4E49\u4E86\u3002\u56E0\u6B64\uFF0C\u8981\u67E5\u627E <strong>Collection</strong> \u4E2D\u7684\u5143\u7D20\u5FC5\u987B\u4F7F\u7528\u8FED\u4EE3\u5668\u3002</p><p>\u4E0B\u9762\u8FD9\u4E2A\u793A\u4F8B\u6F14\u793A\u4E86 <strong>Collection</strong> \u7684\u6240\u6709\u65B9\u6CD5\u3002\u8FD9\u91CC\u4EE5 <strong>ArrayList</strong> \u4E3A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/CollectionMethods.java</span>
<span class="token comment">// Things you can do with all Collections</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token class-name">HTMLColors</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionMethods</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ten&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;eleven&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Make an array from the List:</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Make a String array from the List:</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Find max and min elements; this means</span>
    <span class="token comment">// different things depending on the way</span>
    <span class="token comment">// the Comparable interface is implemented:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Collections.max(c) = &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Collections.min(c) = &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Add a Collection to another Collection</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c2 <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>LIST<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Remove all components that are</span>
    <span class="token comment">// in the argument collection:</span>
    c<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Is an element in this Collection?</span>
    <span class="token class-name">String</span> val <span class="token operator">=</span> LIST<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;c.contains(&quot;</span> <span class="token operator">+</span> val  <span class="token operator">+</span> <span class="token string">&quot;) = &quot;</span> <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Is a Collection in this Collection?</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;c.containsAll(c2) = &quot;</span> <span class="token operator">+</span> c<span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c3 <span class="token operator">=</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Keep all the elements that are in both</span>
    <span class="token comment">// c2 and c3 (an intersection of sets):</span>
    c2<span class="token punctuation">.</span><span class="token function">retainAll</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">show</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Throw away all the elements</span>
    <span class="token comment">// in c2 that also appear in c3:</span>
    c2<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>c3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;c2.isEmpty() = &quot;</span> <span class="token operator">+</span>  c2<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">border</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Functional operation:</span>
    c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>LIST<span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">removeIf</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;P&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">removeIf</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Pale&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Stream operation:</span>
    c<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Remove all elements</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after c.clear():&quot;</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
AliceBlue
AntiqueWhite
Aquamarine
Azure
ten
eleven
******************************
Collections.max(c) = ten
Collections.min(c) = AliceBlue
******************************
AliceBlue
AntiqueWhite
Aquamarine
Azure
ten
eleven
Brown
BurlyWood
CadetBlue
Chartreuse
******************************
AntiqueWhite
Aquamarine
Azure
ten
eleven
Brown
BurlyWood
CadetBlue
Chartreuse
******************************
AntiqueWhite
Aquamarine
Azure
ten
eleven
******************************
AntiqueWhite
Aquamarine
Azure
ten
eleven
Brown
BurlyWood
CadetBlue
Chartreuse
******************************
c.contains(Azure) = true
c.containsAll(c2) = true
c2.isEmpty() = true
******************************
PapayaWhip
PeachPuff
Peru
Pink
Plum
PowderBlue
Purple
after c.clear():[]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4E86\u53EA\u6F14\u793A <strong>Collection</strong> \u63A5\u53E3\u7684\u65B9\u6CD5\uFF0C\u800C\u6CA1\u6709\u5176\u5B83\u989D\u5916\u7684\u5185\u5BB9\uFF0C\u6240\u4EE5\u8FD9\u91CC\u521B\u5EFA\u5305\u542B\u4E0D\u540C\u6570\u636E\u96C6\u7684 <strong>ArrayList</strong> \uFF0C\u5E76\u5411\u4E0A\u8F6C\u578B\u4E3A <strong>Collection</strong> \u5BF9\u8C61\u3002</p><h2 id="\u53EF\u9009\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u53EF\u9009\u64CD\u4F5C" aria-hidden="true">#</a> \u53EF\u9009\u64CD\u4F5C</h2><p>\u5728 <strong>Collection</strong> \u63A5\u53E3\u4E2D\u6267\u884C\u5404\u79CD\u6DFB\u52A0\u548C\u5220\u9664\u64CD\u4F5C\u7684\u65B9\u6CD5\u662F <em>\u53EF\u9009\u64CD\u4F5C</em> \uFF08optional operations\uFF09\u3002\u8FD9\u610F\u5473\u7740\u5B9E\u73B0\u7C7B\u4E0D\u9700\u8981\u4E3A\u8FD9\u4E9B\u65B9\u6CD5\u63D0\u4F9B\u529F\u80FD\u5B9A\u4E49\u3002</p><p>\u8FD9\u662F\u4E00\u79CD\u975E\u5E38\u4E0D\u5BFB\u5E38\u7684\u5B9A\u4E49\u63A5\u53E3\u7684\u65B9\u5F0F\u3002\u6B63\u5982\u6211\u4EEC\u6240\u77E5\uFF0C\u63A5\u53E3\u662F\u4E00\u79CD\u5408\u7EA6\uFF08contract\uFF09\u3002\u5B83\u8868\u8FBE\u7684\u610F\u601D\u662F\uFF0C\u201C\u65E0\u8BBA\u4F60\u5982\u4F55\u9009\u62E9\u5B9E\u73B0\u8FD9\u4E2A\u63A5\u53E3\uFF0C\u6211\u4FDD\u8BC1\u4F60\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u6D88\u606F\u53D1\u9001\u5230\u8FD9\u4E2A\u5BF9\u8C61\u201D\uFF08\u6211\u5728\u8FD9\u91CC\u4F7F\u7528\u672F\u8BED\u201C\u63A5\u53E3\u201D\u6765\u63CF\u8FF0\u6B63\u5F0F\u7684 <strong>interface</strong> \u5173\u952E\u5B57\u548C\u201C\u4EFB\u4F55\u7C7B\u6216\u5B50\u7C7B\u90FD\u652F\u6301\u7684\u65B9\u6CD5\u201D\u7684\u66F4\u4E00\u822C\u542B\u4E49\uFF09\u3002\u4F46\u201C\u53EF\u9009\u201D\u64CD\u4F5C\u8FDD\u53CD\u4E86\u8FD9\u4E00\u57FA\u672C\u539F\u5219\uFF0C\u5B83\u8868\u793A\u8C03\u7528\u67D0\u4E9B\u65B9\u6CD5\u4E0D\u4F1A\u6267\u884C\u6709\u610F\u4E49\u7684\u884C\u4E3A\u3002\u76F8\u53CD\uFF0C\u5B83\u4EEC\u4F1A\u629B\u51FA\u5F02\u5E38\uFF01\u8FD9\u770B\u8D77\u6765\u4F3C\u4E4E\u4E22\u5931\u4E86\u7F16\u8BD1\u65F6\u7684\u7C7B\u578B\u5B89\u5168\u6027\u3002</p><p>\u5176\u5B9E\u6CA1\u90A3\u4E48\u7CDF\u7CD5\u3002\u5982\u679C\u64CD\u4F5C\u662F\u53EF\u9009\u7684\uFF0C\u7F16\u8BD1\u5668\u4ECD\u7136\u80FD\u591F\u9650\u5236\u4F60\u4EC5\u8C03\u7528\u8BE5\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u3002\u5B83\u4E0D\u50CF\u52A8\u6001\u8BED\u8A00\u90A3\u6837\uFF0C\u53EF\u4EE5\u4E3A\u4EFB\u4F55\u5BF9\u8C61\u8C03\u7528\u4EFB\u4F55\u65B9\u6CD5\uFF0C\u5E76\u5728\u8FD0\u884C\u65F6\u67E5\u627E\u7279\u5B9A\u7684\u8C03\u7528\u662F\u5426\u53EF\u884C\u3002[^2]\u6B64\u5916\uFF0C\u5927\u591A\u6570\u5C06 <strong>Collection</strong> \u4F5C\u4E3A\u53C2\u6570\u7684\u65B9\u6CD5\u4EC5\u4ECE\u8BE5 <strong>Collection</strong> \u4E2D\u8BFB\u53D6\uFF0C\u5E76\u4E14 <strong>Collection</strong> \u7684\u6240\u6709\u201C\u8BFB\u53D6\u201D\u65B9\u6CD5\u90FD\u4E0D\u662F\u53EF\u9009\u7684\u3002</p><p>\u4E3A\u4EC0\u4E48\u8981\u5C06\u65B9\u6CD5\u5B9A\u4E49\u4E3A\u201C\u53EF\u9009\u201D\u7684\uFF1F\u56E0\u4E3A\u8FD9\u6837\u505A\u53EF\u4EE5\u9632\u6B62\u8BBE\u8BA1\u4E2D\u7684\u63A5\u53E3\u7206\u70B8\u3002\u96C6\u5408\u5E93\u7684\u5176\u4ED6\u8BBE\u8BA1\u5F80\u5F80\u4F1A\u4EA7\u751F\u4EE4\u4EBA\u56F0\u60D1\u7684\u8FC7\u591A\u63A5\u53E3\u6765\u63CF\u8FF0\u4E3B\u9898\u7684\u6BCF\u4E2A\u53D8\u4F53\u3002\u8FD9\u751A\u81F3\u4F7F\u5F97\u4E0D\u53EF\u80FD\u6355\u83B7\u5230\u63A5\u53E3\u4E2D\u7684\u6240\u6709\u7279\u6B8A\u60C5\u51B5\uFF0C\u56E0\u4E3A\u603B\u6709\u4EBA\u80FD\u53D1\u660E\u4E00\u4E2A\u65B0\u7684\u63A5\u53E3\u3002\u201C\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\uFF08unsupported operation\uFF09\u201D\u8FD9\u79CD\u65B9\u5F0F\u5B9E\u73B0\u4E86Java\u96C6\u5408\u5E93\u7684\u4E00\u4E2A\u91CD\u8981\u76EE\u6807\uFF1A\u96C6\u5408\u8981\u6613\u4E8E\u5B66\u4E60\u548C\u4F7F\u7528\u3002\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\u662F\u4E00\u79CD\u7279\u6B8A\u60C5\u51B5\uFF0C\u53EF\u4EE5\u63A8\u8FDF\u5230\u5FC5\u8981\u7684\u65F6\u5019\u3002\u4F46\u662F\uFF0C\u8981\u4F7F\u7528\u6B64\u65B9\u6CD5\uFF1A</p><ol><li><p><strong>UnsupportedOperationException</strong> \u5FC5\u987B\u662F\u4E00\u4E2A\u7F55\u89C1\u7684\u4E8B\u4EF6\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5BF9\u4E8E\u5927\u591A\u6570\u7C7B\uFF0C\u6240\u6709\u64CD\u4F5C\u90FD\u5E94\u8BE5\u8D77\u4F5C\u7528\uFF0C\u5E76\u4E14\u53EA\u6709\u5728\u7279\u6B8A\u60C5\u51B5\u4E0B\u624D\u5E94\u8BE5\u4E0D\u652F\u6301\u67D0\u9879\u64CD\u4F5C\u3002\u8FD9\u5728Java\u96C6\u5408\u5E93\u4E2D\u662F\u6B63\u786E\u7684\uFF0C\u56E0\u4E3A99%\u7684\u65F6\u95F4\u4F7F\u7528\u5230\u7684\u7C7B \u2014\u2014 <strong>ArrayList</strong> \uFF0C <strong>LinkedList</strong> \uFF0C <strong>HashSet</strong> \u548C <strong>HashMap</strong> \uFF0C\u4EE5\u53CA\u5176\u4ED6\u5177\u4F53\u5B9E\u73B0\uFF0C\u90FD\u652F\u6301\u6240\u6709\u64CD\u4F5C\u3002\u8BE5\u8BBE\u8BA1\u786E\u5B9E\u4E3A\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 <strong>Collection</strong> \u63D0\u4F9B\u4E86\u4E00\u4E2A\u201C\u540E\u95E8\u201D\uFF0C\u53EF\u4EE5\u4E0D\u4E3A <strong>Collection</strong> \u63A5\u53E3\u4E2D\u7684\u6240\u6709\u65B9\u6CD5\u90FD\u63D0\u4F9B\u6709\u610F\u4E49\u7684\u5B9A\u4E49\uFF0C\u8FD9\u4E9B\u5B9A\u4E49\u4ECD\u7136\u9002\u5408\u73B0\u6709\u7684\u7C7B\u5E93\u3002</p></li><li><p>\u5F53\u4E0D\u652F\u6301\u67D0\u4E2A\u64CD\u4F5C\u65F6\uFF0C <strong>UnsupportedOperationException</strong> \u5E94\u8BE5\u51FA\u73B0\u5728\u5B9E\u73B0\u9636\u6BB5\uFF0C\u800C\u4E0D\u662F\u5728\u5C06\u4EA7\u54C1\u53D1\u9001\u7ED9\u5BA2\u6237\u4E4B\u540E\u3002\u6BD5\u7ADF\uFF0C\u8FD9\u4E2A\u5F02\u5E38\u8868\u793A\u7F16\u7A0B\u9519\u8BEF\uFF1A\u9519\u8BEF\u5730\u4F7F\u7528\u4E86\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0\u3002</p></li></ol><p>\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\u53EA\u80FD\u5728\u8FD0\u884C\u65F6\u68C0\u6D4B\u5230\uFF0C\u56E0\u6B64\u8FD9\u4EE3\u8868\u52A8\u6001\u7C7B\u578B\u68C0\u67E5\u3002\u5982\u679C\u4F60\u6765\u81EA\u50CF C++ \u8FD9\u6837\u7684\u9759\u6001\u7C7B\u578B\u8BED\u8A00\uFF0CJava \u53EF\u80FD\u770B\u8D77\u6765\u53EA\u662F\u53E6\u4E00\u79CD\u9759\u6001\u7C7B\u578B\u8BED\u8A00\u3002\u5F53\u7136\uFF0C Java \u80AF\u5B9A\u6709\u9759\u6001\u7C7B\u578B\u68C0\u67E5\uFF0C\u4F46\u5B83\u4E5F\u6709\u5927\u91CF\u7684\u52A8\u6001\u7C7B\u578B\uFF0C\u56E0\u6B64\u5F88\u96BE\u8BF4\u5B83\u53EA\u662F\u9759\u6001\u8BED\u8A00\u6216\u52A8\u6001\u8BED\u8A00\u3002\u4E00\u65E6\u4F60\u5F00\u59CB\u6CE8\u610F\u5230\u8FD9\u4E00\u70B9\uFF0C\u4F60\u5C31\u4F1A\u5F00\u59CB\u770B\u5230 Java \u4E2D\u52A8\u6001\u7C7B\u578B\u68C0\u67E5\u7684\u5176\u4ED6\u793A\u4F8B\u3002</p><h3 id="\u4E0D\u652F\u6301\u7684\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u652F\u6301\u7684\u64CD\u4F5C" aria-hidden="true">#</a> \u4E0D\u652F\u6301\u7684\u64CD\u4F5C</h3><p>\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\u7684\u5E38\u89C1\u6765\u6E90\u662F\u7531\u56FA\u5B9A\u5927\u5C0F\u7684\u6570\u636E\u7ED3\u6784\u6240\u652F\u6301\u7684\u96C6\u5408\u3002\u4F7F\u7528 <code>Arrays.asList()</code> \u65B9\u6CD5\u5C06\u6570\u7EC4\u8F6C\u6362\u4E3A <strong>List</strong> \u65F6\uFF0C\u5C31\u4F1A\u5F97\u5230\u8FD9\u6837\u7684\u96C6\u5408\u3002\u6B64\u5916\uFF0C\u8FD8\u53EF\u4EE5\u9009\u62E9\u4F7F\u7528 <strong>Collections</strong> \u7C7B\u4E2D\u7684\u201C\u4E0D\u53EF\u4FEE\u6539\uFF08unmodifiable\uFF09\u201D\u65B9\u6CD5\u4F7F\u4EFB\u4F55\u96C6\u5408\uFF08\u5305\u62EC <strong>Map</strong> \uFF09\u629B\u51FA <strong>UnsupportedOperationException</strong> \u5F02\u5E38\u3002\u6B64\u793A\u4F8B\u5C55\u793A\u4E86\u8FD9\u4E24\u79CD\u60C5\u51B5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Unsupported.java</span>
<span class="token comment">// Unsupported operations in Java collections</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Unsupported</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span>
  <span class="token function">check</span><span class="token punctuation">(</span><span class="token class-name">String</span> description<span class="token punctuation">,</span> <span class="token class-name">Runnable</span> tst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      tst<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>description <span class="token operator">+</span> <span class="token string">&quot;(): &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--- &quot;</span> <span class="token operator">+</span> msg <span class="token operator">+</span> <span class="token string">&quot; ---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> subList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Copy of the sublist:</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>subList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;retainAll&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">retainAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;removeAll&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;clear&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;X&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;addAll&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> c<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// The List.set() method modifies the value but</span>
    <span class="token comment">// doesn&#39;t change the size of the data structure:</span>
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token string">&quot;List.set&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;X&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
      <span class="token string">&quot;A B C D E F G H I J K L&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Modifiable Copy&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;Arrays.asList()&quot;</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;unmodifiableList()&quot;</span><span class="token punctuation">,</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
--- Modifiable Copy ---
--- Arrays.asList() ---
retainAll(): java.lang.UnsupportedOperationException
removeAll(): java.lang.UnsupportedOperationException
clear(): java.lang.UnsupportedOperationException
add(): java.lang.UnsupportedOperationException
addAll(): java.lang.UnsupportedOperationException
remove(): java.lang.UnsupportedOperationException
--- unmodifiableList() ---
retainAll(): java.lang.UnsupportedOperationException
removeAll(): java.lang.UnsupportedOperationException
clear(): java.lang.UnsupportedOperationException
add(): java.lang.UnsupportedOperationException
addAll(): java.lang.UnsupportedOperationException
remove(): java.lang.UnsupportedOperationException
List.set(): java.lang.UnsupportedOperationException
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u56E0\u4E3A <code>Arrays.asList()</code> \u751F\u6210\u7684 <strong>List</strong> \u7531\u4E00\u4E2A\u56FA\u5B9A\u5927\u5C0F\u7684\u6570\u7EC4\u6240\u652F\u6301\uFF0C\u6240\u4EE5\u552F\u4E00\u652F\u6301\u7684\u64CD\u4F5C\u662F\u90A3\u4E9B\u4E0D\u6539\u53D8\u6570\u7EC4\u5927\u5C0F\u7684\u64CD\u4F5C\u3002\u4EFB\u4F55\u4F1A\u5BFC\u81F4\u66F4\u6539\u57FA\u7840\u6570\u636E\u7ED3\u6784\u5927\u5C0F\u7684\u65B9\u6CD5\u90FD\u4F1A\u4EA7\u751F <strong>UnsupportedOperationException</strong> \u5F02\u5E38\uFF0C\u6765\u8BF4\u660E\u8FD9\u662F\u5BF9\u4E0D\u652F\u6301\u7684\u65B9\u6CD5\u7684\u8C03\u7528\uFF08\u7F16\u7A0B\u9519\u8BEF\uFF09\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u59CB\u7EC8\u53EF\u4EE5\u5C06 <code>Arrays.asList()</code> \u7684\u7ED3\u679C\u4F5C\u4E3A\u4E00\u4E2A\u53C2\u6570\u4F20\u9012\u7ED9\u4EFB\u4F55 <strong>Collection</strong> \u7684\u6784\u9020\u65B9\u6CD5\uFF08\u6216\u4F7F\u7528 <code>addAll()</code> \u65B9\u6CD5\u6216\u9759\u6001\u7684 <code>Collections.addAll()</code> \u65B9\u6CD5\uFF09\u6765\u521B\u5EFA\u4E00\u4E2A\u5141\u8BB8\u4F7F\u7528\u6240\u6709\u65B9\u6CD5\u7684\u5E38\u89C4\u96C6\u5408\uFF0C\u5728\u4E3B\u65B9\u6CD5\u4E2D\u7B2C\u4E00\u6B21\u8C03\u7528 <code>test()</code> \u65F6\u663E\u793A\u4E86\u8FD9\u79CD\u60C5\u51B5\u3002\u8FD9\u79CD\u8C03\u7528\u4EA7\u751F\u4E86\u4E00\u4E2A\u65B0\u7684\u53EF\u8C03\u6574\u5927\u5C0F\u7684\u5E95\u5C42\u6570\u636E\u7ED3\u6784\u3002</p><p><strong>Collections</strong> \u7C7B\u4E2D\u7684\u201Cunmodifiable\u201D\u65B9\u6CD5\u4F1A\u5C06\u96C6\u5408\u5305\u88C5\u4E00\u4E2A\u4EE3\u7406\u4E2D\uFF0C\u5982\u679C\u6267\u884C\u4EFB\u4F55\u60F3\u8981\u4FEE\u6539\u96C6\u5408\u7684\u64CD\u4F5C\uFF0C\u5219\u8BE5\u4EE3\u7406\u4F1A\u751F\u6210 <strong>UnsupportedOperationException</strong> \u5F02\u5E38\u3002\u4F7F\u7528\u8FD9\u4E9B\u65B9\u6CD5\u7684\u76EE\u7684\u662F\u751F\u6210\u4E00\u4E2A\u201C\u5E38\u91CF\u201D\u96C6\u5408\u5BF9\u8C61\u3002\u7A0D\u540E\u5C06\u63CF\u8FF0\u201Cunmodifiable\u201C\u96C6\u5408\u65B9\u6CD5\u7684\u5B8C\u6574\u5217\u8868\u3002</p><p><code>test()</code> \u4E2D\u7684\u6700\u540E\u4E00\u4E2A <code>check()</code> \u7528\u4E8E\u6D4B\u8BD5<strong>List</strong> \u7684 <code>set()</code> \u65B9\u6CD5\u3002\u8FD9\u91CC\uFF0C\u201C\u4E0D\u652F\u6301\u7684\u64CD\u4F5C\u201D\u6280\u672F\u7684\u7C92\u5EA6\uFF08granularity\uFF09\u5C31\u6D3E\u4E0A\u7528\u573A\u4E86\uFF0C\u5F97\u5230\u7684\u201C\u63A5\u53E3\u201D\u53EF\u4EE5\u901A\u8FC7\u4E00\u79CD\u65B9\u6CD5\u5728 <code>Arrays.asList()</code> \u8FD4\u56DE\u7684\u5BF9\u8C61\u548C <code>Collections.unmodifiableList()</code> \u8FD4\u56DE\u7684\u5BF9\u8C61\u4E4B\u95F4\u53D8\u6362\u3002 <code>Arrays.asList()</code> \u8FD4\u56DE\u56FA\u5B9A\u5927\u5C0F\u7684 <strong>List</strong> \uFF0C\u800C <code>Collections.unmodifiableList()</code> \u751F\u6210\u65E0\u6CD5\u66F4\u6539\u7684 <strong>List</strong> \u3002\u5982\u8F93\u51FA\u4E2D\u6240\u793A\uFF0C <code>Arrays.asList()</code> \u8FD4\u56DE\u7684 <strong>List</strong> \u4E2D\u7684\u5143\u7D20\u662F\u53EF\u4EE5\u4FEE\u6539\u7684\uFF0C\u56E0\u4E3A\u8FD9\u4E0D\u4F1A\u8FDD\u53CD\u8BE5 <strong>List</strong> \u7684\u201C\u56FA\u5B9A\u5927\u5C0F\u201D\u7279\u6027\u3002\u4F46\u5F88\u660E\u663E\uFF0C <code>unmodifiableList()</code> \u7684\u7ED3\u679C\u4E0D\u5E94\u8BE5\u4EE5\u4EFB\u4F55\u65B9\u5F0F\u4FEE\u6539\u3002\u5982\u679C\u4F7F\u7528\u63A5\u53E3\u6765\u63CF\u8FF0\uFF0C\u5219\u9700\u8981\u4E24\u4E2A\u989D\u5916\u7684\u63A5\u53E3\uFF0C\u4E00\u4E2A\u5177\u6709\u53EF\u7528\u7684 <code>set()</code> \u65B9\u6CD5\uFF0C\u800C\u53E6\u4E00\u4E2A\u6CA1\u6709\u3002 <strong>Collection</strong> \u7684\u5404\u79CD\u4E0D\u53EF\u4FEE\u6539\u7684\u5B50\u7C7B\u578B\u90FD\u5C06\u9700\u8981\u989D\u5916\u7684\u63A5\u53E3\u3002</p><p>\u5982\u679C\u4E00\u4E2A\u65B9\u6CD5\u5C06\u4E00\u4E2A\u96C6\u5408\u4F5C\u4E3A\u5B83\u7684\u53C2\u6570\uFF0C\u90A3\u4E48\u5B83\u7684\u6587\u6863\u5E94\u8BE5\u8BF4\u660E\u5FC5\u987B\u5B9E\u73B0\u54EA\u4E9B\u53EF\u9009\u65B9\u6CD5\u3002</p><h2 id="set\u548C\u5B58\u50A8\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#set\u548C\u5B58\u50A8\u987A\u5E8F" aria-hidden="true">#</a> Set\u548C\u5B58\u50A8\u987A\u5E8F</h2><p><a href="">\u7B2C\u5341\u4E8C\u7AE0 \u96C6\u5408</a>\u7AE0\u8282\u4E2D\u7684 <strong>Set</strong> \u6709\u5173\u793A\u4F8B\u5BF9 <strong>Set</strong> \u7684\u57FA\u672C\u64CD\u4F5C\u505A\u4E86\u5F88\u597D\u7684\u4ECB\u7ECD\u3002 \u4F46\u662F\uFF0C\u8FD9\u4E9B\u793A\u4F8B\u53EF\u4EE5\u65B9\u4FBF\u5730\u4F7F\u7528\u9884\u5B9A\u4E49\u7684 Java \u7C7B\u578B\uFF0C\u4F8B\u5982 <strong>Integer</strong> \u548C <strong>String</strong> \uFF0C\u5B83\u4EEC\u53EF\u4EE5\u5728\u96C6\u5408\u4E2D\u4F7F\u7528\u3002\u5728\u521B\u5EFA\u81EA\u5DF1\u7684\u7C7B\u578B\u65F6\u8BF7\u6CE8\u610F\uFF0C <strong>Set</strong> \uFF08\u4EE5\u53CA\u7A0D\u540E\u4F1A\u770B\u5230\u7684 <strong>Map</strong> \uFF09\u9700\u8981\u4E00\u79CD\u7EF4\u62A4\u5B58\u50A8\u987A\u5E8F\u7684\u65B9\u6CD5\uFF0C\u8BE5\u987A\u5E8F\u56E0 <strong>Set</strong> \u7684\u4E0D\u540C\u5B9E\u73B0\u800C\u5F02\u3002\u56E0\u6B64\uFF0C\u4E0D\u540C\u7684 <strong>Set</strong> \u5B9E\u73B0\u4E0D\u4EC5\u5177\u6709\u4E0D\u540C\u7684\u884C\u4E3A\uFF0C\u800C\u4E14\u5B83\u4EEC\u5BF9\u53EF\u4EE5\u653E\u5165\u7279\u5B9A <strong>Set</strong> \u4E2D\u7684\u5BF9\u8C61\u7C7B\u578B\u4E5F\u6709\u4E0D\u540C\u7684\u8981\u6C42\uFF1A</p><table><thead><tr><th style="text-align:center;"><strong>Set</strong> \u7C7B\u578B</th><th style="text-align:left;">\u7EA6\u675F</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>Set(interface)</strong></td><td style="text-align:left;">\u6DFB\u52A0\u5230 <strong>Set</strong> \u4E2D\u7684\u6BCF\u4E2A\u5143\u7D20\u5FC5\u987B\u662F\u552F\u4E00\u7684\uFF0C\u5426\u5219\uFF0C<strong>Set</strong> \u4E0D\u4F1A\u6DFB\u52A0\u91CD\u590D\u5143\u7D20\u3002\u6DFB\u52A0\u5230 <strong>Set</strong> \u7684\u5143\u7D20\u5FC5\u987B\u81F3\u5C11\u5B9A\u4E49 <code>equals()</code> \u65B9\u6CD5\u4EE5\u5EFA\u7ACB\u5BF9\u8C61\u552F\u4E00\u6027\u3002 <strong>Set</strong> \u4E0E <strong>Collection</strong> \u5177\u6709\u5B8C\u5168\u76F8\u540C\u7684\u63A5\u53E3\u3002 <strong>Set</strong> \u63A5\u53E3\u4E0D\u4FDD\u8BC1\u5B83\u5C06\u4EE5\u4EFB\u4F55\u7279\u5B9A\u987A\u5E8F\u7EF4\u62A4\u5176\u5143\u7D20\u3002</td></tr><tr><td style="text-align:center;"><strong>HashSet*</strong></td><td style="text-align:left;">\u6CE8\u91CD\u5FEB\u901F\u67E5\u627E\u5143\u7D20\u7684\u96C6\u5408\uFF0C\u5176\u4E2D\u5143\u7D20\u5FC5\u987B\u5B9A\u4E49 <code>hashCode()</code> \u548C <code>equals()</code> \u65B9\u6CD5\u3002</td></tr><tr><td style="text-align:center;"><strong>TreeSet</strong></td><td style="text-align:left;">\u7531\u6811\u652F\u6301\u7684\u6709\u5E8F <strong>Set</strong>\u3002\u8FD9\u6837\uFF0C\u5C31\u53EF\u4EE5\u4ECE <strong>Set</strong> \u4E2D\u83B7\u53D6\u6709\u5E8F\u5E8F\u5217\uFF0C\u5176\u4E2D\u5143\u7D20\u5FC5\u987B\u5B9E\u73B0 <strong>Comparable</strong> \u63A5\u53E3\u3002</td></tr><tr><td style="text-align:center;"><strong>LinkedHashSet</strong></td><td style="text-align:left;">\u5177\u6709 <strong>HashSet</strong> \u7684\u67E5\u627E\u901F\u5EA6\uFF0C\u4F46\u5728\u5185\u90E8\u4F7F\u7528\u94FE\u8868\u7EF4\u62A4\u5143\u7D20\u7684\u63D2\u5165\u987A\u5E8F\u3002\u56E0\u6B64\uFF0C\u5F53\u5728\u904D\u5386 <strong>Set</strong> \u65F6\uFF0C\u7ED3\u679C\u5C06\u6309\u5143\u7D20\u7684\u63D2\u5165\u987A\u5E8F\u663E\u793A\u3002\u5143\u7D20\u5FC5\u987B\u5B9A\u4E49 <code>hashCode()</code> \u548C <code>equals()</code> \u65B9\u6CD5\u3002</td></tr></tbody></table><p><strong>HashSet</strong> \u4E0A\u7684\u661F\u53F7\u8868\u793A\uFF0C\u5728\u6CA1\u6709\u5176\u4ED6\u7EA6\u675F\u7684\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u5E94\u8BE5\u662F\u4F60\u7684\u9ED8\u8BA4\u9009\u62E9\uFF0C\u56E0\u4E3A\u5B83\u9488\u5BF9\u901F\u5EA6\u8FDB\u884C\u4E86\u4F18\u5316\u3002</p><p>\u5B9A\u4E49 <code>hashCode()</code> \u65B9\u6CD5\u5728<a href="">\u9644\u5F55:\u7406\u89E3equals\u548ChashCode\u65B9\u6CD5</a>\u4E2D\u8FDB\u884C\u4E86\u63CF\u8FF0\u3002\u5FC5\u987B\u4E3A\u6563\u5217\u548C\u6811\u5B58\u50A8\u7ED3\u6784\u521B\u5EFA <code>equals()</code> \u65B9\u6CD5\uFF0C\u4F46\u53EA\u6709\u5F53\u628A\u7C7B\u653E\u5728 <strong>HashSet</strong> \u4E2D\u65F6\u624D\u9700\u8981 <code>hashCode()</code> \uFF08\u5F53\u7136\u8FD9\u5F88\u6709\u53EF\u80FD\uFF0C\u56E0\u4E3A <strong>HashSet</strong> \u901A\u5E38\u5E94\u8BE5\u662F\u4F5C\u4E3A <strong>Set</strong> \u5B9E\u73B0\u7684\u9996\u9009\uFF09\u6216 <strong>LinkedHashSet</strong> \u3002 \u4F46\u662F\uFF0C\u4F5C\u4E3A\u4E00\u79CD\u826F\u597D\u7684\u7F16\u7A0B\u98CE\u683C\uFF0C\u5728\u8986\u76D6 <code>equals()</code> \u65F6\u5E94\u59CB\u7EC8\u8986\u76D6 <code>hashCode()</code> \u3002</p><p>\u4E0B\u9762\u7684\u793A\u4F8B\u6F14\u793A\u4E86\u6210\u529F\u4F7F\u7528\u5177\u6709\u7279\u5B9A <strong>Set</strong> \u5B9E\u73B0\u7684\u7C7B\u578B\u6240\u9700\u7684\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/TypesForSets.java</span>
<span class="token comment">// Methods necessary to put your own type in a Set</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Objects</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SetType</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
  <span class="token class-name">SetType</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> i <span class="token operator">=</span> n<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> o <span class="token keyword">instanceof</span> <span class="token class-name">SetType</span> <span class="token operator">&amp;&amp;</span>
      <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">SetType</span><span class="token punctuation">)</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">HashType</span> <span class="token keyword">extends</span> <span class="token class-name">SetType</span> <span class="token punctuation">{</span>
  <span class="token class-name">HashType</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">TreeType</span> <span class="token keyword">extends</span> <span class="token class-name">SetType</span>
<span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeType</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">TreeType</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">TreeType</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Equivalent to:</span>
    <span class="token comment">// return arg.i &lt; i ? -1 : (arg.i == i ? 0 : 1);</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TypesForSets</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span>
  <span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> set<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token comment">// Descending</span>
      set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// Ascending</span>
      set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> set<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fill</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fill</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Try to add duplicates</span>
    <span class="token function">fill</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">HashType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">HashType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TreeType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Things that don&#39;t work:</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">SetType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TreeType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">SetType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TreeType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">SetType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">HashType</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[10, 9, 8, 7, 6, 5, 0, 1, 2, 3, 4]
[10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
[1, 6, 8, 6, 2, 7, 8, 9, 4, 10, 7, 5, 1, 3, 4, 9, 9,
10, 5, 3, 2, 0, 4, 1, 2, 0, 8, 3, 0, 10, 6, 5, 7]
[3, 1, 4, 8, 7, 6, 9, 5, 3, 0, 10, 5, 5, 10, 7, 8, 8,
9, 1, 4, 10, 2, 6, 9, 1, 6, 0, 3, 2, 0, 7, 2, 4]
[10, 9, 8, 7, 6, 5, 0, 1, 2, 3, 4, 10, 9, 8, 7, 6, 5,
0, 1, 2, 3, 4, 10, 9, 8, 7, 6, 5, 0, 1, 2, 3, 4]
[10, 9, 8, 7, 6, 5, 0, 1, 2, 3, 4, 10, 9, 8, 7, 6, 5,
0, 1, 2, 3, 4, 10, 9, 8, 7, 6, 5, 0, 1, 2, 3, 4]
SetType cannot be cast to java.lang.Comparable
HashType cannot be cast to java.lang.Comparable
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4E86\u8BC1\u660E\u7279\u5B9A <strong>Set</strong> \u9700\u8981\u54EA\u4E9B\u65B9\u6CD5\uFF0C\u540C\u65F6\u907F\u514D\u4EE3\u7801\u91CD\u590D\uFF0C\u8FD9\u91CC\u521B\u5EFA\u4E86\u4E09\u4E2A\u7C7B\u3002\u57FA\u7C7B <strong>SetType</strong> \u5B58\u50A8\u4E00\u4E2A <strong>int</strong> \u503C\uFF0C\u5E76\u901A\u8FC7 <code>toString()</code> \u65B9\u6CD5\u6253\u5370\u5B83\u3002\u7531\u4E8E\u5B58\u50A8\u5728 <strong>Set</strong> \u4E2D\u7684\u6240\u6709\u7C7B\u90FD\u5FC5\u987B\u5177\u6709 <code>equals()</code> \uFF0C\u56E0\u6B64\u8BE5\u65B9\u6CD5\u4E5F\u653E\u5728\u57FA\u7C7B\u4E2D\u3002\u57FA\u4E8E <code>int i</code> \u6765\u5224\u65AD\u5143\u7D20\u662F\u5426\u76F8\u7B49\u3002</p><p><strong>HashType</strong> \u7EE7\u627F\u81EA <strong>SetType</strong> \uFF0C\u5E76\u6DFB\u52A0\u4E86 <code>hashCode()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u5BF9\u4E8E <strong>Set</strong> \u7684\u6563\u5217\u5B9E\u73B0\u662F\u5FC5\u9700\u7684\u3002</p><p>\u8981\u5728\u4EFB\u4F55\u7C7B\u578B\u7684\u6709\u5E8F\u96C6\u5408\u4E2D\u4F7F\u7528\u5BF9\u8C61\uFF0C\u7531 <strong>TreeType</strong> \u5B9E\u73B0\u7684 <strong>Comparable</strong> \u63A5\u53E3\u90FD\u662F\u5FC5\u9700\u7684\uFF0C\u4F8B\u5982 <strong>SortedSet</strong> \uFF08 <strong>TreeSet</strong> \u662F\u5176\u552F\u4E00\u5B9E\u73B0\uFF09\u3002\u5728 <code>compareTo()</code> \u4E2D\uFF0C\u8BF7\u6CE8\u610F\u6211\u6CA1\u6709\u4F7F\u7528\u201C\u7B80\u5355\u660E\u4E86\u201D\u7684\u5F62\u5F0F\uFF1A <code>return i-i2</code> \u3002\u867D\u7136\u8FD9\u662F\u4E00\u4E2A\u5E38\u89C1\u7684\u7F16\u7A0B\u9519\u8BEF\uFF0C\u4F46\u53EA\u6709\u5F53 <strong>i</strong> \u548C <strong>i2</strong> \u662F\u201C\u65E0\u7B26\u53F7\uFF08unsigned\uFF09\u201D\u6574\u578B\u65F6\u624D\u80FD\u6B63\u5E38\u5DE5\u4F5C\uFF08\u5982\u679C Java \u6709\u4E00\u4E2A\u201Cunsigned\u201D\u5173\u952E\u5B57\u7684\u8BDD\uFF0C\u4E0D\u8FC7\u5B83\u6CA1\u6709\uFF09\u3002\u5B83\u7834\u574F\u4E86 Java \u7684\u6709\u7B26\u53F7 <strong>int</strong> \uFF0C\u5B83\u4E0D\u8DB3\u4EE5\u4EE3\u8868\u4E24\u4E2A\u6709\u7B26\u53F7\u6574\u6570\u7684\u5DEE\u5F02\u3002\u5982\u679C <strong>i</strong> \u662F\u4E00\u4E2A\u5927\u7684\u6B63\u6574\u6570\u800C <strong>j</strong> \u662F\u4E00\u4E2A\u5927\u7684\u8D1F\u6574\u6570\uFF0C <code>i-j</code> \u5C06\u6EA2\u51FA\u5E76\u8FD4\u56DE\u4E00\u4E2A\u8D1F\u503C\uFF0C\u8FD9\u4E0D\u662F\u6211\u4EEC\u6240\u9700\u8981\u7684\u3002</p><p>\u901A\u5E38\u5E0C\u671B <code>compareTo()</code> \u65B9\u6CD5\u751F\u6210\u4E0E <code>equals()</code> \u65B9\u6CD5\u4E00\u81F4\u7684\u81EA\u7136\u987A\u5E8F\u3002\u5982\u679C <code>equals()</code> \u5BF9\u4E8E\u7279\u5B9A\u6BD4\u8F83\u4EA7\u751F <strong>true</strong>\uFF0C\u5219 <code>compareTo()</code> \u5E94\u8BE5\u4E3A\u8BE5\u6BD4\u8F83\u8FD4\u56DE\u7ED3\u679C \u96F6\uFF0C\u5E76\u4E14\u5982\u679C <code>equals()</code> \u4E3A\u6BD4\u8F83\u4EA7\u751F <strong>false</strong> \uFF0C\u5219 <code>compareTo()</code> \u5E94\u8BE5\u4E3A\u8BE5\u6BD4\u8F83\u4EA7\u751F\u975E\u96F6\u7ED3\u679C\u3002</p><p>\u5728 <strong>TypesForSets</strong> \u4E2D\uFF0C <code>fill()</code> \u548C <code>test()</code> \u90FD\u662F\u4F7F\u7528\u6CDB\u578B\u5B9A\u4E49\u7684\uFF0C\u4EE5\u9632\u6B62\u4EE3\u7801\u91CD\u590D\u3002\u4E3A\u4E86\u9A8C\u8BC1 <strong>Set</strong> \u7684\u884C\u4E3A\uFF0C <code>test()</code> \u5728\u6D4B\u8BD5\u96C6\u4E0A\u8C03\u7528 <code>fill()</code> \u4E09\u6B21\uFF0C\u5C1D\u8BD5\u5F15\u5165\u91CD\u590D\u7684\u5BF9\u8C61\u3002 <code>fill()</code> \u65B9\u6CD5\u7684\u53C2\u6570\u53EF\u4EE5\u63A5\u6536\u4EFB\u610F\u4E00\u4E2A <strong>Set</strong> \u7C7B\u578B\uFF0C\u4EE5\u53CA\u751F\u6210\u8BE5\u7C7B\u578B\u7684 <strong>Function</strong> \u5BF9\u8C61\u3002\u56E0\u4E3A\u6B64\u793A\u4F8B\u4E2D\u4F7F\u7528\u7684\u6240\u6709\u5BF9\u8C61\u90FD\u6709\u4E00\u4E2A\u5E26\u6709\u5355\u4E2A <strong>int</strong> \u53C2\u6570\u7684\u6784\u9020\u65B9\u6CD5\uFF0C\u6240\u4EE5\u53EF\u4EE5\u5C06\u6784\u9020\u65B9\u6CD5\u4F5C\u4E3A\u6B64 <strong>Function</strong> \u4F20\u9012\uFF0C\u5B83\u5C06\u63D0\u4F9B\u7528\u4E8E\u586B\u5145 <strong>Set</strong> \u7684\u5BF9\u8C61\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C <code>fill()</code> \u65B9\u6CD5\u6309\u964D\u5E8F\u6DFB\u52A0\u524D\u4E94\u4E2A\u5143\u7D20\uFF0C\u6309\u5347\u5E8F\u6DFB\u52A0\u540E\u4E94\u4E2A\u5143\u7D20\uFF0C\u4EE5\u6B64\u6765\u6307\u51FA\u751F\u6210\u7684\u5B58\u50A8\u987A\u5E8F\u3002\u8F93\u51FA\u663E\u793A <strong>HashSet</strong> \u6309\u5347\u5E8F\u4FDD\u7559\u5143\u7D20\uFF0C\u4F46\u662F\uFF0C\u5728<a href="">\u9644\u5F55:\u7406\u89E3equals\u548ChashCode\u65B9\u6CD5</a>\u4E2D\uFF0C\u4F60\u4F1A\u53D1\u73B0\u8FD9\u53EA\u662F\u5076\u7136\u7684\uFF0C\u56E0\u4E3A\u6563\u5217\u4F1A\u521B\u5EFA\u81EA\u5DF1\u7684\u5B58\u50A8\u987A\u5E8F\u3002\u8FD9\u91CC\u53EA\u662F\u56E0\u4E3A\u5143\u7D20\u662F\u4E00\u4E2A\u7B80\u5355\u7684 <strong>int</strong> \uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u5B83\u662F\u5347\u5E8F\u7684\u3002 <strong>LinkedHashSet</strong> \u6309\u7167\u63D2\u5165\u987A\u5E8F\u4FDD\u5B58\u5143\u7D20\uFF0C<strong>TreeSet</strong> \u6309\u6392\u5E8F\u987A\u5E8F\u7EF4\u62A4\u5143\u7D20\uFF08\u5728\u6B64\u793A\u4F8B\u4E2D\u56E0\u4E3A <code>compareTo()</code> \u7684\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u6240\u4EE5\u5143\u7D20\u6309\u964D\u5E8F\u6392\u5217\u3002\uFF09</p><p>\u7279\u5B9A\u7684 <strong>Set</strong> \u7C7B\u578B\u4E00\u822C\u90FD\u6709\u6240\u5FC5\u9700\u7684\u64CD\u4F5C\uFF0C\u5982\u679C\u5C1D\u8BD5\u4F7F\u7528\u6CA1\u80FD\u6B63\u786E\u652F\u6301\u8FD9\u4E9B\u64CD\u4F5C\u7684\u7C7B\u578B\uFF0C\u90A3\u4E48\u4E8B\u60C5\u5C31\u4F1A\u51FA\u9519\u3002\u5C06\u6CA1\u6709\u91CD\u65B0\u5B9A\u4E49 <code>hashCode()</code> \u65B9\u6CD5\u7684 <strong>SetType</strong> \u6216 <strong>TreeType</strong> \u5BF9\u8C61\u653E\u5165\u4EFB\u4F55\u6563\u5217\u5B9E\u73B0\u4F1A\u5BFC\u81F4\u91CD\u590D\u503C\uFF0C\u56E0\u6B64\u8FDD\u53CD\u4E86 <strong>Set</strong> \u7684\u4E3B\u8981\u5951\u7EA6\u3002 \u8FD9\u662F\u76F8\u5F53\u4EE4\u4EBA\u4E0D\u5B89\u7684\uFF0C\u56E0\u4E3A\u8FD9\u751A\u81F3\u4E0D\u4EA7\u751F\u8FD0\u884C\u65F6\u9519\u8BEF\u3002\u4F46\u662F\uFF0C\u9ED8\u8BA4\u7684 <code>hashCode()</code> \u662F\u5408\u6CD5\u7684\uFF0C\u6240\u4EE5\u5373\u4F7F\u5B83\u662F\u4E0D\u6B63\u786E\u7684\uFF0C\u8FD9\u4E5F\u662F\u5408\u6CD5\u7684\u884C\u4E3A\u3002\u786E\u4FDD\u6B64\u7C7B\u7A0B\u5E8F\u6B63\u786E\u6027\u7684\u552F\u4E00\u53EF\u9760\u65B9\u6CD5\u662F\u5C06\u5355\u5143\u6D4B\u8BD5\u5408\u5E76\u5230\u6784\u5EFA\u7CFB\u7EDF\u4E2D\u3002</p><p>\u5982\u679C\u5C1D\u8BD5\u5728 <strong>TreeSet</strong> \u4E2D\u4F7F\u7528\u6CA1\u6709\u5B9E\u73B0 <strong>Comparable</strong> \u63A5\u53E3\u7684\u7C7B\u578B\uFF0C\u5219\u4F1A\u5F97\u5230\u66F4\u660E\u786E\u7684\u7ED3\u679C\uFF1A\u5F53 <strong>TreeSet</strong> \u5C1D\u8BD5\u5C06\u5BF9\u8C61\u7528\u4F5C\u4E00\u4E2A <strong>Comparable</strong> \u65F6\uFF0C\u5C06\u4F1A\u629B\u51FA\u5F02\u5E38\u3002</p><h3 id="sortedset" tabindex="-1"><a class="header-anchor" href="#sortedset" aria-hidden="true">#</a> SortedSet</h3><p><strong>SortedSet</strong> \u4E2D\u7684\u5143\u7D20\u4FDD\u8BC1\u6309\u6392\u5E8F\u89C4\u5219\u987A\u5E8F\uFF0C <strong>SortedSet</strong> \u63A5\u53E3\u4E2D\u7684\u4EE5\u4E0B\u65B9\u6CD5\u53EF\u4EE5\u4EA7\u751F\u5176\u4ED6\u529F\u80FD\uFF1A</p><ul><li><code>Comparator comparator()</code> \uFF1A\u751F\u6210\u7528\u4E8E\u6B64 <strong>Set</strong> \u7684<strong>Comparator</strong> \u6216 <strong>null</strong> \u6765\u7528\u4E8E\u81EA\u7136\u6392\u5E8F\u3002</li><li><code>Object first()</code> \uFF1A\u8FD4\u56DE\u7B2C\u4E00\u4E2A\u5143\u7D20\u3002</li><li><code>Object last()</code> \uFF1A\u8FD4\u56DE\u6700\u540E\u4E00\u4E2A\u5143\u7D20\u3002</li><li><code>SortedSet subSet(fromElement\uFF0CtoElement)</code> \uFF1A\u4F7F\u7528 <strong>fromElement</strong> \uFF08\u5305\u542B\uFF09\u548C <strong>toElement</strong> \uFF08\u4E0D\u5305\u62EC\uFF09\u4E2D\u7684\u5143\u7D20\u751F\u6210\u6B64 <strong>Set</strong> \u7684\u4E00\u4E2A\u89C6\u56FE\u3002</li><li><code>SortedSet headSet(toElement)</code> \uFF1A\u4F7F\u7528\u987A\u5E8F\u5728 <strong>toElement</strong> \u4E4B\u524D\u7684\u5143\u7D20\u751F\u6210\u6B64 <strong>Set</strong> \u7684\u4E00\u4E2A\u89C6\u56FE\u3002</li><li><code>SortedSet tailSet(fromElement)</code> \uFF1A\u4F7F\u7528\u987A\u5E8F\u5728 <strong>fromElement</strong> \u4E4B\u540E\uFF08\u5305\u542B <strong>fromElement</strong> \uFF09\u7684\u5143\u7D20\u751F\u6210\u6B64 <strong>Set</strong> \u7684\u4E00\u4E2A\u89C6\u56FE\u3002</li></ul><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u6F14\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/SortedSetDemo.java</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SortedSetDemo</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortedSet <span class="token operator">=</span>
      <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>
        <span class="token string">&quot;one two three four five six seven eight&quot;</span>
        <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">TreeSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> low <span class="token operator">=</span> sortedSet<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> high <span class="token operator">=</span> sortedSet<span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> sortedSet<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> low <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> high <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedSet<span class="token punctuation">.</span><span class="token function">subSet</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedSet<span class="token punctuation">.</span><span class="token function">headSet</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedSet<span class="token punctuation">.</span><span class="token function">tailSet</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[eight, five, four, one, seven, six, three, two]
eight
two
one
two
[one, seven, six, three]
[eight, five, four, one, seven, six, three]
[one, seven, six, three, two]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF0C <strong>SortedSet</strong> \u8868\u793A\u201C\u6839\u636E\u5BF9\u8C61\u7684\u6BD4\u8F83\u51FD\u6570\u8FDB\u884C\u6392\u5E8F\u201D\uFF0C\u800C\u4E0D\u662F\u201C\u6839\u636E\u63D2\u5165\u987A\u5E8F\u201D\u3002\u53EF\u4EE5\u4F7F\u7528 <strong>LinkedHashSet</strong> \u4FDD\u7559\u5143\u7D20\u7684\u63D2\u5165\u987A\u5E8F\u3002</p><h2 id="\u961F\u5217" tabindex="-1"><a class="header-anchor" href="#\u961F\u5217" aria-hidden="true">#</a> \u961F\u5217</h2><p>\u6709\u8BB8\u591A <strong>Queue</strong> \u5B9E\u73B0\uFF0C\u5176\u4E2D\u5927\u591A\u6570\u662F\u4E3A\u5E76\u53D1\u5E94\u7528\u7A0B\u5E8F\u8BBE\u8BA1\u7684\u3002\u8BB8\u591A\u5B9E\u73B0\u90FD\u662F\u901A\u8FC7\u6392\u5E8F\u884C\u4E3A\u800C\u4E0D\u662F\u6027\u80FD\u6765\u533A\u5206\u7684\u3002\u8FD9\u662F\u4E00\u4E2A\u6D89\u53CA\u5927\u591A\u6570 <strong>Queue</strong> \u5B9E\u73B0\u7684\u57FA\u672C\u793A\u4F8B\uFF0C\u5305\u62EC\u57FA\u4E8E\u5E76\u53D1\u7684\u961F\u5217\u3002\u961F\u5217\u5C06\u5143\u7D20\u4ECE\u4E00\u7AEF\u653E\u5165\u5E76\u4ECE\u53E6\u4E00\u7AEF\u53D6\u51FA\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/QueueBehavior.java</span>
<span class="token comment">// Compares basic behavior</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueueBehavior</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">strings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token string">&quot;one two three four five six seven &quot;</span> <span class="token operator">+</span>
       <span class="token string">&quot;eight nine ten&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">strings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>queue<span class="token operator">::</span><span class="token function">offer</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentLinkedQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PriorityBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentLinkedDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LinkedTransferQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
1: one two three four five six seven eight nine ten
2: eight five four nine one seven six ten three two
3: one two three four five six seven eight nine ten
4: one two three four five six seven eight nine ten
5: one two three four five six seven eight nine ten
6: eight five four nine one seven six ten three two
7: one two three four five six seven eight nine ten
8: one two three four five six seven eight nine ten
9: one two three four five six seven eight nine ten
10: one two three four five six seven eight nine ten
11:
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Deque</strong> \u63A5\u53E3\u4E5F\u7EE7\u627F\u81EA <strong>Queue</strong> \u3002 \u9664\u4F18\u5148\u7EA7\u961F\u5217\u5916\uFF0C<strong>Queue</strong> \u6309\u7167\u5143\u7D20\u7684\u63D2\u5165\u987A\u5E8F\u751F\u6210\u5143\u7D20\u3002 \u5728\u6B64\u793A\u4F8B\u4E2D\uFF0C<strong>SynchronousQueue</strong> \u4E0D\u4F1A\u4EA7\u751F\u4EFB\u4F55\u7ED3\u679C\uFF0C\u56E0\u4E3A\u5B83\u662F\u4E00\u4E2A\u963B\u585E\u961F\u5217\uFF0C\u5176\u4E2D\u6BCF\u4E2A\u63D2\u5165\u64CD\u4F5C\u5FC5\u987B\u7B49\u5F85\u53E6\u4E00\u4E2A\u7EBF\u7A0B\u6267\u884C\u76F8\u5E94\u7684\u5220\u9664\u64CD\u4F5C\uFF0C\u53CD\u4E4B\u4EA6\u7136\u3002</p><h3 id="\u4F18\u5148\u7EA7\u961F\u5217" tabindex="-1"><a class="header-anchor" href="#\u4F18\u5148\u7EA7\u961F\u5217" aria-hidden="true">#</a> \u4F18\u5148\u7EA7\u961F\u5217</h3><p>\u8003\u8651\u4E00\u4E2A\u5F85\u529E\u4E8B\u9879\u5217\u8868\uFF0C\u5176\u4E2D\u6BCF\u4E2A\u5BF9\u8C61\u5305\u542B\u4E00\u4E2A <strong>String</strong> \u4EE5\u53CA\u4E3B\u8981\u548C\u6B21\u8981\u4F18\u5148\u7EA7\u503C\u3002\u901A\u8FC7\u5B9E\u73B0 <strong>Comparable</strong> \u63A5\u53E3\u6765\u63A7\u5236\u6B64\u5F85\u529E\u4E8B\u9879\u5217\u8868\u7684\u987A\u5E8F\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/ToDoList.java</span>
<span class="token comment">// A more complex use of PriorityQueue</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ToDoItem</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ToDoItem</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">char</span> primary<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> secondary<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> item<span class="token punctuation">;</span>
  <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> td<span class="token punctuation">,</span> <span class="token keyword">char</span> pri<span class="token punctuation">,</span> <span class="token keyword">int</span> sec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    primary <span class="token operator">=</span> pri<span class="token punctuation">;</span>
    secondary <span class="token operator">=</span> sec<span class="token punctuation">;</span>
    item <span class="token operator">=</span> td<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">ToDoItem</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>primary <span class="token operator">&gt;</span> arg<span class="token punctuation">.</span>primary<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>primary <span class="token operator">==</span> arg<span class="token punctuation">.</span>primary<span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>secondary <span class="token operator">&gt;</span> arg<span class="token punctuation">.</span>secondary<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>secondary <span class="token operator">==</span> arg<span class="token punctuation">.</span>secondary<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>primary<span class="token punctuation">)</span> <span class="token operator">+</span>
      secondary <span class="token operator">+</span> <span class="token string">&quot;: &quot;</span> <span class="token operator">+</span> item<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ToDoList</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ToDoItem</span><span class="token punctuation">&gt;</span></span> toDo <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Empty trash&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Feed dog&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Feed bird&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;B&#39;</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Mow lawn&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Water lawn&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;A&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    toDo<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ToDoItem</span><span class="token punctuation">(</span><span class="token string">&quot;Feed cat&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;B&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>toDo<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>toDo<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
A1: Water lawn
A2: Feed dog
B1: Feed cat
B7: Feed bird
C3: Mow lawn
C4: Empty trash
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u5C55\u793A\u4E86\u901A\u8FC7\u4F18\u5148\u7EA7\u961F\u5217\u81EA\u52A8\u6392\u5E8F\u5F85\u529E\u4E8B\u9879\u3002</p><h3 id="\u53CC\u7AEF\u961F\u5217" tabindex="-1"><a class="header-anchor" href="#\u53CC\u7AEF\u961F\u5217" aria-hidden="true">#</a> \u53CC\u7AEF\u961F\u5217</h3><p><strong>Deque</strong> \uFF08\u53CC\u7AEF\u961F\u5217\uFF09\u5C31\u50CF\u4E00\u4E2A\u961F\u5217\uFF0C\u4F46\u662F\u53EF\u4EE5\u4ECE\u4EFB\u4E00\u7AEF\u6DFB\u52A0\u548C\u5220\u9664\u5143\u7D20\u3002 Java 6\u4E3A <strong>Deque</strong> \u6DFB\u52A0\u4E86\u4E00\u4E2A\u663E\u5F0F\u63A5\u53E3\u3002\u4EE5\u4E0B\u662F\u5BF9\u5B9E\u73B0\u4E86 <strong>Deque</strong> \u7684\u7C7B\u7684\u6700\u57FA\u672C\u7684 <strong>Deque</strong> \u65B9\u6CD5\u7684\u6D4B\u8BD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/SimpleDeques.java</span>
<span class="token comment">// Very basic test of Deques</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CountString</span> <span class="token keyword">implements</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token class-name">CountString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">CountString</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">)</span> <span class="token punctuation">{</span> n <span class="token operator">=</span> start<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>n<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleDeques</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> deque<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CountString</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountString</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        deque<span class="token punctuation">.</span><span class="token function">offerFirst</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        deque<span class="token punctuation">.</span><span class="token function">offerLast</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Same as offer()</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deque<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>deque<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>deque<span class="token punctuation">.</span><span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      result <span class="token operator">+=</span> deque<span class="token punctuation">.</span><span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>deque<span class="token punctuation">.</span><span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      result <span class="token operator">+=</span> deque<span class="token punctuation">.</span><span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LinkedList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ArrayDeque&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LinkedBlockingDeque&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedBlockingDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcurrentLinkedDeque&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcurrentLinkedDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
LinkedList
[7, 6, 5, 4, 3, 2, 1, 0, 20, 21, 22, 23, 24, 25, 26,
27]
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
ArrayDeque
[7, 6, 5, 4, 3, 2, 1, 0, 20, 21, 22, 23, 24, 25, 26,
27]
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
LinkedBlockingDeque
[4, 3, 2, 1, 0, 20, 21, 22, 23, 24]
4 24 3 23 2 22 1 21 0 20
4 24 3 23 2 22 1 21 0 20
ConcurrentLinkedDeque
[7, 6, 5, 4, 3, 2, 1, 0, 20, 21, 22, 23, 24, 25, 26,
27]
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
7 27 6 26 5 25 4 24 3 23 2 22 1 21 0 20
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u53EA\u4F7F\u7528\u4E86 <strong>Deque</strong> \u65B9\u6CD5\u7684\u201Coffer\u201D\u548C\u201Cpoll\u201D\u7248\u672C\uFF0C\u56E0\u4E3A\u5F53 <strong>LinkedBlockingDeque</strong> \u7684\u5927\u5C0F\u6709\u9650\u65F6\uFF0C\u8FD9\u4E9B\u65B9\u6CD5\u4E0D\u4F1A\u629B\u51FA\u5F02\u5E38\u3002\u8BF7\u6CE8\u610F\uFF0C <strong>LinkedBlockingDeque</strong> \u4EC5\u586B\u5145\u5230\u5B83\u7684\u9650\u5236\u5927\u5C0F\u4E3A\u6B62\uFF0C\u7136\u540E\u5FFD\u7565\u989D\u5916\u7684\u6DFB\u52A0\u3002</p><h2 id="\u7406\u89E3map" tabindex="-1"><a class="header-anchor" href="#\u7406\u89E3map" aria-hidden="true">#</a> \u7406\u89E3Map</h2><p>\u6B63\u5982\u5728<a href="">\u7B2C\u5341\u4E8C\u7AE0 \u96C6\u5408</a>\u7AE0\u8282\u4E2D\u6240\u4E86\u89E3\u5230\u7684\uFF0C<strong>Map</strong>\uFF08\u4E5F\u79F0\u4E3A <em>\u5173\u8054\u6570\u7EC4</em> \uFF09\u7EF4\u62A4\u952E\u503C\u5173\u8054\uFF08\u5BF9\uFF09\uFF0C\u56E0\u6B64\u53EF\u4EE5\u4F7F\u7528\u952E\u6765\u67E5\u627E\u503C\u3002\u6807\u51C6 Java \u5E93\u5305\u542B\u4E0D\u540C\u7684 <strong>Map</strong> \u57FA\u672C\u5B9E\u73B0\uFF0C\u4F8B\u5982 <strong>HashMap</strong> \uFF0C <strong>TreeMap</strong> \uFF0C <strong>LinkedHashMap</strong> \uFF0C <strong>WeakHashMap</strong> \uFF0C <strong>ConcurrentHashMap</strong> \u548C <strong>IdentityHashMap</strong> \u3002 \u5B83\u4EEC\u90FD\u5177\u6709\u76F8\u540C\u7684\u57FA\u672C <strong>Map</strong> \u63A5\u53E3\uFF0C\u4F46\u5B83\u4EEC\u7684\u884C\u4E3A\u4E0D\u540C\uFF0C\u5305\u62EC\u6548\u7387\uFF0C\u952E\u503C\u5BF9\u7684\u4FDD\u5B58\u987A\u5E8F\u548C\u5448\u73B0\u987A\u5E8F\uFF0C\u4FDD\u5B58\u5BF9\u8C61\u7684\u65F6\u95F4\uFF0C\u5982\u4F55\u5728\u591A\u7EBF\u7A0B\u7A0B\u5E8F\u4E2D\u5DE5\u4F5C\uFF0C\u4EE5\u53CA\u5982\u4F55\u786E\u5B9A\u952E\u7684\u76F8\u7B49\u6027\u3002 <strong>Map</strong> \u63A5\u53E3\u7684\u5B9E\u73B0\u6570\u91CF\u5E94\u8BE5\u544A\u8BC9\u4F60\u4E00\u4E9B\u5173\u4E8E\u6B64\u5DE5\u5177\u91CD\u8981\u6027\u7684\u4FE1\u606F\u3002</p><p>\u4E3A\u4E86\u66F4\u6DF1\u5165\u5730\u4E86\u89E3 <strong>Map</strong> \uFF0C\u5B66\u4E60\u5982\u4F55\u6784\u9020\u5173\u8054\u6570\u7EC4\u4F1A\u5F88\u6709\u5E2E\u52A9\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u975E\u5E38\u7B80\u5355\u7684\u5B9E\u73B0\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/AssociativeArray.java</span>
<span class="token comment">// Associates keys with values</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssociativeArray</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pairs<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">int</span> index<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">AssociativeArray</span><span class="token punctuation">(</span><span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pairs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> pairs<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ArrayIndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pairs<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> key<span class="token punctuation">,</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pairs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">V</span><span class="token punctuation">)</span>pairs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// Did not find key</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StringBuilder</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pairs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot; : &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pairs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">AssociativeArray</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">AssociativeArray</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;sky&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;grass&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ocean&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dancing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;tree&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tall&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;earth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;brown&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;sun&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;warm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;extra&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Past the end</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ArrayIndexOutOfBoundsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Too many objects!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;ocean&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
Too many objects!
sky : blue
grass : green
ocean : dancing
tree : tall
earth : brown
sun : warm
dancing
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5173\u8054\u6570\u7EC4\u4E2D\u7684\u57FA\u672C\u65B9\u6CD5\u662F <code>put()</code> \u548C <code>get()</code> \uFF0C\u4F46\u4E3A\u4E86\u4FBF\u4E8E\u663E\u793A\uFF0C\u91CD\u5199\u4E86 <code>toString()</code> \u65B9\u6CD5\u4EE5\u6253\u5370\u952E\u503C\u5BF9\u3002\u4E3A\u4E86\u663E\u793A\u5B83\u7684\u5DE5\u4F5C\u539F\u7406\uFF0C\u4E3B\u65B9\u6CD5\u52A0\u8F7D\u4E00\u4E2A\u5E26\u6709\u5B57\u7B26\u4E32\u5BF9\u7684 <strong>AssociativeArray</strong> \u5E76\u6253\u5370\u751F\u6210\u7684\u6620\u5C04\uFF0C\u7136\u540E\u8C03\u7528\u5176\u4E2D\u4E00\u4E2A\u503C\u7684 <code>get()</code> \u65B9\u6CD5\u3002</p><p>\u8981\u4F7F\u7528 <code>get()</code> \u65B9\u6CD5\uFF0C\u53EF\u4EE5\u4F20\u5165\u8981\u67E5\u627E\u7684 <strong>key</strong> \uFF0C\u5B83\u5C06\u751F\u6210\u76F8\u5173\u8054\u7684\u503C\u4F5C\u4E3A\u7ED3\u679C\uFF0C\u5982\u679C\u627E\u4E0D\u5230\u5219\u8FD4\u56DE <strong>null</strong> \u3002 <code>get()</code> \u65B9\u6CD5\u4F7F\u7528\u53EF\u80FD\u662F\u6548\u7387\u6700\u4F4E\u7684\u65B9\u6CD5\u6765\u5B9A\u4F4D\u503C\uFF1A\u4ECE\u6570\u7EC4\u7684\u5934\u90E8\u5F00\u59CB\u5E76\u4F7F\u7528 <code>equals()</code> \u6765\u6BD4\u8F83\u952E\u3002\u4F46\u8FD9\u91CC\u662F\u4FA7\u91CD\u4E8E\u7B80\u5355\uFF0C\u800C\u4E0D\u662F\u6548\u7387\u3002</p><p>\u8FD9\u4E2A\u7248\u672C\u5F88\u6709\u542F\u53D1\u6027\uFF0C\u4F46\u5B83\u4E0D\u662F\u5F88\u6709\u6548\uFF0C\u800C\u4E14\u5B83\u53EA\u6709\u4E00\u4E2A\u56FA\u5B9A\u7684\u5927\u5C0F\uFF0C\u8FD9\u662F\u4E0D\u7075\u6D3B\u7684\u3002\u5E78\u8FD0\u7684\u662F\uFF0C <strong>java.util</strong> \u4E2D\u7684\u90A3\u4E9B <strong>Map</strong> \u6CA1\u6709\u8FD9\u4E9B\u95EE\u9898\u3002</p><h3 id="\u6027\u80FD" tabindex="-1"><a class="header-anchor" href="#\u6027\u80FD" aria-hidden="true">#</a> \u6027\u80FD</h3><p>\u6027\u80FD\u662F <strong>Map</strong> \u7684\u57FA\u672C\u95EE\u9898\uFF0C\u5728 <code>get()</code> \u4E2D\u4F7F\u7528\u7EBF\u6027\u65B9\u6CD5\u641C\u7D22\u4E00\u4E2A\u952E\u65F6\u4F1A\u975E\u5E38\u6162\u3002\u8FD9\u5C31\u662F <strong>HashMap</strong> \u8981\u52A0\u901F\u7684\u5730\u65B9\u3002\u5B83\u4F7F\u7528\u4E00\u4E2A\u79F0\u4E3A <em>\u54C8\u5E0C\u7801</em> \u7684\u7279\u6B8A\u503C\u6765\u66FF\u4EE3\u6162\u901F\u641C\u7D22\u4E00\u4E2A\u952E\u3002\u54C8\u5E0C\u7801\u662F\u4E00\u79CD\u4ECE\u76F8\u5173\u5BF9\u8C61\u4E2D\u83B7\u53D6\u4E00\u4E9B\u4FE1\u606F\u5E76\u5C06\u5176\u8F6C\u6362\u4E3A\u8BE5\u5BF9\u8C61\u7684\u201C\u76F8\u5BF9\u552F\u4E00\u201D <strong>int</strong> \u7684\u65B9\u6CD5\u3002 <code>hashCode()</code> \u662F\u6839\u7C7B <strong>Object</strong> \u4E2D\u7684\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u56E0\u6B64\u6240\u6709 Java \u5BF9\u8C61\u90FD\u53EF\u4EE5\u751F\u6210\u54C8\u5E0C\u7801\u3002 <strong>HashMap</strong> \u83B7\u53D6\u5BF9\u8C61\u7684 <code>hashCode()</code> \u5E76\u4F7F\u7528\u5B83\u6765\u5FEB\u901F\u641C\u7D22\u952E\u3002\u8FD9\u5C31\u4F7F\u5F97\u6027\u80FD\u6709\u4E86\u663E\u8457\u7684\u63D0\u5347\u3002[^3]</p><p>\u4EE5\u4E0B\u662F\u57FA\u672C\u7684 <strong>Map</strong> \u5B9E\u73B0\u3002 <strong>HashMap</strong>\u4E0A\u7684\u661F\u53F7\u8868\u793A\uFF0C\u5728\u6CA1\u6709\u5176\u4ED6\u7EA6\u675F\u7684\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u5E94\u8BE5\u662F\u4F60\u7684\u9ED8\u8BA4\u9009\u62E9\uFF0C\u56E0\u4E3A\u5B83\u9488\u5BF9\u901F\u5EA6\u8FDB\u884C\u4E86\u4F18\u5316\u3002\u5176\u4ED6\u5B9E\u73B0\u5F3A\u8C03\u5176\u4ED6\u7279\u6027\uFF0C\u56E0\u6B64\u4E0D\u5982 <strong>HashMap</strong> \u5FEB\u3002</p><table><thead><tr><th style="text-align:center;"><strong>Map</strong> \u5B9E\u73B0</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>HashMap*</strong></td><td style="text-align:left;">\u57FA\u4E8E\u54C8\u5E0C\u8868\u7684\u5B9E\u73B0\u3002\uFF08\u4F7F\u7528\u6B64\u7C7B\u6765\u4EE3\u66FF <strong>Hashtable</strong> \u3002\uFF09\u4E3A\u63D2\u5165\u548C\u5B9A\u4F4D\u952E\u503C\u5BF9\u63D0\u4F9B\u4E86\u5E38\u6570\u65F6\u95F4\u6027\u80FD\u3002\u53EF\u4EE5\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u8C03\u6574\u6027\u80FD\uFF0C\u8FD9\u4E9B\u6784\u9020\u65B9\u6CD5\u5141\u8BB8\u4F60\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u5BB9\u91CF\u548C\u88C5\u586B\u56E0\u5B50\u3002</td></tr><tr><td style="text-align:center;"><strong>LinkedHashMap</strong></td><td style="text-align:left;">\u4E0E <strong>HashMap</strong> \u7C7B\u4F3C\uFF0C\u4F46\u662F\u5F53\u904D\u5386\u65F6\uFF0C\u53EF\u4EE5\u6309\u63D2\u5165\u987A\u5E8F\u6216\u6700\u8FD1\u6700\u5C11\u4F7F\u7528\uFF08LRU\uFF09\u987A\u5E8F\u83B7\u53D6\u952E\u503C\u5BF9\u3002\u53EA\u6BD4 <strong>HashMap</strong> \u7565\u6162\uFF0C\u4E00\u4E2A\u4F8B\u5916\u662F\u5728\u8FED\u4EE3\u65F6\uFF0C\u7531\u4E8E\u5176\u4F7F\u7528\u94FE\u8868\u7EF4\u62A4\u5185\u90E8\u987A\u5E8F\uFF0C\u6240\u4EE5\u4F1A\u66F4\u5FEB\u4E9B\u3002</td></tr><tr><td style="text-align:center;"><strong>TreeMap</strong></td><td style="text-align:left;">\u57FA\u4E8E\u7EA2\u9ED1\u6811\u7684\u5B9E\u73B0\u3002\u5F53\u67E5\u770B\u952E\u6216\u952E\u503C\u5BF9\u65F6\uFF0C\u5B83\u4EEC\u6309\u6392\u5E8F\u987A\u5E8F\uFF08\u7531 <strong>Comparable</strong> \u6216 <strong>Comparator</strong> \u786E\u5B9A\uFF09\u3002 <strong>TreeMap</strong> \u7684\u4FA7\u91CD\u70B9\u662F\u6309\u6392\u5E8F\u987A\u5E8F\u83B7\u5F97\u7ED3\u679C\u3002 <strong>TreeMap</strong> \u662F\u552F\u4E00\u4F7F\u7528 <code>subMap()</code> \u65B9\u6CD5\u7684 <strong>Map</strong> \uFF0C\u5B83\u8FD4\u56DE\u7EA2\u9ED1\u6811\u7684\u4E00\u90E8\u5206\u3002</td></tr><tr><td style="text-align:center;"><strong>WeakHashMap</strong></td><td style="text-align:left;">\u4E00\u79CD\u5177\u6709 <em>\u5F31\u952E</em>\uFF08weak keys\uFF09 \u7684 <strong>Map</strong> \uFF0C\u4E3A\u4E86\u89E3\u51B3\u67D0\u4E9B\u7C7B\u578B\u7684\u95EE\u9898\uFF0C\u5B83\u5141\u8BB8\u91CA\u653E <strong>Map</strong> \u6240\u5F15\u7528\u7684\u5BF9\u8C61\u3002\u5982\u679C\u5728 <strong>Map</strong> \u5916\u6CA1\u6709\u5BF9\u7279\u5B9A\u952E\u7684\u5F15\u7528\uFF0C\u5219\u53EF\u4EE5\u5BF9\u8BE5\u952E\u8FDB\u884C\u5783\u573E\u56DE\u6536\u3002</td></tr><tr><td style="text-align:center;"><strong>ConcurrentHashMap</strong></td><td style="text-align:left;">\u4E0D\u4F7F\u7528\u540C\u6B65\u9501\u5B9A\u7684\u7EBF\u7A0B\u5B89\u5168 <strong>Map</strong> \u3002\u8FD9\u5728<a href="">\u7B2C\u4E8C\u5341\u56DB\u7AE0 \u5E76\u53D1\u7F16\u7A0B</a> \u4E00\u7AE0\u4E2D\u8BA8\u8BBA\u3002</td></tr><tr><td style="text-align:center;"><strong>IdentityHashMap</strong></td><td style="text-align:left;">\u4F7F\u7528 <code>==</code> \u800C\u4E0D\u662F <code>equals()</code> \u6765\u6BD4\u8F83\u952E\u3002\u4EC5\u7528\u4E8E\u89E3\u51B3\u7279\u6B8A\u95EE\u9898\uFF0C\u4E0D\u9002\u7528\u4E8E\u4E00\u822C\u7528\u9014\u3002</td></tr></tbody></table><p>\u6563\u5217\u662F\u5728 <strong>Map</strong> \u4E2D\u5B58\u50A8\u5143\u7D20\u7684\u6700\u5E38\u7528\u65B9\u6CD5\u3002</p><p><strong>Map</strong> \u4E2D\u4F7F\u7528\u7684\u952E\u7684\u8981\u6C42\u4E0E <strong>Set</strong> \u4E2D\u7684\u5143\u7D20\u7684\u8981\u6C42\u76F8\u540C\u3002\u53EF\u4EE5\u5728 <strong>TypesForSets.java</strong> \u4E2D\u770B\u5230\u8FD9\u4E9B\u3002\u4EFB\u4F55\u952E\u5FC5\u987B\u5177\u6709 <code>equals()</code> \u65B9\u6CD5\u3002\u5982\u679C\u952E\u7528\u4E8E\u6563\u5217\u6620\u5C04\uFF0C\u5219\u5B83\u8FD8\u5FC5\u987B\u5177\u6709\u6B63\u786E\u7684 <code>hashCode()</code> \u65B9\u6CD5\u3002\u5982\u679C\u952E\u5728 <strong>TreeMap</strong> \u4E2D\u4F7F\u7528\uFF0C\u5219\u5FC5\u987B\u5B9E\u73B0 <strong>Comparable</strong> \u63A5\u53E3\u3002</p><p>\u4EE5\u4E0B\u793A\u4F8B\u4F7F\u7528\u5148\u524D\u5B9A\u4E49\u7684 <strong>CountMap</strong> \u6D4B\u8BD5\u6570\u636E\u96C6\u663E\u793A\u901A\u8FC7 <strong>Map</strong> \u63A5\u53E3\u53EF\u7528\u7684\u64CD\u4F5C\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/MapOps.java</span>
<span class="token comment">// Things you can do with Maps</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapOps</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">printKeys</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Size = &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Keys: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Produce a Set of the keys:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span>
  <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      map<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Map has &#39;Set&#39; behavior for keys:</span>
    map<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printKeys</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Producing a Collection of the values:</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Values: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;map.containsKey(11): &quot;</span> <span class="token operator">+</span>
      map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;map.get(11): &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;map.containsValue(\\&quot;F0\\&quot;): &quot;</span>
      <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">containsValue</span><span class="token punctuation">(</span><span class="token string">&quot;F0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> key <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;First key in map: &quot;</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printKeys</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;map.isEmpty(): &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Operations on the Set change the Map:</span>
    map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;map.isEmpty(): &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IdentityHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output: (First 11 Lines)
HashMap
Size = 25, Keys: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
Values: [A0, B0, C0, D0, E0, F0, G0, H0, I0, J0, K0,
L0, M0, N0, O0, P0, Q0, R0, S0, T0, U0, V0, W0, X0, Y0]
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0,
9=J0, 10=K0, 11=L0, 12=M0, 13=N0, 14=O0, 15=P0, 16=Q0,
17=R0, 18=S0, 19=T0, 20=U0, 21=V0, 22=W0, 23=X0, 24=Y0}
map.containsKey(11): true
map.get(11): L0
map.containsValue(&quot;F0&quot;): true
First key in map: 0
Size = 24, Keys: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,
12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
map.isEmpty(): true
map.isEmpty(): true
                  ...
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>printKeys()</code> \u65B9\u6CD5\u6F14\u793A\u4E86\u5982\u4F55\u751F\u6210 <strong>Map</strong> \u7684 <strong>Collection</strong> \u89C6\u56FE\u3002 <code>keySet()</code> \u65B9\u6CD5\u751F\u6210\u4E00\u4E2A\u7531 <strong>Map</strong> \u4E2D\u7684\u952E\u7EC4\u6210\u7684 <strong>Set</strong> \u3002 \u6253\u5370 <code>values()</code> \u65B9\u6CD5\u7684\u7ED3\u679C\u4F1A\u751F\u6210\u4E00\u4E2A\u5305\u542B <strong>Map</strong> \u4E2D\u6240\u6709\u503C\u7684 <strong>Collection</strong> \u3002\uFF08\u8BF7\u6CE8\u610F\uFF0C\u952E\u5FC5\u987B\u662F\u552F\u4E00\u7684\uFF0C\u4F46\u503C\u53EF\u4EE5\u5305\u542B\u91CD\u590D\u9879\u3002\uFF09\u7531\u4E8E\u8FD9\u4E9B <strong>Collection</strong> \u7531 <strong>Map</strong> \u652F\u6301\uFF0C\u56E0\u6B64 <strong>Collection</strong> \u4E2D\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u4F1A\u53CD\u6620\u5728\u6240\u5173\u8054\u7684 <strong>Map</strong> \u4E2D\u3002</p><p>\u7A0B\u5E8F\u7684\u5176\u4F59\u90E8\u5206\u63D0\u4F9B\u4E86\u6BCF\u4E2A <strong>Map</strong> \u64CD\u4F5C\u7684\u7B80\u5355\u793A\u4F8B\uFF0C\u5E76\u6D4B\u8BD5\u4E86\u6BCF\u79CD\u57FA\u672C\u7C7B\u578B\u7684 <strong>Map</strong> \u3002</p><h3 id="sortedmap" tabindex="-1"><a class="header-anchor" href="#sortedmap" aria-hidden="true">#</a> SortedMap</h3><p>\u4F7F\u7528 <strong>SortedMap</strong> \uFF08\u7531 <strong>TreeMap</strong> \u6216 <strong>ConcurrentSkipListMap</strong> \u5B9E\u73B0\uFF09\uFF0C\u952E\u4FDD\u8BC1\u6309\u6392\u5E8F\u987A\u5E8F\uFF0C\u8FD9\u5141\u8BB8\u5728 <strong>SortedMap</strong> \u63A5\u53E3\u4E2D\u4F7F\u7528\u8FD9\u4E9B\u65B9\u6CD5\u6765\u63D0\u4F9B\u5176\u4ED6\u529F\u80FD\uFF1A</p><ul><li><code>Comparator comparator()</code> \uFF1A\u751F\u6210\u7528\u4E8E\u6B64 <strong>Map</strong> \u7684\u6BD4\u8F83\u5668\uFF0C <strong>null</strong> \u8868\u793A\u81EA\u7136\u6392\u5E8F\u3002</li><li><code>T firstKey()</code> \uFF1A\u8FD4\u56DE\u7B2C\u4E00\u4E2A\u952E\u3002</li><li><code>T lastKey()</code> \uFF1A\u8FD4\u56DE\u6700\u540E\u4E00\u4E2A\u952E\u3002</li><li><code>SortedMap subMap(fromKey\uFF0CtoKey)</code> \uFF1A\u751F\u6210\u6B64 <strong>Map</strong> \u7684\u89C6\u56FE\uFF0C\u5176\u4E2D\u952E\u4ECE <strong>fromKey</strong>\uFF08\u5305\u62EC\uFF09\uFF0C\u5230 <strong>toKey</strong> \uFF08\u4E0D\u5305\u62EC\uFF09\u3002</li><li><code>SortedMap headMap(toKey)</code> \uFF1A\u4F7F\u7528\u5C0F\u4E8E <strong>toKey</strong> \u7684\u952E\u751F\u6210\u6B64 <strong>Map</strong> \u7684\u89C6\u56FE\u3002</li><li><code>SortedMap tailMap(fromKey)</code> \uFF1A\u4F7F\u7528\u5927\u4E8E\u6216\u7B49\u4E8E <strong>fromKey</strong> \u7684\u952E\u751F\u6210\u6B64 <strong>Map</strong> \u7684\u89C6\u56FE\u3002</li></ul><p>\u8FD9\u662F\u4E00\u4E2A\u7C7B\u4F3C\u4E8E <strong>SortedSetDemo.java</strong> \u7684\u793A\u4F8B\uFF0C\u663E\u793A\u4E86 <strong>TreeMap</strong> \u7684\u8FD9\u79CD\u989D\u5916\u884C\u4E3A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/SortedMapDemo.java</span>
<span class="token comment">// What you can do with a TreeMap</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SortedMapDemo</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortedMap <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> low <span class="token operator">=</span> sortedMap<span class="token punctuation">.</span><span class="token function">firstKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> high <span class="token operator">=</span> sortedMap<span class="token punctuation">.</span><span class="token function">lastKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span>
      sortedMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> low <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> high <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedMap<span class="token punctuation">.</span><span class="token function">subMap</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span> high<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedMap<span class="token punctuation">.</span><span class="token function">headMap</span><span class="token punctuation">(</span>high<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedMap<span class="token punctuation">.</span><span class="token function">tailMap</span><span class="token punctuation">(</span>low<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0,
9=J0}
0
9
3
7
{3=D0, 4=E0, 5=F0, 6=G0}
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0}
{3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0, 9=J0}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\uFF0C\u952E\u503C\u5BF9\u6309\u7167\u952E\u7684\u6392\u5E8F\u987A\u5E8F\u8FDB\u884C\u6392\u5E8F\u3002\u56E0\u4E3A <strong>TreeMap</strong> \u4E2D\u5B58\u5728\u987A\u5E8F\u611F\uFF0C\u6240\u4EE5\u201C\u4F4D\u7F6E\u201D\u7684\u6982\u5FF5\u5F88\u6709\u610F\u4E49\uFF0C\u56E0\u6B64\u53EF\u4EE5\u62E5\u6709\u7B2C\u4E00\u4E2A\u3001\u6700\u540E\u4E00\u4E2A\u5143\u7D20\u6216\u5B50\u56FE\u3002</p><h3 id="linkedhashmap" tabindex="-1"><a class="header-anchor" href="#linkedhashmap" aria-hidden="true">#</a> LinkedHashMap</h3><p><strong>LinkedHashMap</strong> \u9488\u5BF9\u901F\u5EA6\u8FDB\u884C\u54C8\u5E0C\u5904\u7406\uFF0C\u4F46\u5728\u904D\u5386\u671F\u95F4\u4E5F\u4F1A\u6309\u63D2\u5165\u987A\u5E8F\u751F\u6210\u952E\u503C\u5BF9\uFF08 <code>System.out.println()</code> \u53EF\u4EE5\u904D\u5386\u5B83\uFF0C\u56E0\u6B64\u53EF\u4EE5\u770B\u5230\u904D\u5386\u7684\u7ED3\u679C\uFF09\u3002 \u6B64\u5916\uFF0C\u53EF\u4EE5\u5728\u6784\u9020\u65B9\u6CD5\u4E2D\u914D\u7F6E <strong>LinkedHashMap</strong> \u4EE5\u4F7F\u7528\u57FA\u4E8E\u8BBF\u95EE\u7684 <em>\u6700\u8FD1\u6700\u5C11\u4F7F\u7528</em>\uFF08LRU\uFF09 \u7B97\u6CD5\uFF0C\u56E0\u6B64\u672A\u8BBF\u95EE\u7684\u5143\u7D20\uFF08\u56E0\u6B64\u662F\u5220\u9664\u7684\u5019\u9009\u8005\uFF09\u4F1A\u51FA\u73B0\u5728\u5217\u8868\u7684\u524D\u9762\u3002 \u8FD9\u6837\u53EF\u4EE5\u8F7B\u677E\u521B\u5EFA\u4E00\u4E2A\u80FD\u591F\u5B9A\u671F\u6E05\u7406\u4EE5\u8282\u7701\u7A7A\u95F4\u7684\u7A0B\u5E8F\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u663E\u793A\u8FD9\u4E24\u4E2A\u529F\u80FD\u7684\u7B80\u5355\u793A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/LinkedHashMapDemo.java</span>
<span class="token comment">// What you can do with a LinkedHashMap</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedHashMapDemo</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> linkedMap <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linkedMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Least-recently-used order:</span>
    linkedMap <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">0.75f</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    linkedMap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CountMap</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linkedMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      linkedMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linkedMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    linkedMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linkedMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0}
{0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 6=G0, 7=H0, 8=I0}
{6=G0, 7=H0, 8=I0, 0=A0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0}
{6=G0, 7=H0, 8=I0, 1=B0, 2=C0, 3=D0, 4=E0, 5=F0, 0=A0}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E9B\u952E\u503C\u5BF9\u786E\u5B9E\u662F\u6309\u7167\u63D2\u5165\u987A\u5E8F\u8FDB\u884C\u904D\u5386\uFF0C\u5373\u4F7F\u5BF9\u4E8ELRU\u7248\u672C\u4E5F\u662F\u5982\u6B64\u3002 \u4F46\u662F\uFF0C\u5728LRU\u7248\u672C\u4E2D\u8BBF\u95EE\u524D\u516D\u9879\uFF08\u4EC5\u9650\uFF09\u540E\uFF0C\u6700\u540E\u4E09\u9879\u5C06\u79FB\u81F3\u5217\u8868\u7684\u524D\u9762\u3002\u7136\u540E\uFF0C\u5F53\u518D\u6B21\u8BBF\u95EE\u201C <strong>0</strong> \u201D\u540E\uFF0C\u5B83\u79FB\u52A8\u5230\u4E86\u5217\u8868\u7684\u540E\u9762\u3002</p><h2 id="\u96C6\u5408\u5DE5\u5177\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u96C6\u5408\u5DE5\u5177\u7C7B" aria-hidden="true">#</a> \u96C6\u5408\u5DE5\u5177\u7C7B</h2><p>\u96C6\u5408\u6709\u8BB8\u591A\u72EC\u7ACB\u7684\u5B9E\u7528\u5DE5\u5177\u7A0B\u5E8F\uFF0C\u5728 <strong>java.util.Collections</strong> \u4E2D\u8868\u793A\u4E3A\u9759\u6001\u65B9\u6CD5\u3002\u4E4B\u524D\u5DF2\u7ECF\u89C1\u8FC7\u5176\u4E2D\u4E00\u4E9B\uFF0C\u4F8B\u5982 <code>addAll()</code> \uFF0C <code>reverseOrder()</code> \u548C <code>binarySearch()</code> \u3002\u4EE5\u4E0B\u662F\u5176\u4ED6\u5185\u5BB9\uFF08\u540C\u6B65\u548C\u4E0D\u53EF\u4FEE\u6539\u7684\u5B9E\u7528\u5DE5\u5177\u7A0B\u5E8F\u5C06\u5728\u540E\u9762\u7684\u7AE0\u8282\u4E2D\u4ECB\u7ECD\uFF09\u3002\u5728\u6B64\u8868\u4E2D\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u4F7F\u7528\u4E86\u6CDB\u578B\uFF1A</p><table><thead><tr><th style="text-align:left;">\u65B9\u6CD5</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>checkedCollection(Collection&lt;T&gt; c, Class&lt;T&gt; type)</strong> <br><br> <strong>checkedList(List&lt;T&gt; list, Class&lt;T&gt; type)</strong> <br><br> <strong>checkedMap(Map&lt;K, V&gt; m, Class&lt;K&gt; keyType, Class&lt;V&gt; valueType)</strong> <br><br> <strong>checkedSet(Set&lt;T&gt; s, Class&lt;T&gt; type)</strong> <br><br> <strong>checkedSortedMap(SortedMap&lt;K, V&gt; m, Class&lt;K&gt; keyType, Class&lt;V&gt; valueType)</strong> <br><br> <strong>checkedSortedSet(SortedSet&lt;T&gt; s, Class&lt;T&gt; type)</strong></td><td style="text-align:left;">\u751F\u6210 <strong>Collection</strong> \u7684\u52A8\u6001\u7C7B\u578B\u5B89\u5168\u89C6\u56FE\u6216 <strong>Collection</strong> \u7684\u7279\u5B9A\u5B50\u7C7B\u578B\u3002 \u5F53\u65E0\u6CD5\u4F7F\u7528\u9759\u6001\u68C0\u67E5\u7248\u672C\u65F6\u4F7F\u7528\u8FD9\u4E2A\u7248\u672C\u3002 <br><br> \u8FD9\u4E9B\u65B9\u6CD5\u7684\u4F7F\u7528\u5728<a href="">\u7B2C\u4E5D\u7AE0 \u591A\u6001</a>\u7AE0\u8282\u7684\u201C\u52A8\u6001\u7C7B\u578B\u5B89\u5168\u201D\u6807\u9898\u4E0B\u8FDB\u884C\u4E86\u5C55\u793A\u3002</td></tr><tr><td style="text-align:left;"><strong>max(Collection)</strong> <br><br> <strong>min(Collection)</strong></td><td style="text-align:left;">\u4F7F\u7528 <strong>Collection</strong> \u4E2D\u5BF9\u8C61\u7684\u81EA\u7136\u6BD4\u8F83\u65B9\u6CD5\u751F\u6210\u53C2\u6570\u96C6\u5408\u4E2D\u7684\u6700\u5927\u6216\u6700\u5C0F\u5143\u7D20\u3002</td></tr><tr><td style="text-align:left;"><strong>max(Collection, Comparator)</strong> <br><br> <strong>min(Collection, Comparator)</strong></td><td style="text-align:left;">\u4F7F\u7528 <strong>Comparator</strong> \u6307\u5B9A\u7684\u6BD4\u8F83\u65B9\u6CD5\u751F\u6210\u53C2\u6570\u96C6\u5408\u4E2D\u7684\u6700\u5927\u6216\u6700\u5C0F\u5143\u7D20\u3002</td></tr><tr><td style="text-align:left;"><strong>indexOfSubList(List source, List target)</strong></td><td style="text-align:left;">\u8FD4\u56DE <strong>target</strong> \u5728 <strong>source</strong> \u5185\u7B2C\u4E00\u6B21\u51FA\u73B0\u7684\u8D77\u59CB\u7D22\u5F15\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u5219\u8FD4\u56DE -1\u3002</td></tr><tr><td style="text-align:left;"><strong>lastIndexOfSubList(List source, List target)</strong></td><td style="text-align:left;">\u8FD4\u56DE <strong>target</strong> \u5728 <strong>source</strong> \u5185\u6700\u540E\u4E00\u6B21\u51FA\u73B0\u7684\u8D77\u59CB\u7D22\u5F15\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u5219\u8FD4\u56DE -1\u3002</td></tr><tr><td style="text-align:left;"><strong>replaceAll(List&lt;T&gt; list, T oldVal, T newVal)</strong></td><td style="text-align:left;">\u7528 <strong>newVal</strong> \u66FF\u6362\u5217\u8868\u4E2D\u6240\u6709\u7684 <strong>oldVal</strong> \u3002</td></tr><tr><td style="text-align:left;"><strong>reverse(List)</strong></td><td style="text-align:left;">\u53CD\u8F6C\u5217\u8868</td></tr><tr><td style="text-align:left;"><strong>reverseOrder()</strong> <br><br> <strong>reverseOrder(Comparator&lt;T&gt;)</strong></td><td style="text-align:left;">\u8FD4\u56DE\u4E00\u4E2A <strong>Comparator</strong> \uFF0C\u5B83\u4E0E\u96C6\u5408\u4E2D\u5B9E\u73B0\u4E86 <strong>comparable&lt;T&gt;</strong> \u63A5\u53E3\u7684\u5BF9\u8C61\u7684\u81EA\u7136\u987A\u5E8F\u76F8\u53CD\u3002\u7B2C\u4E8C\u4E2A\u7248\u672C\u98A0\u5012\u4E86\u6240\u63D0\u4F9B\u7684 <strong>Comparator</strong> \u7684\u987A\u5E8F\u3002</td></tr><tr><td style="text-align:left;"><strong>rotate(List, int distance)</strong></td><td style="text-align:left;">\u5C06\u6240\u6709\u5143\u7D20\u5411\u524D\u79FB\u52A8 <strong>distance</strong> \uFF0C\u5C06\u5C3E\u90E8\u7684\u5143\u7D20\u79FB\u5230\u5F00\u5934\u3002\uFF08\u8BD1\u8005\u6CE8\uFF1A\u5373\u5FAA\u73AF\u79FB\u52A8\uFF09</td></tr><tr><td style="text-align:left;"><strong>shuffle(List)</strong> <br><br> <strong>shuffle(List, Random)</strong></td><td style="text-align:left;">\u968F\u673A\u7F6E\u6362\u6307\u5B9A\u5217\u8868\uFF08\u5373\u6253\u4E71\u987A\u5E8F\uFF09\u3002\u7B2C\u4E00\u4E2A\u7248\u672C\u4F7F\u7528\u4E86\u9ED8\u8BA4\u7684\u968F\u673A\u5316\u6E90\uFF0C\u6216\u8005\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7B2C\u4E8C\u4E2A\u7248\u672C\uFF0C\u63D0\u4F9B\u81EA\u5DF1\u7684\u968F\u673A\u5316\u6E90\u3002</td></tr><tr><td style="text-align:left;"><strong>sort(List&lt;T&gt;)</strong> <br><br> <strong>sort(List&lt;T&gt;, Comparator&lt;? super T&gt; c)</strong></td><td style="text-align:left;">\u7B2C\u4E00\u4E2A\u7248\u672C\u4F7F\u7528\u5143\u7D20\u7684\u81EA\u7136\u987A\u5E8F\u6392\u5E8F\u8BE5 <strong>List&lt;T&gt;</strong> \u3002\u7B2C\u4E8C\u4E2A\u7248\u672C\u6839\u636E\u63D0\u4F9B\u7684 <strong>Comparator</strong> \u6392\u5E8F\u3002</td></tr><tr><td style="text-align:left;"><strong>copy(List&lt;? super T&gt; dest, List&lt;? extends T&gt; src)</strong></td><td style="text-align:left;">\u5C06 <strong>src</strong> \u4E2D\u7684\u5143\u7D20\u590D\u5236\u5230 <strong>dest</strong> \u3002</td></tr><tr><td style="text-align:left;"><strong>swap(List, int i, int j)</strong></td><td style="text-align:left;">\u4EA4\u6362 <strong>List</strong> \u4E2D\u4F4D\u7F6E <strong>i</strong> \u548C \u4F4D\u7F6E <strong>j</strong> \u7684\u5143\u7D20\u3002\u53EF\u80FD\u6BD4\u4F60\u624B\u5DE5\u7F16\u5199\u7684\u901F\u5EA6\u5FEB\u3002</td></tr><tr><td style="text-align:left;"><strong>fill(List&lt;? super T&gt;, T x)</strong></td><td style="text-align:left;">\u7528 <strong>x</strong> \u66FF\u6362 <strong>List</strong> \u4E2D\u7684\u6240\u6709\u5143\u7D20\u3002</td></tr><tr><td style="text-align:left;"><strong>nCopies(int n, T x)</strong></td><td style="text-align:left;">\u8FD4\u56DE\u5927\u5C0F\u4E3A <strong>n</strong> \u7684\u4E0D\u53EF\u53D8 <strong>List&lt;T&gt;</strong> \uFF0C\u5176\u5F15\u7528\u90FD\u6307\u5411 <strong>x</strong> \u3002</td></tr><tr><td style="text-align:left;"><strong>disjoint(Collection, Collection)</strong></td><td style="text-align:left;">\u5982\u679C\u4E24\u4E2A\u96C6\u5408\u6CA1\u6709\u5171\u540C\u5143\u7D20\uFF0C\u5219\u8FD4\u56DE <strong>true</strong> \u3002</td></tr><tr><td style="text-align:left;"><strong>frequency(Collection, Object x)</strong></td><td style="text-align:left;">\u8FD4\u56DE <strong>Collection</strong> \u4E2D\uFF0C\u7B49\u4E8E <strong>x</strong> \u7684\u5143\u7D20\u4E2A\u6570\u3002</td></tr><tr><td style="text-align:left;"><strong>emptyList()</strong> <br><br> <strong>emptyMap()</strong> <br><br> <strong>emptySet()</strong></td><td style="text-align:left;">\u8FD4\u56DE\u4E0D\u53EF\u53D8\u7684\u7A7A <strong>List</strong> \uFF0C <strong>Map</strong> \u6216 <strong>Set</strong> \u3002\u8FD9\u4E9B\u662F\u6CDB\u578B\u7684\uFF0C\u56E0\u6B64\u751F\u6210\u7684 <strong>Collection</strong> \u53EF\u4EE5\u88AB\u53C2\u6570\u5316\u4E3A\u6240\u9700\u7684\u7C7B\u578B\u3002</td></tr><tr><td style="text-align:left;"><strong>singleton(T x)</strong> <br><br> <strong>singletonList(T x)</strong> <br><br> <strong>singletonMap(K key, V value)</strong></td><td style="text-align:left;">\u751F\u6210\u4E00\u4E2A\u4E0D\u53EF\u53D8\u7684 <strong>List</strong> \uFF0C <strong>Set</strong> \u6216 <strong>Map</strong> \uFF0C\u5176\u4E2D\u53EA\u5305\u542B\u57FA\u4E8E\u7ED9\u5B9A\u53C2\u6570\u7684\u5355\u4E2A\u5143\u7D20\u3002</td></tr><tr><td style="text-align:left;"><strong>list(Enumeration&lt;T&gt; e)</strong></td><td style="text-align:left;">\u751F\u6210\u4E00\u4E2A <strong>ArrayList&lt;T&gt;</strong> \uFF0C\u5176\u4E2D\u5143\u7D20\u4E3A\uFF08\u65E7\u5F0F\uFF09 <strong>Enumeration</strong> \uFF08 <strong>Iterator</strong> \u7684\u524D\u8EAB\uFF09\u4E2D\u7684\u5143\u7D20\u3002\u7528\u4E8E\u4ECE\u9057\u7559\u4EE3\u7801\u5411\u65B0\u5F0F\u8F6C\u6362\u3002</td></tr><tr><td style="text-align:left;"><strong>enumeration(Collection&lt;T&gt;)</strong></td><td style="text-align:left;">\u4E3A\u53C2\u6570\u96C6\u5408\u751F\u6210\u4E00\u4E2A\u65E7\u5F0F\u7684 <strong>Enumeration&lt;T&gt;</strong> \u3002</td></tr></tbody></table><p>\u8BF7\u6CE8\u610F\uFF0C <code>min\uFF08)</code> \u548C <code>max()</code> \u4F7F\u7528 <strong>Collection</strong> \u5BF9\u8C61\uFF0C\u800C\u4E0D\u4F7F\u7528 <strong>List</strong> \uFF0C\u56E0\u6B64\u4E0D\u5FC5\u62C5\u5FC3\u662F\u5426\u5E94\u5BF9 <strong>Collection</strong> \u8FDB\u884C\u6392\u5E8F\u3002\uFF08\u5982\u524D\u6240\u8FF0\uFF0C\u5728\u6267\u884C <code>binarySearch()</code> \u4E4B\u524D\uFF0C\u5C06\u4F1A\u5BF9 <strong>List</strong> \u6216\u6570\u7EC4\u8FDB\u884C<code>sort()</code> \u6392\u5E8F\u3002\uFF09</p><p>\u4E0B\u9762\u662F\u4E00\u4E2A\u793A\u4F8B\uFF0C\u5C55\u793A\u4E86\u4E0A\u8868\u4E2D\u5927\u591A\u6570\u5B9E\u7528\u5DE5\u5177\u7A0B\u5E8F\u7684\u57FA\u672C\u7528\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Utilities.java</span>
<span class="token comment">// Simple demonstrations of the Collections utilities</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Utilities</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
    <span class="token string">&quot;one Two three Four five six one&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#39;list&#39; disjoint (Four)?: &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">disjoint</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>
        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token string">&quot;Four&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;max: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;min: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;max w/ comparator: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>
      <span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;min w/ comparator: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>
      <span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sublist <span class="token operator">=</span>
      <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;Four five six&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;indexOfSubList: &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">indexOfSubList</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> sublist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lastIndexOfSubList: &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">lastIndexOfSubList</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> sublist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Yo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;replaceAll: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;reverse: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;rotate: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> source <span class="token operator">=</span>
      <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;in the matrix&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;copy: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;swap: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;shuffled: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;pop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;fill: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;frequency of &#39;pop&#39;: &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">frequency</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;pop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> dups <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">nCopies</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;snap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dups: &quot;</span> <span class="token operator">+</span> dups<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&#39;list&#39; disjoint &#39;dups&#39;?: &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">disjoint</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> dups<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Getting an old-style Enumeration:</span>
    <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">enumeration</span><span class="token punctuation">(</span>dups<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      v<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Converting an old-style Vector</span>
    <span class="token comment">// to a List via an Enumeration:</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arrayList <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;arrayList: &quot;</span> <span class="token operator">+</span> arrayList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[one, Two, three, Four, five, six, one]
&#39;list&#39; disjoint (Four)?: false
max: three
min: Four
max w/ comparator: Two
min w/ comparator: five
indexOfSubList: 3
lastIndexOfSubList: 3
replaceAll: [Yo, Two, three, Four, five, six, Yo]
reverse: [Yo, six, five, Four, three, Two, Yo]
rotate: [three, Two, Yo, Yo, six, five, Four]
copy: [in, the, matrix, Yo, six, five, Four]
swap: [Four, the, matrix, Yo, six, five, in]
shuffled: [six, matrix, the, Four, Yo, five, in]
fill: [pop, pop, pop, pop, pop, pop, pop]
frequency of &#39;pop&#39;: 7
dups: [snap, snap, snap]
&#39;list&#39; disjoint &#39;dups&#39;?: true
arrayList: [snap, snap, snap]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u89E3\u91CA\u4E86\u6BCF\u79CD\u5B9E\u7528\u65B9\u6CD5\u7684\u884C\u4E3A\u3002\u8BF7\u6CE8\u610F\u7531\u4E8E\u5927\u5C0F\u5199\u7684\u7F18\u6545\uFF0C\u666E\u901A\u7248\u672C\u7684 <code>min()</code> \u548C <code>max()</code> \u4E0E\u5E26\u6709 <strong>String.CASE_INSENSITIVE_ORDER</strong> \u6BD4\u8F83\u5668\u53C2\u6570\u7684\u7248\u672C\u7684\u533A\u522B\u3002</p><h3 id="\u6392\u5E8F\u548C\u641C\u7D22\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#\u6392\u5E8F\u548C\u641C\u7D22\u5217\u8868" aria-hidden="true">#</a> \u6392\u5E8F\u548C\u641C\u7D22\u5217\u8868</h3><p>\u7528\u4E8E\u6267\u884C\u6392\u5E8F\u548C\u641C\u7D22 <strong>List</strong> \u7684\u5B9E\u7528\u5DE5\u5177\u7A0B\u5E8F\u4E0E\u7528\u4E8E\u6392\u5E8F\u5BF9\u8C61\u6570\u7EC4\u7684\u7A0B\u5E8F\u5177\u6709\u76F8\u540C\u7684\u540D\u5B57\u548C\u65B9\u6CD5\u7B7E\u540D\uFF0C\u53EA\u4E0D\u8FC7\u662F <strong>Collections</strong> \u7684\u9759\u6001\u65B9\u6CD5\u800C\u4E0D\u662F <strong>Arrays</strong> \u3002 \u8FD9\u662F\u4E00\u4E2A\u4F7F\u7528 <strong>Utilities.java</strong> \u4E2D\u7684 <strong>list</strong> \u6570\u636E\u7684\u793A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/ListSortSearch.java</span>
<span class="token comment">// Sorting/searching Lists with Collections utilities</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListSortSearch</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Utilities</span><span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Utilities</span><span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Shuffled: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Use ListIterator to trim off last elements:</span>
    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Trimmed: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Sorted: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> key <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Location of &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> index <span class="token operator">+</span>
      <span class="token string">&quot;, list.get(&quot;</span> <span class="token operator">+</span> index <span class="token operator">+</span> <span class="token string">&quot;) = &quot;</span> <span class="token operator">+</span>
      list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span>
      <span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Case-insensitive sorted: &quot;</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    key <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    index <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">binarySearch</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
      <span class="token class-name">String</span><span class="token punctuation">.</span>CASE_INSENSITIVE_ORDER<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;Location of &quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot; is &quot;</span> <span class="token operator">+</span> index <span class="token operator">+</span>
      <span class="token string">&quot;, list.get(&quot;</span> <span class="token operator">+</span> index <span class="token operator">+</span> <span class="token string">&quot;) = &quot;</span> <span class="token operator">+</span>
      list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[one, Two, three, Four, five, six, one, one, Two,
three, Four, five, six, one]
Shuffled: [Four, five, one, one, Two, six, six, three,
three, five, Four, Two, one, one]
Trimmed: [Four, five, one, one, Two, six, six, three,
three, five]
Sorted: [Four, Two, five, five, one, one, six, six,
three, three]
Location of six is 7, list.get(7) = six
Case-insensitive sorted: [five, five, Four, one, one,
six, six, three, three, Two]
Location of three is 7, list.get(7) = three
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C31\u50CF\u4F7F\u7528\u6570\u7EC4\u8FDB\u884C\u641C\u7D22\u548C\u6392\u5E8F\u4E00\u6837\uFF0C\u5982\u679C\u4F7F\u7528 <strong>Comparator</strong> \u8FDB\u884C\u6392\u5E8F\uFF0C\u5219\u5FC5\u987B\u4F7F\u7528\u76F8\u540C\u7684 <strong>Comparator</strong> \u6267\u884C <code>binarySearch()</code> \u3002</p><p>\u8BE5\u7A0B\u5E8F\u8FD8\u6F14\u793A\u4E86 <strong>Collections</strong> \u4E2D\u7684 <code>shuffle()</code> \u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u968F\u673A\u6253\u4E71\u4E86 <strong>List</strong> \u7684\u987A\u5E8F\u3002 <strong>ListIterator</strong> \u662F\u5728\u6253\u4E71\u540E\u7684\u5217\u8868\u4E2D\u7684\u7279\u5B9A\u4F4D\u7F6E\u521B\u5EFA\u7684\uFF0C\u7528\u4E8E\u4ECE\u8BE5\u4F4D\u7F6E\u5220\u9664\u5143\u7D20\uFF0C\u76F4\u5230\u5217\u8868\u672B\u5C3E\u3002</p><h3 id="\u521B\u5EFA\u4E0D\u53EF\u4FEE\u6539\u7684-collection-\u6216-map" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u4E0D\u53EF\u4FEE\u6539\u7684-collection-\u6216-map" aria-hidden="true">#</a> \u521B\u5EFA\u4E0D\u53EF\u4FEE\u6539\u7684 Collection \u6216 Map</h3><p>\u901A\u5E38\uFF0C\u521B\u5EFA <strong>Collection</strong> \u6216 <strong>Map</strong> \u7684\u53EA\u8BFB\u7248\u672C\u4F1A\u5F88\u65B9\u4FBF\u3002 <strong>Collections</strong> \u7C7B\u901A\u8FC7\u5C06\u539F\u59CB\u96C6\u5408\u4F20\u9012\u7ED9\u4E00\u4E2A\u65B9\u6CD5\u7136\u540E\u8FD4\u56DE\u4E00\u4E2A\u53EA\u8BFB\u7248\u672C\u7684\u96C6\u5408\u3002 \u5BF9\u4E8E <strong>Collection</strong> \uFF08\u5982\u679C\u4E0D\u80FD\u5C06 <strong>Collection</strong> \u89C6\u4E3A\u66F4\u5177\u4F53\u7684\u7C7B\u578B\uFF09\uFF0C <strong>List</strong> \uFF0C <strong>Set</strong> \u548C <strong>Map</strong> \uFF0C\u8FD9\u7C7B\u65B9\u6CD5\u6709\u8BB8\u591A\u53D8\u4F53\u3002\u8FD9\u4E2A\u793A\u4F8B\u5C55\u793A\u4E86\u9488\u5BF9\u6BCF\u79CD\u7C7B\u578B\uFF0C\u6B63\u786E\u6784\u5EFA\u53EA\u8BFB\u7248\u672C\u96C6\u5408\u7684\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/ReadOnly.java</span>
<span class="token comment">// Using the Collections.unmodifiable methods</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadOnly</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> data <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Countries</span><span class="token punctuation">.</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableCollection</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reading is OK</span>
    <span class="token comment">//- c.add(&quot;one&quot;); // Can&#39;t change it</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> a <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lit <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lit<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reading is OK</span>
    <span class="token comment">//- lit.add(&quot;one&quot;); // Can&#39;t change it</span>

    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableSet</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reading is OK</span>
    <span class="token comment">//- s.add(&quot;one&quot;); // Can&#39;t change it</span>

    <span class="token comment">// For a SortedSet:</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ss <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableSortedSet</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Countries</span><span class="token punctuation">.</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Reading is OK</span>
    <span class="token comment">//- m.put(&quot;Ralph&quot;, &quot;Howdy!&quot;);</span>

    <span class="token comment">// For a SortedMap:</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sm <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableSortedMap</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Countries</span><span class="token punctuation">.</span><span class="token function">capitals</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
[ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI]
ALGERIA
[BENIN, BOTSWANA, ANGOLA, BURKINA FASO, ALGERIA,
BURUNDI]
{BENIN=Porto-Novo, BOTSWANA=Gaberone, ANGOLA=Luanda,
BURKINA FASO=Ouagadougou, ALGERIA=Algiers,
BURUNDI=Bujumbura}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u7279\u5B9A\u7C7B\u578B\u8C03\u7528 \u201Cunmodifiable\u201D \u65B9\u6CD5\u4E0D\u4F1A\u5BFC\u81F4\u7F16\u8BD1\u65F6\u68C0\u67E5\uFF0C\u4F46\u662F\u4E00\u65E6\u53D1\u751F\u8F6C\u6362\uFF0C\u5BF9\u4FEE\u6539\u7279\u5B9A\u96C6\u5408\u5185\u5BB9\u7684\u4EFB\u4F55\u65B9\u6CD5\u8C03\u7528\u90FD\u5C06\u4EA7\u751F <strong>UnsupportedOperationException</strong> \u5F02\u5E38\u3002</p><p>\u5728\u6BCF\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5728\u5C06\u96C6\u5408\u8BBE\u7F6E\u4E3A\u53EA\u8BFB\u4E4B\u524D\uFF0C\u5FC5\u987B\u4F7F\u7528\u6709\u610F\u4E49\u7684\u6570\u636E\u586B\u5145\u96C6\u5408\u3002\u586B\u5145\u5B8C\u6210\u540E\uFF0C\u6700\u597D\u7684\u65B9\u6CD5\u662F\u7528 \u201Cunmodifiable\u201D \u65B9\u6CD5\u8C03\u7528\u751F\u6210\u7684\u5F15\u7528\u66FF\u6362\u73B0\u6709\u5F15\u7528\u3002\u8FD9\u6837\uFF0C\u4E00\u65E6\u4F7F\u5F97\u5185\u5BB9\u65E0\u6CD5\u4FEE\u6539\uFF0C\u90A3\u4E48\u5C31\u4E0D\u4F1A\u5192\u6709\u610F\u5916\u66F4\u6539\u5185\u5BB9\u7684\u98CE\u9669\u3002\u53E6\u4E00\u65B9\u9762\uFF0C\u6B64\u5DE5\u5177\u8FD8\u5141\u8BB8\u5C06\u53EF\u4FEE\u6539\u7684\u96C6\u5408\u4FDD\u7559\u4E3A\u7C7B\u4E2D\u7684<strong>\u79C1\u6709</strong>\u96C6\u5408\uFF0C\u5E76\u4ECE\u65B9\u6CD5\u8C03\u7528\u5904\u8FD4\u56DE\u5BF9\u8BE5\u96C6\u5408\u7684\u53EA\u8BFB\u5F15\u7528\u3002\u6240\u4EE5\uFF0C\u4F60\u53EF\u4EE5\u5728\u7C7B\u5185\u4FEE\u6539\u5B83\uFF0C\u4F46\u5176\u4ED6\u4EBA\u53EA\u80FD\u8BFB\u5B83\u3002</p><h3 id="\u540C\u6B65-collection-\u6216-map" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65-collection-\u6216-map" aria-hidden="true">#</a> \u540C\u6B65 Collection \u6216 Map</h3><p><strong>synchronized</strong> \u5173\u952E\u5B57\u662F\u591A\u7EBF\u7A0B\u4E3B\u9898\u7684\u91CD\u8981\u7EC4\u6210\u90E8\u5206\uFF0C\u66F4\u590D\u6742\u7684\u5185\u5BB9\u5728<a href="">\u7B2C\u4E8C\u5341\u56DB\u7AE0 \u5E76\u53D1\u7F16\u7A0B</a>\u4E2D\u4ECB\u7ECD\u3002\u5728\u8FD9\u91CC\uFF0C\u53EA\u9700\u8981\u6CE8\u610F\u5230 <strong>Collections</strong> \u7C7B\u5305\u542B\u4E00\u79CD\u81EA\u52A8\u540C\u6B65\u6574\u4E2A\u96C6\u5408\u7684\u65B9\u6CD5\u3002 \u8BED\u6CD5\u7C7B\u4F3C\u4E8E \u201Cunmodifiable\u201D \u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Synchronization.java</span>
<span class="token comment">// Using the Collections.synchronized methods</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Synchronization</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span>
      <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedCollection</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Collections</span>
      <span class="token punctuation">.</span><span class="token function">synchronizedList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span> <span class="token class-name">Collections</span>
      <span class="token punctuation">.</span><span class="token function">synchronizedSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ss <span class="token operator">=</span> <span class="token class-name">Collections</span>
      <span class="token punctuation">.</span><span class="token function">synchronizedSortedSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> m <span class="token operator">=</span> <span class="token class-name">Collections</span>
      <span class="token punctuation">.</span><span class="token function">synchronizedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sm <span class="token operator">=</span> <span class="token class-name">Collections</span>
      <span class="token punctuation">.</span><span class="token function">synchronizedSortedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6700\u597D\u7ACB\u5373\u901A\u8FC7\u9002\u5F53\u7684 \u201Csynchronized\u201D \u65B9\u6CD5\u4F20\u9012\u65B0\u96C6\u5408\uFF0C\u5982\u4E0A\u6240\u793A\u3002\u8FD9\u6837\uFF0C\u5C31\u4E0D\u4F1A\u610F\u5916\u5730\u66B4\u9732\u51FA\u975E\u540C\u6B65\u7248\u672C\u3002</p><h4 id="fail-fast" tabindex="-1"><a class="header-anchor" href="#fail-fast" aria-hidden="true">#</a> Fail Fast</h4><p>Java \u96C6\u5408\u8FD8\u5177\u6709\u9632\u6B62\u591A\u4E2A\u8FDB\u7A0B\u4FEE\u6539\u96C6\u5408\u5185\u5BB9\u7684\u673A\u5236\u3002\u5982\u679C\u5F53\u524D\u6B63\u5728\u8FED\u4EE3\u96C6\u5408\uFF0C\u7136\u540E\u6709\u5176\u4ED6\u4E00\u4E9B\u8FDB\u7A0B\u4ECB\u5165\u5E76\u63D2\u5165\uFF0C\u5220\u9664\u6216\u66F4\u6539\u8BE5\u96C6\u5408\u4E2D\u7684\u5BF9\u8C61\uFF0C\u5219\u4F1A\u51FA\u73B0\u6B64\u95EE\u9898\u3002\u4E5F\u8BB8\u5728\u96C6\u5408\u4E2D\u5DF2\u7ECF\u904D\u5386\u8FC7\u4E86\u90A3\u4E2A\u5143\u7D20\uFF0C\u4E5F\u8BB8\u8FD8\u6CA1\u6709\u904D\u5386\u5230\uFF0C\u4E5F\u8BB8\u5728\u8C03\u7528 <code>size()</code> \u4E4B\u540E\u96C6\u5408\u7684\u5927\u5C0F\u4F1A\u7F29\u5C0F...\u6709\u8BB8\u591A\u707E\u96BE\u60C5\u666F\u3002 Java \u96C6\u5408\u5E93\u4F7F\u7528\u4E00\u79CD <em>fail-fast</em> \u7684\u673A\u5236\uFF0C\u8BE5\u673A\u5236\u53EF\u4EE5\u68C0\u6D4B\u5230\u9664\u4E86\u5F53\u524D\u8FDB\u7A0B\u5F15\u8D77\u7684\u66F4\u6539\u4E4B\u5916\uFF0C\u5176\u5B83\u4EFB\u4F55\u5BF9\u96C6\u5408\u7684\u66F4\u6539\u64CD\u4F5C\u3002\u5982\u679C\u5B83\u68C0\u6D4B\u5230\u5176\u4ED6\u4EBA\u6B63\u5728\u4FEE\u6539\u96C6\u5408\uFF0C\u5219\u4F1A\u7ACB\u5373\u751F\u6210 <strong>ConcurrentModificationException</strong> \u5F02\u5E38\u3002\u8FD9\u5C31\u662F\u201Cfail-fast\u201D\u7684\u542B\u4E49\u2014\u2014\u5B83\u4E0D\u4F1A\u5728\u4EE5\u540E\u4F7F\u7528\u66F4\u590D\u6742\u7684\u7B97\u6CD5\u5C1D\u8BD5\u68C0\u6D4B\u95EE\u9898\uFF08\u5FEB\u901F\u5931\u8D25\uFF09\u3002</p><p>\u901A\u8FC7\u521B\u5EFA\u8FED\u4EE3\u5668\u5E76\u5411\u8FED\u4EE3\u5668\u6307\u5411\u7684\u96C6\u5408\u4E2D\u6DFB\u52A0\u5143\u7D20\uFF0C\u53EF\u4EE5\u5F88\u5BB9\u6613\u5730\u770B\u5230\u64CD\u4F5C\u4E2D\u7684 fail-fast \u673A\u5236\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/FailFast.java</span>
<span class="token comment">// Demonstrates the &quot;fail-fast&quot; behavior</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FailFast</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;An object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> s <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ConcurrentModificationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
java.util.ConcurrentModificationException
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F02\u5E38\u6765\u81EA\u4E8E\u5728\u4ECE\u96C6\u5408\u4E2D\u83B7\u5F97\u8FED\u4EE3\u5668\u4E4B\u540E\uFF0C\u53C8\u5C1D\u8BD5\u5728\u96C6\u5408\u4E2D\u6DFB\u52A0\u5143\u7D20\u3002\u7A0B\u5E8F\u7684\u4E24\u4E2A\u90E8\u5206\u53EF\u80FD\u4F1A\u4FEE\u6539\u540C\u4E00\u4E2A\u96C6\u5408\uFF0C\u8FD9\u79CD\u53EF\u80FD\u6027\u7684\u5B58\u5728\u4F1A\u4EA7\u751F\u4E0D\u786E\u5B9A\u72B6\u6001\uFF0C\u56E0\u6B64\u5F02\u5E38\u4F1A\u901A\u77E5\u4F60\u66F4\u6539\u4EE3\u7801\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5E94\u5148\u5C06\u6240\u6709\u5143\u7D20\u6DFB\u52A0\u5230\u96C6\u5408\uFF0C\u7136\u540E\u518D\u83B7\u53D6\u8FED\u4EE3\u5668\u3002</p><p><strong>ConcurrentHashMap</strong> \uFF0C <strong>CopyOnWriteArrayList</strong> \u548C <strong>CopyOnWriteArraySet</strong> \u4F7F\u7528\u4E86\u7279\u5B9A\u7684\u6280\u672F\u6765\u907F\u514D\u4EA7\u751F <strong>ConcurrentModificationException</strong> \u5F02\u5E38\u3002</p><h2 id="\u6301\u6709\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#\u6301\u6709\u5F15\u7528" aria-hidden="true">#</a> \u6301\u6709\u5F15\u7528</h2><p><strong>java.lang.ref</strong> \u4E2D\u5E93\u5305\u542B\u4E00\u7EC4\u7C7B\uFF0C\u8FD9\u4E9B\u7C7B\u5141\u8BB8\u5783\u573E\u6536\u96C6\u5177\u6709\u66F4\u5927\u7684\u7075\u6D3B\u6027\u3002\u7279\u522B\u662F\u5F53\u62E5\u6709\u53EF\u80FD\u5BFC\u81F4\u5185\u5B58\u8017\u5C3D\u7684\u5927\u5BF9\u8C61\u65F6\uFF0C\u8FD9\u4E9B\u7C7B\u7279\u522B\u6709\u7528\u3002\u8FD9\u91CC\u6709\u4E09\u4E2A\u4ECE\u62BD\u8C61\u7C7B <strong>Reference</strong> \u7EE7\u627F\u6765\u7684\u7C7B\uFF1A <strong>SoftReference</strong> \uFF08\u8F6F\u5F15\u7528\uFF09\uFF0C <strong>WeakReference</strong> \uFF08\u5F31\u5F15\u7528\uFF09\u548C <strong>PhantomReference</strong> \uFF08\u865A\u5F15\u7528\uFF09\u7EE7\u627F\u4E86\u4E09\u4E2A\u7C7B\u3002\u5982\u679C\u4E00\u4E2A\u5BF9\u8C61\u53EA\u80FD\u901A\u8FC7\u8FD9\u5176\u4E2D\u7684\u4E00\u4E2A <strong>Reference</strong> \u5BF9\u8C61\u8BBF\u95EE\uFF0C\u90A3\u4E48\u8FD9\u4E09\u79CD\u7C7B\u578B\u6BCF\u4E2A\u90FD\u4E3A\u5783\u573E\u6536\u96C6\u5668\u63D0\u4F9B\u4E0D\u540C\u7EA7\u522B\u7684\u95F4\u63A5\u5F15\u7528\uFF08indirection\uFF09\u3002</p><p>\u5982\u679C\u4E00\u4E2A\u5BF9\u8C61\u662F <em>\u53EF\u8FBE\u7684</em>\uFF08reachable\uFF09\uFF0C\u90A3\u4E48\u610F\u5473\u7740\u5728\u7A0B\u5E8F\u4E2D\u7684\u67D0\u4E2A\u4F4D\u7F6E\u53EF\u4EE5\u627E\u5230\u8BE5\u5BF9\u8C61\u3002\u8FD9\u53EF\u80FD\u610F\u5473\u7740\u5728\u6808\u4E0A\u6709\u4E00\u4E2A\u76F4\u63A5\u5F15\u7528\u8BE5\u5BF9\u8C61\u7684\u666E\u901A\u5F15\u7528\uFF0C\u4F46\u4E5F\u6709\u53EF\u80FD\u662F\u5F15\u7528\u4E86\u4E00\u4E2A\u5BF9\u8BE5\u5BF9\u8C61\u6709\u5F15\u7528\u7684\u5BF9\u8C61\uFF0C\u8FD9\u53EF\u4EE5\u6709\u5F88\u591A\u4E2D\u95F4\u73AF\u8282\u3002\u5982\u679C\u67D0\u4E2A\u5BF9\u8C61\u662F\u53EF\u8FBE\u7684\uFF0C\u5219\u5783\u573E\u6536\u96C6\u5668\u65E0\u6CD5\u91CA\u653E\u5B83\uFF0C\u56E0\u4E3A\u5B83\u4ECD\u7136\u88AB\u7A0B\u5E8F\u6240\u4F7F\u7528\u3002\u5982\u679C\u67D0\u4E2A\u5BF9\u8C61\u662F\u4E0D\u53EF\u8FBE\u7684\uFF0C\u5219\u7A0B\u5E8F\u65E0\u6CD5\u4F7F\u7528\u5B83\uFF0C\u90A3\u4E48\u5783\u573E\u6536\u96C6\u5668\u56DE\u6536\u8BE5\u5BF9\u8C61\u5C31\u662F\u5B89\u5168\u7684\u3002</p><p>\u4F7F\u7528 <strong>Reference</strong> \u5BF9\u8C61\u7EE7\u7EED\u4FDD\u6301\u5BF9\u8BE5\u5BF9\u8C61\u7684\u5F15\u7528\uFF0C\u4EE5\u5230\u8FBE\u8BE5\u5BF9\u8C61\uFF0C\u4F46\u4E5F\u5141\u8BB8\u5783\u573E\u6536\u96C6\u5668\u91CA\u653E\u8BE5\u5BF9\u8C61\u3002\u56E0\u6B64\uFF0C\u7A0B\u5E8F\u53EF\u4EE5\u4F7F\u7528\u8BE5\u5BF9\u8C61\uFF0C\u4F46\u5982\u679C\u5185\u5B58\u5373\u5C06\u8017\u5C3D\uFF0C\u5219\u5141\u8BB8\u91CA\u653E\u8BE5\u5BF9\u8C61\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528 <strong>Reference</strong> \u5BF9\u8C61\u4F5C\u4E3A\u4F60\u548C\u666E\u901A\u5F15\u7528\u4E4B\u95F4\u7684\u4E2D\u4ECB\uFF08\u4EE3\u7406\uFF09\u6765\u5B9E\u73B0\u6B64\u76EE\u7684\u3002\u6B64\u5916\uFF0C\u5FC5\u987B\u6CA1\u6709\u5BF9\u8C61\u7684\u666E\u901A\u5F15\u7528\uFF08\u672A\u5305\u542B\u5728 <strong>Reference</strong> \u5BF9\u8C61\u4E2D\u7684\u5BF9\u8C61\uFF09\u3002\u5982\u679C\u5783\u573E\u6536\u96C6\u5668\u53D1\u73B0\u5BF9\u8C61\u53EF\u901A\u8FC7\u666E\u901A\u5F15\u7528\u8BBF\u95EE\uFF0C\u5219\u5B83\u4E0D\u4F1A\u91CA\u653E\u8BE5\u5BF9\u8C61\u3002</p><p>\u6309\u7167 <strong>SoftReference</strong> \uFF0C <strong>WeakReference</strong> \u548C <strong>PhantomReference</strong> \u7684\u987A\u5E8F\uFF0C\u6BCF\u4E2A\u90FD\u6BD4\u524D\u4E00\u4E2A\u66F4\u201C\u5F31\u201D\uFF0C\u5E76\u4E14\u5BF9\u5E94\u4E8E\u4E0D\u540C\u7684\u53EF\u8FBE\u6027\u7EA7\u522B\u3002\u8F6F\u5F15\u7528\u7528\u4E8E\u5B9E\u73B0\u5BF9\u5185\u5B58\u654F\u611F\u7684\u7F13\u5B58\u3002\u5F31\u5F15\u7528\u7528\u4E8E\u5B9E\u73B0\u201C\u89C4\u8303\u5316\u6620\u5C04\u201D\uFF08 canonicalized mappings\uFF09\u2014\u2014\u5BF9\u8C61\u7684\u5B9E\u4F8B\u53EF\u4EE5\u5728\u7A0B\u5E8F\u7684\u591A\u4E2A\u4F4D\u7F6E\u540C\u65F6\u4F7F\u7528\uFF0C\u4EE5\u8282\u7701\u5B58\u50A8\uFF0C\u4F46\u4E0D\u4F1A\u963B\u6B62\u5176\u952E\uFF08\u6216\u503C\uFF09\u88AB\u56DE\u6536\u3002\u865A\u5F15\u7528\u7528\u4E8E\u8C03\u5EA6 pre-mortem \u6E05\u7406\u64CD\u4F5C\uFF0C\u8FD9\u662F\u4E00\u79CD\u6BD4 Java \u7EC8\u7ED3\u673A\u5236\uFF08Java finalization mechanism\uFF09\u66F4\u7075\u6D3B\u7684\u65B9\u5F0F\u3002</p><p>\u4F7F\u7528 <strong>SoftReference</strong> \u548C <strong>WeakReference</strong> \uFF0C\u53EF\u4EE5\u9009\u62E9\u662F\u5426\u5C06\u5B83\u4EEC\u653E\u5728 <strong>ReferenceQueue</strong> \uFF08\u7528\u4E8E pre-mortem \u6E05\u7406\u64CD\u4F5C\u7684\u8BBE\u5907\uFF09\u4E2D\uFF0C\u4F46 <strong>PhantomReference</strong> \u53EA\u80FD\u5728 <strong>ReferenceQueue</strong> \u4E0A\u6784\u5EFA\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u6F14\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/References.java</span>
<span class="token comment">// Demonstrates Reference objects</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">VeryBig</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SIZE <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> la <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span>SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ident<span class="token punctuation">;</span>
  <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> ident <span class="token operator">=</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> ident<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Finalizing &quot;</span> <span class="token operator">+</span> ident<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">References</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ReferenceQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span></span> rq <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">ReferenceQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">checkQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Reference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span></span> inq <span class="token operator">=</span> rq<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>inq <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In queue: &quot;</span> <span class="token operator">+</span> inq<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// Or, choose size via the command line:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
      size <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SoftReference</span><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> sa <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sa<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SoftReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token string">&quot;Soft &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> rq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Just created: &quot;</span> <span class="token operator">+</span> sa<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">checkQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WeakReference</span><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> wa <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      wa<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token string">&quot;Weak &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> rq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Just created: &quot;</span> <span class="token operator">+</span> wa<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">checkQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">SoftReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span></span> s <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">SoftReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token string">&quot;Soft&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span></span> w <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token string">&quot;Weak&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PhantomReference</span><span class="token punctuation">&lt;</span><span class="token class-name">VeryBig</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> pa <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pa<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PhantomReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">VeryBig</span><span class="token punctuation">(</span><span class="token string">&quot;Phantom &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> rq<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Just created: &quot;</span> <span class="token operator">+</span> pa<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">checkQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output: (First and Last 10 Lines)
Just created: java.lang.ref.SoftReference@15db9742
Just created: java.lang.ref.SoftReference@6d06d69c
Just created: java.lang.ref.SoftReference@7852e922
Just created: java.lang.ref.SoftReference@4e25154f
Just created: java.lang.ref.SoftReference@70dea4e
Just created: java.lang.ref.SoftReference@5c647e05
Just created: java.lang.ref.SoftReference@33909752
Just created: java.lang.ref.SoftReference@55f96302
Just created: java.lang.ref.SoftReference@3d4eac69
Just created: java.lang.ref.SoftReference@42a57993
...________...________...________...________...
Just created: java.lang.ref.PhantomReference@45ee12a7
In queue: null
Just created: java.lang.ref.PhantomReference@330bedb4
In queue: null
Just created: java.lang.ref.PhantomReference@2503dbd3
In queue: null
Just created: java.lang.ref.PhantomReference@4b67cf4d
In queue: null
Just created: java.lang.ref.PhantomReference@7ea987ac
In queue: null
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u8FD0\u884C\u6B64\u7A0B\u5E8F\uFF08\u5C06\u8F93\u51FA\u91CD\u5B9A\u5411\u5230\u6587\u672C\u6587\u4EF6\u4EE5\u67E5\u770B\u9875\u9762\u4E2D\u7684\u8F93\u51FA\uFF09\u65F6\uFF0C\u5C06\u4F1A\u770B\u5230\u5BF9\u8C61\u662F\u88AB\u5783\u573E\u6536\u96C6\u4E86\u7684\uFF0C\u867D\u7136\u4ECD\u7136\u53EF\u4EE5\u901A\u8FC7 <strong>Reference</strong> \u5BF9\u8C61\u8BBF\u95EE\u5B83\u4EEC\uFF08\u4F7F\u7528 <code>get()</code> \u6765\u83B7\u53D6\u5B9E\u9645\u7684\u5BF9\u8C61\u5F15\u7528\uFF09\u3002 \u8FD8\u53EF\u4EE5\u770B\u5230 <strong>ReferenceQueue</strong> \u59CB\u7EC8\u751F\u6210\u5305\u542B <strong>null</strong> \u5BF9\u8C61\u7684 <strong>Reference</strong> \u3002 \u8981\u4F7F\u7528\u5B83\uFF0C\u8BF7\u4ECE\u7279\u5B9A\u7684 <strong>Reference</strong> \u7C7B\u7EE7\u627F\uFF0C\u5E76\u4E3A\u65B0\u7C7B\u6DFB\u52A0\u66F4\u591A\u6709\u7528\u7684\u65B9\u6CD5\u3002</p><h3 id="weakhashmap" tabindex="-1"><a class="header-anchor" href="#weakhashmap" aria-hidden="true">#</a> WeakHashMap</h3><p>\u96C6\u5408\u7C7B\u5E93\u4E2D\u6709\u4E00\u4E2A\u7279\u6B8A\u7684 <strong>Map</strong> \u6765\u4FDD\u5B58\u5F31\u5F15\u7528\uFF1A <strong>WeakHashMap</strong> \u3002 \u6B64\u7C7B\u53EF\u4EE5\u66F4\u8F7B\u677E\u5730\u521B\u5EFA\u89C4\u8303\u5316\u6620\u5C04\u3002\u5728\u8FD9\u79CD\u6620\u5C04\u4E2D\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EC5\u4EC5\u521B\u5EFA\u4E00\u4E2A\u7279\u5B9A\u503C\u7684\u5B9E\u4F8B\u6765\u8282\u7701\u5B58\u50A8\u7A7A\u95F4\u3002\u5F53\u7A0B\u5E8F\u9700\u8981\u8BE5\u503C\u65F6\uFF0C\u5B83\u4F1A\u67E5\u627E\u6620\u5C04\u4E2D\u7684\u73B0\u6709\u5BF9\u8C61\u5E76\u4F7F\u7528\u5B83\uFF08\u800C\u4E0D\u662F\u4ECE\u5934\u5F00\u59CB\u521B\u5EFA\u4E00\u4E2A\uFF09\u3002 \u8BE5\u6620\u5C04\u53EF\u4EE5\u5C06\u503C\u4F5C\u4E3A\u5176\u521D\u59CB\u5316\u7684\u4E00\u90E8\u5206\uFF0C\u4F46\u66F4\u6709\u53EF\u80FD\u7684\u662F\u5728\u9700\u8981\u65F6\u521B\u5EFA\u8BE5\u503C\u3002</p><p>\u7531\u4E8E\u8FD9\u662F\u4E00\u79CD\u8282\u7701\u5B58\u50A8\u7A7A\u95F4\u7684\u6280\u672F\uFF0C\u56E0\u6B64 <strong>WeakHashMap</strong> \u5141\u8BB8\u5783\u573E\u6536\u96C6\u5668\u81EA\u52A8\u6E05\u7406\u952E\u548C\u503C\uFF0C\u8FD9\u662F\u975E\u5E38\u65B9\u4FBF\u7684\u3002\u4E0D\u80FD\u5BF9\u653E\u5728 <strong>WeakHashMap</strong> \u4E2D\u7684\u952E\u548C\u503C\u505A\u4EFB\u4F55\u7279\u6B8A\u64CD\u4F5C\uFF0C\u5B83\u4EEC\u7531 map \u81EA\u52A8\u5305\u88C5\u5728 <strong>WeakReference</strong> \u4E2D\u3002\u5F53\u952E\u4E0D\u518D\u88AB\u4F7F\u7528\u7684\u65F6\u5019\u624D\u5141\u8BB8\u6E05\u7406\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/CanonicalMapping.java</span>
<span class="token comment">// Demonstrates WeakHashMap</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ident<span class="token punctuation">;</span>
  <span class="token class-name">Element</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> ident <span class="token operator">=</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> ident<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span>ident<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> r <span class="token keyword">instanceof</span> <span class="token class-name">Element</span> <span class="token operator">&amp;&amp;</span>
      <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ident<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Element</span><span class="token punctuation">)</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span>ident<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Finalizing &quot;</span> <span class="token operator">+</span>
      <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> ident<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
  <span class="token class-name">Key</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
  <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CanonicalMapping</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token comment">// Or, choose size via the command line:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
      size <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Key</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">WeakHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Key</span> k <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Key</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Value</span> v <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span> <span class="token comment">// Save as &quot;real&quot; references</span>
      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Key</strong> \u7C7B\u5FC5\u987B\u5177\u6709 <code>hashCode()</code> \u548C <code>equals()</code> \uFF0C\u56E0\u4E3A\u5B83\u5C06\u88AB\u7528\u4F5C\u6563\u5217\u6570\u636E\u7ED3\u6784\u4E2D\u7684\u952E\u3002 <code>hashCode()</code> \u7684\u5185\u5BB9\u5728<a href="">\u9644\u5F55\uFF1A\u7406\u89E3hashCode\u548Cequals\u65B9\u6CD5</a>\u4E2D\u8FDB\u884C\u4E86\u63CF\u8FF0\u3002</p><p>\u8FD0\u884C\u7A0B\u5E8F\uFF0C\u4F60\u4F1A\u770B\u5230\u5783\u573E\u6536\u96C6\u5668\u6BCF\u4E09\u4E2A\u952E\u8DF3\u8FC7\u4E00\u6B21\u3002\u5BF9\u8BE5\u952E\u7684\u666E\u901A\u5F15\u7528\u4E5F\u88AB\u653E\u7F6E\u5728 <strong>keys</strong> \u6570\u7EC4\u4E2D\uFF0C\u56E0\u6B64\u8FD9\u4E9B\u5BF9\u8C61\u4E0D\u80FD\u88AB\u5783\u573E\u6536\u96C6\u3002</p><h2 id="java-1-0-1-1-\u7684\u96C6\u5408\u7C7B" tabindex="-1"><a class="header-anchor" href="#java-1-0-1-1-\u7684\u96C6\u5408\u7C7B" aria-hidden="true">#</a> Java 1.0 / 1.1 \u7684\u96C6\u5408\u7C7B</h2><p>\u4E0D\u5E78\u7684\u662F\uFF0C\u8BB8\u591A\u4EE3\u7801\u662F\u4F7F\u7528 Java 1.0 / 1.1 \u4E2D\u7684\u96C6\u5408\u7F16\u5199\u7684\uFF0C\u751A\u81F3\u65B0\u4EE3\u7801\u6709\u65F6\u4E5F\u662F\u4F7F\u7528\u8FD9\u4E9B\u7C7B\u7F16\u5199\u7684\u3002\u7F16\u5199\u65B0\u4EE3\u7801\u65F6\u5207\u52FF\u4F7F\u7528\u65E7\u96C6\u5408\u3002\u65E7\u7684\u96C6\u5408\u7C7B\u6709\u9650\uFF0C\u6240\u4EE5\u5173\u4E8E\u5B83\u4EEC\u7684\u8BA8\u8BBA\u4E0D\u591A\u3002\u7531\u4E8E\u5B83\u4EEC\u662F\u4E0D\u5408\u65F6\u5B9C\u7684\uFF0C\u6240\u4EE5\u6211\u4F1A\u5C3D\u91CF\u907F\u514D\u8FC7\u5206\u5F3A\u8C03\u4E00\u4E9B\u53EF\u6015\u7684\u8BBE\u8BA1\u51B3\u5B9A\u3002</p><h3 id="vector-\u548C-enumeration" tabindex="-1"><a class="header-anchor" href="#vector-\u548C-enumeration" aria-hidden="true">#</a> Vector \u548C Enumeration</h3><p>Java 1.0 / 1.1 \u4E2D\u552F\u4E00\u7684\u81EA\u6269\u5C55\u5E8F\u5217\u662F <strong>Vector</strong> \uFF0C\u56E0\u6B64\u5B83\u88AB\u7528\u4E8E\u5F88\u591A\u5730\u65B9\u3002\u5B83\u7684\u7F3A\u9677\u592A\u591A\u4E86\uFF0C\u65E0\u6CD5\u5728\u8FD9\u91CC\u63CF\u8FF0\uFF08\u53C2\u89C1\u300AJava\u7F16\u7A0B\u601D\u60F3\u300B\u7B2C1\u7248\uFF0C\u53EF\u4ECE<a href="www.OnJava8.com">www.OnJava8.com</a>\u514D\u8D39\u4E0B\u8F7D\uFF09\u3002\u57FA\u672C\u4E0A\uFF0C\u4F60\u53EF\u4EE5\u5C06\u5B83\u770B\u4F5C\u662F\u5177\u6709\u5197\u957F\u4E14\u7B28\u62D9\u7684\u65B9\u6CD5\u540D\u79F0\u7684 <strong>ArrayList</strong> \u3002\u5728\u4FEE\u8BA2\u540E\u7684 Java \u96C6\u5408\u5E93\u4E2D\uFF0C<strong>Vector</strong> \u5DF2\u7ECF\u88AB\u8C03\u6574\u9002\u914D\u8FC7\uFF0C\u56E0\u6B64\u53EF\u4EE5\u4F5C\u4E3A <strong>Collection</strong> \u548C <strong>List</strong> \u6765\u4F7F\u7528\u3002\u4E8B\u5B9E\u8BC1\u660E\u8FD9\u6709\u70B9\u4E0D\u6B63\u5E38\uFF0C\u96C6\u5408\u7C7B\u5E93\u4ECD\u7136\u5305\u542B\u5B83\u53EA\u662F\u4E3A\u4E86\u652F\u6301\u65E7\u7684 Java \u4EE3\u7801\uFF0C\u4F46\u8FD9\u4F1A\u8BA9\u4E00\u4E9B\u4EBA\u8BEF\u4EE5\u4E3A <strong>Vector</strong> \u5DF2\u7ECF\u53D8\u5F97\u66F4\u597D\u4E86\u3002</p><p>\u8FED\u4EE3\u5668\u7684 Java 1.0 / 1.1 \u7248\u672C\u9009\u62E9\u521B\u5EFA\u4E00\u4E2A\u65B0\u540D\u79F0\u201Cenumeration\u201D\uFF0C\u800C\u4E0D\u662F\u4F7F\u7528\u6BCF\u4E2A\u4EBA\u90FD\u719F\u6089\u7684\u672F\u8BED\uFF08\u201Citerator\u201D\uFF09\u3002 <strong>Enumeration</strong> \u63A5\u53E3\u5C0F\u4E8E <strong>Iterator</strong> \uFF0C\u53EA\u5305\u542B\u4E24\u4E2A\u65B9\u6CD5\uFF0C\u5E76\u4E14\u5B83\u4F7F\u7528\u66F4\u957F\u7684\u65B9\u6CD5\u540D\u79F0\uFF1A\u5982\u679C\u8FD8\u6709\u66F4\u591A\u5143\u7D20\uFF0C\u5219 <code>boolean hasMoreElements()</code> \u8FD4\u56DE <code>true</code> \uFF0C <code>Object nextElement()</code> \u8FD4\u56DE\u6B64enumeration\u7684\u4E0B\u4E00\u4E2A\u5143\u7D20 \uFF08\u5426\u5219\u4F1A\u629B\u51FA\u5F02\u5E38\uFF09\u3002</p><p><strong>Enumeration</strong> \u53EA\u662F\u4E00\u4E2A\u63A5\u53E3\uFF0C\u800C\u4E0D\u662F\u4E00\u4E2A\u5B9E\u73B0\uFF0C\u751A\u81F3\u65B0\u7684\u7C7B\u5E93\u6709\u65F6\u4ECD\u7136\u4F7F\u7528\u65E7\u7684 <strong>Enumeration</strong> \uFF0C\u8FD9\u662F\u4E0D\u5E78\u7684\uFF0C\u4F46\u901A\u5E38\u662F\u65E0\u5BB3\u7684\u3002\u5E94\u8BE5\u603B\u662F\u5728\u81EA\u5DF1\u7684\u4EE3\u7801\u4E2D\u4F7F\u7528 <strong>Iterator</strong> \uFF0C\u4F46\u8981\u505A\u597D\u51C6\u5907\u5E94\u5BF9\u90A3\u4E9B\u63D0\u4F9B <strong>Enumeration</strong> \u7684\u7C7B\u5E93\u3002</p><p>\u6B64\u5916\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>Collections.enumeration()</code> \u65B9\u6CD5\u4E3A\u4EFB\u4F55 <strong>Collection</strong> \u751F\u6210 <strong>Enumeration</strong> \uFF0C\u5982\u4E0B\u4F8B\u6240\u793A\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Enumerations.java</span>
<span class="token comment">// Java 1.0/1.1 Vector and Enumeration</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">onjava<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Enumerations</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> v <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Countries</span><span class="token punctuation">.</span><span class="token function">names</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Produce an Enumeration from a Collection:</span>
    e <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">enumeration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
ALGERIA, ANGOLA, BENIN, BOTSWANA, BURKINA FASO,
BURUNDI, CAMEROON, CAPE VERDE, CENTRAL AFRICAN
REPUBLIC, CHAD,
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8981\u751F\u6210 <strong>Enumeration</strong> \uFF0C\u53EF\u4EE5\u8C03\u7528 <code>elements()</code> \uFF0C\u7136\u540E\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u6267\u884C\u5411\u524D\u8FED\u4EE3\u3002</p><p>\u6700\u540E\u4E00\u884C\u521B\u5EFA\u4E00\u4E2A <strong>ArrayList</strong> \uFF0C\u5E76\u4F7F\u7528 <code>enumeration() </code> \u6765\u5C06 <strong>ArrayList</strong> \u9002\u914D\u4E3A\u4E00\u4E2A <strong>Enumeration</strong> \u3002 \u56E0\u6B64\uFF0C\u5982\u679C\u6709\u65E7\u4EE3\u7801\u9700\u8981\u4F7F\u7528 <strong>Enumeration</strong> \uFF0C\u4F60\u4ECD\u7136\u53EF\u4EE5\u4F7F\u7528\u65B0\u96C6\u5408\u3002</p><h3 id="hashtable" tabindex="-1"><a class="header-anchor" href="#hashtable" aria-hidden="true">#</a> Hashtable</h3><p>\u6B63\u5982\u4F60\u5728\u672C\u9644\u5F55\u4E2D\u7684\u6027\u80FD\u6BD4\u8F83\u4E2D\u6240\u770B\u5230\u7684\uFF0C\u57FA\u672C\u7684 <strong>Hashtable</strong> \u4E0E <strong>HashMap</strong> \u975E\u5E38\u76F8\u4F3C\uFF0C\u751A\u81F3\u65B9\u6CD5\u540D\u79F0\u90FD\u76F8\u4F3C\u3002\u5728\u65B0\u4EE3\u7801\u4E2D\u6CA1\u6709\u7406\u7531\u4F7F\u7528 <strong>Hashtable</strong> \u800C\u4E0D\u662F <strong>HashMap</strong> \u3002</p><h3 id="stack" tabindex="-1"><a class="header-anchor" href="#stack" aria-hidden="true">#</a> Stack</h3><p>\u4E4B\u524D\u4F7F\u7528 <strong>LinkedList</strong> \u5F15\u5165\u4E86\u6808\u7684\u6982\u5FF5\u3002 Java 1.0 / 1.1 <strong>Stack</strong> \u7684\u5947\u602A\u4E4B\u5904\u5728\u4E8E\uFF0C\u4E0D\u662F\u4EE5\u7EC4\u5408\u65B9\u5F0F\u4F7F\u7528 <strong>Vector</strong> \uFF0C\u800C\u662F\u7EE7\u627F\u81EA <strong>Vector</strong> \u3002 \u56E0\u6B64\u5B83\u5177\u6709 <strong>Vector</strong> \u7684\u6240\u6709\u7279\u5F81\u548C\u884C\u4E3A\u4EE5\u53CA\u4E00\u4E9B\u989D\u5916\u7684 <strong>Stack</strong> \u884C\u4E3A\u3002\u5F88\u96BE\u53BB\u77E5\u9053\u8BBE\u8BA1\u5E08\u662F\u5426\u6709\u610F\u8BC6\u5730\u8BA4\u4E3A\u8FD9\u6837\u505A\u662F\u6709\u7528\u7684\uFF0C\u6216\u8005\u5B83\u662F\u5426\u53EA\u662F\u592A\u5929\u771F\u4E86\uFF0C\u65E0\u8BBA\u5982\u4F55\uFF0C\u5B83\u5728\u8FDB\u5165\u53D1\u884C\u7248\u4E4B\u524D\u663E\u7136\u6CA1\u6709\u7ECF\u8FC7\u5BA1\u67E5\uFF0C\u6240\u4EE5\u8FD9\u4E2A\u7CDF\u7CD5\u7684\u8BBE\u8BA1\u4ECD\u7136\u5B58\u5728\uFF08\u4F46\u4E0D\u8981\u4F7F\u7528\u5B83\uFF09\u3002</p><p>\u8FD9\u662F <strong>Stack</strong> \u7684\u7B80\u5355\u6F14\u793A\uFF0C\u5411\u6808\u4E2D\u653E\u5165\u679A\u4E3E\u4E2D\u6BCF\u4E00\u4E2A\u7C7B\u578B\u7684 <strong>String</strong> \u5F62\u5F0F\u3002\u5B83\u8FD8\u5C55\u793A\u4E86\u5982\u4F55\u8F7B\u677E\u5730\u5C06 <strong>LinkedList</strong> \u7528\u4F5C\u6808\uFF0C\u6216\u8005\u4F7F\u7528\u5728<a href="">\u7B2C\u5341\u4E8C\u7AE0\uFF1A\u96C6\u5408</a>\u7AE0\u8282\u4E2D\u521B\u5EFA\u7684 <strong>Stack</strong> \u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Stacks.java</span>
<span class="token comment">// Demonstration of Stack Class</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">Month</span> <span class="token punctuation">{</span> JANUARY<span class="token punctuation">,</span> FEBRUARY<span class="token punctuation">,</span> MARCH<span class="token punctuation">,</span> APRIL<span class="token punctuation">,</span>
  MAY<span class="token punctuation">,</span> JUNE<span class="token punctuation">,</span> JULY<span class="token punctuation">,</span> AUGUST<span class="token punctuation">,</span> SEPTEMBER<span class="token punctuation">,</span>
  OCTOBER<span class="token punctuation">,</span> NOVEMBER <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stacks</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Month</span> m <span class="token operator">:</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;stack = &quot;</span> <span class="token operator">+</span> stack<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Treating a stack as a Vector:</span>
    stack<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token string">&quot;The last line&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
      <span class="token string">&quot;element 5 = &quot;</span> <span class="token operator">+</span> stack<span class="token punctuation">.</span><span class="token function">elementAt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;popping elements:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Using a LinkedList as a Stack:</span>
    <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lstack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Month</span> m <span class="token operator">:</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      lstack<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;lstack = &quot;</span> <span class="token operator">+</span> lstack<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>lstack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>lstack<span class="token punctuation">.</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Using the Stack class from</span>
    <span class="token comment">// the Collections Chapter:</span>
    <span class="token class-name"><span class="token namespace">onjava<span class="token punctuation">.</span></span>Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stack2 <span class="token operator">=</span>
      <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">onjava<span class="token punctuation">.</span></span>Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Month</span> m <span class="token operator">:</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      stack2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;stack2 = &quot;</span> <span class="token operator">+</span> stack2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>stack2<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stack2<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
stack = [JANUARY, FEBRUARY, MARCH, APRIL, MAY, JUNE,
JULY, AUGUST, SEPTEMBER, OCTOBER, NOVEMBER]
element 5 = JUNE
popping elements:
The last line NOVEMBER OCTOBER SEPTEMBER AUGUST JULY
JUNE MAY APRIL MARCH FEBRUARY JANUARY lstack =
[NOVEMBER, OCTOBER, SEPTEMBER, AUGUST, JULY, JUNE, MAY,
APRIL, MARCH, FEBRUARY, JANUARY]
NOVEMBER OCTOBER SEPTEMBER AUGUST JULY JUNE MAY APRIL
MARCH FEBRUARY JANUARY stack2 = [NOVEMBER, OCTOBER,
SEPTEMBER, AUGUST, JULY, JUNE, MAY, APRIL, MARCH,
FEBRUARY, JANUARY]
NOVEMBER OCTOBER SEPTEMBER AUGUST JULY JUNE MAY APRIL
MARCH FEBRUARY JANUARY
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>String</strong> \u5F62\u5F0F\u662F\u7531 <strong>Month</strong> \u4E2D\u7684\u679A\u4E3E\u5E38\u91CF\u751F\u6210\u7684\uFF0C\u4F7F\u7528 <code>push()</code> \u538B\u5165\u5230\u6808\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528 <code>pop()</code> \u4ECE\u6808\u9876\u90E8\u53D6\u51FA\u3002\u4E3A\u4E86\u8BF4\u660E\u4E00\u70B9\uFF0C\u5C06 <strong>Vector</strong> \u7684\u64CD\u4F5C\u4E5F\u5728 <strong>Stack</strong> \u5BF9\u8C61\u4E0A\u6267\u884C\uFF0C \u8FD9\u662F\u53EF\u80FD\u7684\uFF0C\u56E0\u4E3A\u51ED\u501F\u7EE7\u627F\uFF0C <strong>Stack</strong> \u662F <strong>Vector</strong> \u3002 \u56E0\u6B64\uFF0C\u53EF\u4EE5\u5728 <strong>Vector</strong> \u4E0A\u6267\u884C\u7684\u6240\u6709\u64CD\u4F5C\u4E5F\u53EF\u4EE5\u5728 <strong>Stack</strong> \u4E0A\u6267\u884C\uFF0C\u4F8B\u5982 <code>elementAt()</code> \u3002</p><p>\u5982\u524D\u6240\u8FF0\uFF0C\u5728\u9700\u8981\u6808\u884C\u4E3A\u65F6\u4F7F\u7528 <strong>LinkedList</strong> \uFF0C\u6216\u8005\u4ECE <strong>LinkedList</strong> \u7C7B\u521B\u5EFA\u7684 <strong>onjava.Stack</strong> \u7C7B\u3002</p><h3 id="bitset" tabindex="-1"><a class="header-anchor" href="#bitset" aria-hidden="true">#</a> BitSet</h3><p><strong>BitSet</strong> \u7528\u4E8E\u6709\u6548\u5730\u5B58\u50A8\u5927\u91CF\u7684\u5F00\u5173\u4FE1\u606F\u3002\u4EC5\u4ECE\u5C3A\u5BF8\u5927\u5C0F\u7684\u89D2\u5EA6\u6765\u770B\u5B83\u662F\u6709\u6548\u7684\uFF0C\u5982\u679C\u4F60\u6B63\u5728\u5BFB\u627E\u6709\u6548\u7684\u8BBF\u95EE\uFF0C\u5B83\u6BD4\u4F7F\u7528\u672C\u673A\u6570\u7EC4\uFF08native array\uFF09\u7A0D\u6162\u3002</p><p>\u6B64\u5916\uFF0C <strong>BitSet</strong> \u7684\u6700\u5C0F\u5927\u5C0F\u662F <strong>long</strong> \uFF1A64\u4F4D\u3002\u8FD9\u610F\u5473\u7740\u5982\u679C\u4F60\u8981\u5B58\u50A8\u66F4\u5C0F\u7684\u4E1C\u897F\uFF0C\u6BD4\u59828\u4F4D\uFF0C <strong>BitSet</strong> \u5C31\u662F\u6D6A\u8D39\uFF0C\u5982\u679C\u5C3A\u5BF8\u6709\u95EE\u9898\uFF0C\u4F60\u6700\u597D\u521B\u5EFA\u81EA\u5DF1\u7684\u7C7B\uFF0C\u6216\u8005\u53EA\u662F\u7528\u4E00\u4E2A\u6570\u7EC4\u6765\u4FDD\u5B58\u4F60\u7684\u6807\u5FD7\u3002\uFF08\u53EA\u6709\u5728\u4F60\u521B\u5EFA\u8BB8\u591A\u5305\u542B\u5F00\u5173\u4FE1\u606F\u5217\u8868\u7684\u5BF9\u8C61\u65F6\u624D\u4F1A\u51FA\u73B0\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5E76\u4E14\u53EA\u5E94\u6839\u636E\u5206\u6790\u548C\u5176\u4ED6\u6307\u6807\u6765\u51B3\u5B9A\u3002\u5982\u679C\u4F60\u505A\u51FA\u6B64\u51B3\u5B9A\u53EA\u662F\u56E0\u4E3A\u60A8\u8BA4\u4E3A <strong>BitSet</strong> \u592A\u5927\uFF0C\u90A3\u4E48\u6700\u7EC8\u4F1A\u4EA7\u751F\u4E0D\u5FC5\u8981\u7684\u590D\u6742\u6027\u5E76\u4E14\u6D6A\u8D39\u5927\u91CF\u65F6\u95F4\u3002\uFF09</p><p>\u5F53\u6DFB\u52A0\u66F4\u591A\u5143\u7D20\u65F6\uFF0C\u666E\u901A\u96C6\u5408\u4F1A\u6269\u5C55\uFF0C <strong>BitSet</strong>\u4E5F\u4F1A\u8FD9\u6837\u505A\u3002\u4EE5\u4E0B\u793A\u4F8B\u663E\u793A\u4E86 <strong>BitSet</strong> \u7684\u5DE5\u4F5C\u539F\u7406\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// collectiontopics/Bits.java</span>
<span class="token comment">// Demonstration of BitSet</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bits</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printBitSet</span><span class="token punctuation">(</span><span class="token class-name">BitSet</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;bits: &quot;</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">StringBuilder</span> bbits <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
      bbits<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;bit pattern: &quot;</span> <span class="token operator">+</span> bbits<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Take the LSB of nextInt():</span>
    <span class="token keyword">byte</span> bt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BitSet</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>  bt<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        bb<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span>
        bb<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;byte value: &quot;</span> <span class="token operator">+</span> bt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printBitSet</span><span class="token punctuation">(</span>bb<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">short</span> st <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span>rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BitSet</span> bs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>  st<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        bs<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span>
        bs<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;short value: &quot;</span> <span class="token operator">+</span> st<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printBitSet</span><span class="token punctuation">(</span>bs<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> it <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BitSet</span> bi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">31</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">)</span> <span class="token operator">&amp;</span>  it<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        bi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span>
        bi<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;int value: &quot;</span> <span class="token operator">+</span> it<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printBitSet</span><span class="token punctuation">(</span>bi<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Test bitsets &gt;= 64 bits:</span>
    <span class="token class-name">BitSet</span> b127 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b127<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;set bit 127: &quot;</span> <span class="token operator">+</span> b127<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BitSet</span> b255 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b255<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;set bit 255: &quot;</span> <span class="token operator">+</span> b255<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BitSet</span> b1023 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitSet</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b1023<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1023</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    b1023<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;set bit 1023: &quot;</span> <span class="token operator">+</span> b1023<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* Output:
byte value: -107
bits: {0, 2, 4, 7}
bit pattern: 101010010000000000000000000000000000000000
0000000000000000000000
short value: 1302
bits: {1, 2, 4, 8, 10}
bit pattern: 011010001010000000000000000000000000000000
0000000000000000000000
int value: -2014573909
bits: {0, 1, 3, 5, 7, 9, 11, 18, 19, 21, 22, 23, 24,
25, 26, 31}
bit pattern: 110101010101000000110111111000010000000000
0000000000000000000000
set bit 127: {127}
set bit 255: {255}
set bit 1023: {1023, 1024}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u968F\u673A\u6570\u751F\u6210\u5668\u7528\u4E8E\u521B\u5EFA\u968F\u673A <strong>byte</strong> \uFF0C <strong>short</strong> \u548C <strong>int</strong> \uFF0C\u5E76\u4E14\u6BCF\u4E2A\u90FD\u5728 <strong>BitSet</strong> \u4E2D\u8F6C\u6362\u4E3A\u76F8\u5E94\u7684\u4F4D\u6A21\u5F0F\u3002\u8FD9\u6837\u53EF\u4EE5\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u56E0\u4E3A <strong>BitSet</strong> \u662F64\u4F4D\uFF0C\u6240\u4EE5\u8FD9\u4E9B\u90FD\u4E0D\u4F1A\u5BFC\u81F4\u5B83\u7684\u5927\u5C0F\u589E\u52A0\uFF0C\u7136\u540E\u521B\u5EFA\u66F4\u5927\u7684 <strong>BitSet</strong> \u3002 \u8BF7\u6CE8\u610F\uFF0C <strong>BitSet</strong> \u4F1A\u6839\u636E\u9700\u8981\u8FDB\u884C\u6269\u5C55\u3002</p><p>\u5BF9\u4E8E\u53EF\u4EE5\u547D\u540D\u7684\u56FA\u5B9A\u6807\u5FD7\u96C6\uFF0C <strong>EnumSet</strong> \uFF08\u53C2\u89C1<a href="">\u7B2C\u4E8C\u5341\u4E8C\u7AE0\uFF1A\u679A\u4E3E</a>\u7AE0\u8282\uFF09\u901A\u5E38\u6BD4 <strong>BitSet</strong> \u66F4\u597D\uFF0C\u56E0\u4E3A <strong>EnumSet</strong> \u5141\u8BB8\u64CD\u4F5C\u540D\u79F0\u800C\u4E0D\u662F\u6570\u5B57\u4F4D\u4F4D\u7F6E\uFF0C\u4ECE\u800C\u53EF\u4EE5\u51CF\u5C11\u9519\u8BEF\u3002 <strong>EnumSet</strong> \u8FD8\u53EF\u4EE5\u9632\u6B62\u610F\u5916\u5730\u6DFB\u52A0\u65B0\u7684\u6807\u8BB0\u4F4D\u7F6E\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u5BFC\u81F4\u4E00\u4E9B\u4E25\u91CD\u7684\uFF0C\u96BE\u4EE5\u53D1\u73B0\u7684\u9519\u8BEF\u3002\u4F7F\u7528 <strong>BitSet</strong> \u800C\u4E0D\u662F <strong>EnumSet</strong> \u7684\u552F\u4E00\u539F\u56E0\u662F\uFF0C\u4E0D\u77E5\u9053\u5728\u8FD0\u884C\u65F6\u9700\u8981\u591A\u5C11\u6807\u5FD7\uFF0C\u6216\u8005\u4E3A\u6807\u5FD7\u5206\u914D\u540D\u79F0\u662F\u4E0D\u5408\u7406\u7684\uFF0C\u6216\u8005\u9700\u8981 <strong>BitSet</strong> \u4E2D\u7684\u4E00\u4E2A\u7279\u6B8A\u64CD\u4F5C\uFF08\u8BF7\u53C2\u9605 <strong>BitSet</strong> \u548C <strong>EnumSet</strong> \u7684 JDK \u6587\u6863\uFF09\u3002</p><h2 id="\u672C\u7AE0\u5C0F\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u672C\u7AE0\u5C0F\u7ED3" aria-hidden="true">#</a> \u672C\u7AE0\u5C0F\u7ED3</h2><p>\u96C6\u5408\u53EF\u4EE5\u8BF4\u662F\u7F16\u7A0B\u8BED\u8A00\u4E2D\u6700\u5E38\u7528\u7684\u5DE5\u5177\u3002\u6709\u4E9B\u8BED\u8A00\uFF08\u4F8B\u5982Python\uFF09\u751A\u81F3\u5C06\u57FA\u672C\u96C6\u5408\u7EC4\u4EF6\uFF08\u5217\u8868\uFF0C\u6620\u5C04\u548C\u96C6\u5408\uFF09\u4F5C\u4E3A\u5185\u7F6E\u51FD\u6570\u5305\u542B\u5728\u5176\u4E2D\u3002</p><p>\u6B63\u5982\u5728<a href="">\u7B2C\u5341\u4E8C\u7AE0\uFF1A\u96C6\u5408</a>\u7AE0\u8282\u4E2D\u770B\u5230\u7684\u90A3\u6837\uFF0C\u53EF\u4EE5\u4F7F\u7528\u96C6\u5408\u6267\u884C\u8BB8\u591A\u975E\u5E38\u6709\u7528\u7684\u64CD\u4F5C\uFF0C\u800C\u4E0D\u9700\u8981\u592A\u591A\u52AA\u529B\u3002\u4F46\u662F\uFF0C\u5728\u67D0\u4E9B\u65F6\u5019\uFF0C\u4E3A\u4E86\u6B63\u786E\u5730\u4F7F\u7528\u5B83\u4EEC\u800C\u4E0D\u5F97\u4E0D\u66F4\u591A\u5730\u4E86\u89E3\u96C6\u5408\uFF0C\u7279\u522B\u662F\uFF0C\u5FC5\u987B\u5145\u5206\u4E86\u89E3\u6563\u5217\u64CD\u4F5C\u4EE5\u7F16\u5199\u81EA\u5DF1\u7684 <code>hashCode()</code> \u65B9\u6CD5\uFF08\u5E76\u4E14\u5FC5\u987B\u77E5\u9053\u4F55\u65F6\u9700\u8981\uFF09\uFF0C\u5E76\u4E14\u4F60\u5FC5\u987B\u5145\u5206\u4E86\u89E3\u5404\u79CD\u96C6\u5408\u5B9E\u73B0\uFF0C\u4EE5\u6839\u636E\u4F60\u7684\u9700\u6C42\u9009\u62E9\u5408\u9002\u7684\u96C6\u5408\u3002\u672C\u9644\u5F55\u6DB5\u76D6\u4E86\u8FD9\u4E9B\u6982\u5FF5\uFF0C\u5E76\u8BA8\u8BBA\u4E86\u6709\u5173\u96C6\u5408\u5E93\u7684\u5176\u4ED6\u6709\u7528\u8BE6\u7EC6\u4FE1\u606F\u3002\u4F60\u73B0\u5728\u5E94\u8BE5\u5DF2\u7ECF\u51C6\u5907\u597D\u5728\u65E5\u5E38\u7F16\u7A0B\u4EFB\u52A1\u4E2D\u4F7F\u7528 Java \u96C6\u5408\u4E86\u3002</p><p>\u96C6\u5408\u5E93\u7684\u8BBE\u8BA1\u5F88\u56F0\u96BE\uFF08\u5927\u591A\u6570\u5E93\u8BBE\u8BA1\u95EE\u9898\u90FD\u662F\u5982\u6B64\uFF09\u3002\u5728 C++ \u4E2D\uFF0C\u96C6\u5408\u7C7B\u6DB5\u76D6\u4E86\u8BB8\u591A\u4E0D\u540C\u7C7B\u7684\u57FA\u7840\u3002\u8FD9\u6BD4\u4E4B\u524D\u53EF\u7528\u7684 C++ \u96C6\u5408\u7C7B\u66F4\u597D\uFF0C\u4F46\u5B83\u6CA1\u6709\u5F88\u597D\u5730\u8F6C\u6362\u4E3A Java \u3002\u5728\u53E6\u4E00\u4E2A\u6781\u7AEF\uFF0C\u6211\u770B\u5230\u4E86\u4E00\u4E2A\u7531\u5355\u4E2A\u7C7B\u201Ccollection\u201D\u7EC4\u6210\u7684\u96C6\u5408\u5E93\uFF0C\u5B83\u540C\u65F6\u5145\u5F53\u7EBF\u6027\u5E8F\u5217\u548C\u5173\u8054\u6570\u7EC4\u3002 Java \u96C6\u5408\u5E93\u8BD5\u56FE\u5728\u529F\u80FD\u548C\u590D\u6742\u6027\u4E4B\u95F4\u53D6\u5F97\u5E73\u8861\u3002\u7ED3\u679C\u5728\u67D0\u4E9B\u5730\u65B9\u770B\u8D77\u6765\u6709\u70B9\u5947\u602A\u3002\u4E0E\u65E9\u671F Java \u5E93\u4E2D\u7684\u4E00\u4E9B\u51B3\u7B56\u4E0D\u540C\uFF0C\u8FD9\u4E9B\u5947\u602A\u7684\u4E0D\u662F\u4E8B\u6545\uFF0C\u800C\u662F\u5728\u57FA\u4E8E\u590D\u6742\u6027\u7684\u6743\u8861\u4E0B\u800C\u4ED4\u7EC6\u8003\u8651\u7684\u51B3\u7B56\u3002</p><p>[^1]: <strong>java.util</strong> \u4E2D\u7684 <strong>Map</strong> \u4F7F\u7528 <strong>Map</strong> \u7684 <code>getKey()</code> \u548C <code>getValue()</code> \u6267\u884C\u6279\u91CF\u590D\u5236\uFF0C\u56E0\u6B64\u8FD9\u662F\u6709\u6548\u7684\u3002\u5982\u679C\u81EA\u5B9A\u4E49 <strong>Map</strong> \u53EA\u662F\u590D\u5236\u6574\u4E2A <strong>Map.Entry</strong> \uFF0C\u90A3\u4E48\u8FD9\u79CD\u65B9\u6CD5\u5C31\u4F1A\u51FA\u73B0\u95EE\u9898\u3002</p><p>[^2]: \u867D\u7136\u5F53\u6211\u7528\u8FD9\u79CD\u65B9\u5F0F\u63CF\u8FF0\u5B83\u7684\u65F6\u5019\u542C\u8D77\u6765\u5F88\u5947\u602A\u800C\u4E14\u597D\u50CF\u6CA1\u4EC0\u4E48\u7528\u5904\uFF0C\u4F46\u5728<a href="">\u7B2C\u5341\u4E5D\u7AE0 \u7C7B\u578B\u4FE1\u606F</a>\u7AE0\u8282\u4E2D\u5DF2\u7ECF\u770B\u5230\u8FC7\uFF0C\u8FD9\u79CD\u52A8\u6001\u884C\u4E3A\u4E5F\u53EF\u4EE5\u975E\u5E38\u5F3A\u5927\u6709\u7528\u3002</p><p>[^3]: \u5982\u679C\u8FD9\u4E9B\u52A0\u901F\u4ECD\u7136\u65E0\u6CD5\u6EE1\u8DB3\u6027\u80FD\u9700\u6C42\uFF0C\u5219\u53EF\u4EE5\u901A\u8FC7\u7F16\u5199\u81EA\u5DF1\u7684 <strong>Map</strong> \u5E76\u5C06\u5176\u81EA\u5B9A\u4E49\u4E3A\u7279\u5B9A\u7C7B\u578B\u6765\u8FDB\u4E00\u6B65\u52A0\u901F\u8868\u67E5\u627E\uFF0C\u4EE5\u907F\u514D\u56E0\u5411 <strong>\u5BF9\u8C61</strong> \u8F6C\u6362\u800C\u5BFC\u81F4\u7684\u5EF6\u8FDF\u3002\u4E3A\u4E86\u8FBE\u5230\u66F4\u9AD8\u7684\u6027\u80FD\u6C34\u5E73\uFF0C\u901F\u5EA6\u7231\u597D\u8005\u53EF\u4EE5\u4F7F\u7528 Donald Knuth \u7684\u300A\u8BA1\u7B97\u673A\u7A0B\u5E8F\u8BBE\u8BA1\u827A\u672F\uFF08\u7B2C3\u5377\uFF09\uFF1A\u6392\u5E8F\u4E0E\u67E5\u627E\u300B\uFF08\u7B2C\u4E8C\u7248\uFF09\uFF0C\u5C06\u6EA2\u51FA\u6876\u5217\u8868\uFF08overflow bucket lists\uFF09\u66FF\u6362\u4E3A\u5177\u6709\u4E24\u4E2A\u989D\u5916\u4F18\u52BF\u7684\u9635\u5217\uFF1A\u5B83\u4EEC\u53EF\u4EE5\u9488\u5BF9\u78C1\u76D8\u5B58\u50A8\u8FDB\u884C\u4F18\u5316\uFF0C\u5E76\u4E14\u5B83\u4EEC\u53EF\u4EE5\u8282\u7701\u5927\u90E8\u5206\u521B\u5EFA\u548C\u56DE\u6536\u4E2A\u522B\u8BB0\u5F55\uFF08individual records\uFF09\u7684\u65F6\u95F4\u3002</p><div style="page-break-after:always;"></div>`,236),e=[o];function c(l,i){return s(),a("div",null,e)}var k=n(p,[["render",c],["__file","Appendix-Collection-Topics.html.vue"]]);export{k as default};
